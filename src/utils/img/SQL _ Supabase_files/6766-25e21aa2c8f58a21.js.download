"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6766],{7820:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(87612),i=n(56124);function a(e,t){return 0===t.length?e:e+=" where ".concat(t.map(e=>{switch(e.operator){case"in":let t;return t=Array.isArray(e.value)?e.value.map(e=>s(e)):String(e.value).split(",").map(e=>s(e)),"".concat((0,i.yR)(e.column)," ").concat(e.operator," (").concat(t.join(","),")");case"is":return function(e){let t=String(e.value);switch(t){case"null":case"false":case"true":case"not null":return"".concat((0,i.yR)(e.column)," ").concat(e.operator," ").concat(t);default:return"".concat((0,i.yR)(e.column)," ").concat(e.operator," ").concat(s(e.value))}}(e);default:return"".concat((0,i.yR)(e.column)," ").concat(e.operator," ").concat(s(e.value))}}).join(" and "))}function s(e){return"string"!=typeof e||(null==e?void 0:e.startsWith("ARRAY["))&&(null==e?void 0:e.endsWith("]"))?e:(0,i.i0)(e)}function l(e){return"".concat((0,i.yR)(e.schema),".").concat((0,i.yR)(e.name))}class o{range(e,t){return this.pagination={offset:e,limit:t-e+1},this}toSql(){try{var e;let{actionValue:t,actionOptions:n,filters:r,sorts:s}=null!==(e=this.options)&&void 0!==e?e:{};switch(this.action){case"count":return function(e,t){let n="select count(*) from ".concat(l(e)),{filters:r}=null!=t?t:{};return r&&(n=a(n,r)),n+";"}(this.table,{filters:r});case"delete":return function(e,t,n){if(!t||0===t.length)throw{message:"no filters for this delete query"};let r="delete from ".concat(l(e)),{returning:i,enumArrayColumns:s}=null!=n?n:{};return t&&(r=a(r,t)),i&&(r+=void 0===s||0===s.length?" returning *":" returning *, ".concat(s.map(e=>'"'.concat(e,'"::text[]')).join(","))),r+";"}(this.table,r,{returning:null==n?void 0:n.returning,enumArrayColumns:null==n?void 0:n.enumArrayColumns});case"insert":return function(e,t,n){if(!t||0===t.length)throw{message:"no value to insert"};let{returning:r,enumArrayColumns:a}=null!=n?n:{},s=Object.keys(t[0]).map(e=>(0,i.yR)(e)).join(","),o="";return o=0==s.length?(0,i.WU)("insert into %1$s select from jsonb_populate_recordset(null::%1$s, %2$s)",l(e),(0,i.i0)(JSON.stringify(t))):(0,i.WU)("insert into %1$s (%2$s) select %2$s from jsonb_populate_recordset(null::%1$s, %3$s)",l(e),s,(0,i.i0)(JSON.stringify(t))),r&&(o+=void 0===a||0===a.length?" returning *":" returning *, ".concat(a.map(e=>'"'.concat(e,'"::text[]')).join(","))),o+";"}(this.table,t,{returning:null==n?void 0:n.returning,enumArrayColumns:null==n?void 0:n.enumArrayColumns});case"select":return function(e,t,n){var r;let s="";s+="select ".concat(null!=t?t:"*"," from ").concat(l(e));let{filters:o,pagination:c,sorts:d}=null!=n?n:{};if(o&&(s=a(s,o)),d&&(r=s,s=0===d.length?r:r+=" order by ".concat(d.map(e=>{if(!e.column)return null;let t=e.ascending?"asc":"desc",n=e.nullsFirst?"nulls first":"nulls last";return"".concat((0,i.yR)(e.table),".").concat((0,i.yR)(e.column)," ").concat(t," ").concat(n)}).join(", "))),c){let{limit:e,offset:t}=null!=c?c:{};s+=" limit ".concat((0,i.i0)(e)," offset ").concat((0,i.i0)(t))}return s+";"}(this.table,t,{filters:r,pagination:this.pagination,sorts:s});case"update":return function(e,t,n){let{filters:r,returning:s,enumArrayColumns:o}=null!=n?n:{};if(!r||0===r.length)throw{message:"no filters for this update query"};let c=Object.keys(t).map(e=>(0,i.yR)(e)).join(","),d=(0,i.WU)("update %1$s set (%2$s) = (select %2$s from json_populate_record(null::%1$s, %3$s))",l(e),c,(0,i.i0)(JSON.stringify(t)));return r&&(d=a(d,r)),s&&(d+=void 0===o||0===o.length?" returning *":" returning *, ".concat(o.map(e=>'"'.concat(e,'"::text[]')).join(","))),d+";"}(this.table,t,{filters:r,returning:null==n?void 0:n.returning,enumArrayColumns:null==n?void 0:n.enumArrayColumns});case"truncate":return function(e,t){let n="truncate ".concat(l(e)),{cascade:r}=null!=t?t:{};return r&&(n+=" cascade"),n+";"}(this.table,{cascade:null==n?void 0:n.cascade});default:return""}}catch(e){throw e}}constructor(e,t,n){(0,r._)(this,"table",void 0),(0,r._)(this,"action",void 0),(0,r._)(this,"options",void 0),(0,r._)(this,"pagination",void 0),this.table=e,this.action=t,this.options=n}}class c{filter(e,t,n){return this.filters.push({column:e,operator:t,value:n}),this}match(e){return Object.entries(e).map(e=>{let[t,n]=e;this.filters.push({column:t,operator:"=",value:n})}),this}order(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.sorts.push({table:e,column:t,ascending:n,nullsFirst:r}),this}range(e,t){return this._getQueryModifier().range(e,t)}toSql(){return this._getQueryModifier().toSql()}_getQueryModifier(){return new o(this.table,this.action,{actionValue:this.actionValue,actionOptions:this.actionOptions,filters:this.filters,sorts:this.sorts})}constructor(e,t,n,i){(0,r._)(this,"table",void 0),(0,r._)(this,"action",void 0),(0,r._)(this,"actionValue",void 0),(0,r._)(this,"actionOptions",void 0),(0,r._)(this,"filters",void 0),(0,r._)(this,"sorts",void 0),this.table=e,this.action=t,this.actionValue=n,this.actionOptions=i,this.filters=[],this.sorts=[]}}class d{count(){return new c(this.table,"count")}delete(e){return new c(this.table,"delete",void 0,e)}insert(e,t){return new c(this.table,"insert",e,t)}select(e){return new c(this.table,"select",e)}update(e,t){return new c(this.table,"update",e,t)}truncate(e){return new c(this.table,"truncate",void 0,e)}constructor(e){(0,r._)(this,"table",void 0),this.table=e}}class u{from(e,t){return new d({name:e,schema:null!=t?t:"public"})}}},31362:function(e,t,n){n.d(t,{b:function(){return d}});var r=n(52322),i=n(2784),a=n(83690),s=n(32079),l=n(95492),o=n(11354),c=n(52006);let d=e=>{let{visible:t,onClose:n}=e;return(0,r.jsx)(a.Z,{size:"medium",visible:t,header:"Schemas managed by Supabase",customFooter:(0,r.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,r.jsx)(s.z,{type:"default",onClick:()=>n(),children:"Understood"})}),onCancel:()=>n(),children:(0,r.jsxs)(a.Z.Content,{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:o.F.map(e=>(0,r.jsx)("code",{className:"text-xs",children:e},e))}),(0,r.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,r.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};t.Z=e=>{let{schema:t,entity:n}=e,[a,o]=(0,i.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.bZ,{children:[(0,r.jsx)(c.Z,{strokeWidth:2}),(0,r.jsxs)(l.Cd,{children:["Currently viewing ",n," from a protected schema"]}),(0,r.jsxs)(l.X,{children:[(0,r.jsxs)("p",{className:"mb-2",children:["The ",(0,r.jsx)("code",{className:"text-xs",children:t})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,r.jsx)(s.z,{type:"default",size:"tiny",onClick:()=>o(!0),children:"Learn more"})]})]}),(0,r.jsx)(d,{visible:a,onClose:()=>o(!1)})]})}},39771:function(e,t,n){var r=n(52322),i=n(34291),a=n.n(i),s=n(2784),l=n(32079);t.Z=e=>{let{loading:t=!1,disableApply:n=!1,hideApply:i=!1,children:o,applyButtonLabel:c="Apply",backButtonLabel:d="Back",applyFunction:u,closePanel:h=a(),formId:m}=e,[f,p]=(0,s.useState)(!1),x=()=>new Promise(e=>u(e)),v=async()=>{p(!0),await x(),p(!1)};return(0,r.jsxs)("div",{className:"flex w-full justify-end space-x-3 border-t border-default px-3 py-4",children:[(0,r.jsx)(l.z,{type:"default",htmlType:"button",onClick:h,disabled:f||t,children:d}),o,void 0!==u?(0,r.jsx)(l.z,{onClick:v,disabled:n||f||t,loading:f||t,children:c}):i?(0,r.jsx)("div",{}):(0,r.jsx)(l.z,{disabled:t||n,loading:t,"data-testid":"action-bar-save-row",htmlType:"submit",form:m,children:c})]})}},57241:function(e,t,n){var r=n(52322),i=n(24990),a=n(34291),s=n.n(a),l=n(39097),o=n.n(l),c=n(750),d=n(62284),u=n(48869),h=n(32079),m=n(22170),f=n(46529),p=n(14869),x=n(80756),v=n(7968),g=n(81604),j=n(17172),y=n(55274);t.Z=e=>{var t,n,a,l;let{value:b,enumTypes:w=[],className:N,size:_="medium",layout:E,error:S,disabled:T=!1,showLabel:z=!0,description:C,showRecommendation:k=!1,onOptionSelect:A=s()}=e,R=y.DL.concat(w.map(e=>e.name)),Z=!b||R.includes(b),O=y.VP[b],q=e=>{switch(e){case"number":return(0,r.jsx)(m.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"time":return(0,r.jsx)(f.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"text":return(0,r.jsx)(p.Z,{size:16,className:"text-foreground",strokeWidth:1.5});case"json":return(0,r.jsx)("div",{className:"text-foreground",style:{padding:"0px 1px"},children:"{ }"});case"bool":return(0,r.jsx)(x.Z,{size:16,className:"text-foreground",strokeWidth:1.5});default:return(0,r.jsx)(v.Z,{size:16,className:"text-foreground p-0.5",strokeWidth:1.5})}};return Z?T&&!z?(0,r.jsxs)(i.fC,{delayDuration:0,children:[(0,r.jsx)(i.xz,{children:(0,r.jsx)(c.Z,{readOnly:!0,disabled:!0,label:z?"Type":"",layout:z?"horizontal":void 0,className:"md:gap-x-0",size:"small",icon:q(null!==(l=null===(a=y.N0.find(e=>e.name===b))||void 0===a?void 0:a.type)&&void 0!==l?l:""),value:b})}),!z&&C&&(0,r.jsx)(i.h_,{children:(0,r.jsxs)(i.VY,{side:"bottom",children:[(0,r.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,r.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background w-[240px]",children:(0,r.jsx)("span",{className:"text-xs text-foreground",children:C})})]})})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d.Z,{label:z?"Type":"",layout:E||(z?"horizontal":"vertical"),value:b,size:_,error:S,disabled:T,descriptionText:C,className:"".concat(N," ").concat(T?"column-type-disabled":""," rounded-md"),onChange:e=>A(e),optionsWidth:480,children:[(0,r.jsx)(d.Z.Option,{value:"",label:"---",children:"---"},"empty"),w.length>0?(0,r.jsx)(d.Z.Option,{disabled:!0,value:"header-1",label:"header-1",children:"Other Data Types"},"header-1"):(0,r.jsx)(r.Fragment,{}),w.length>0?w.map(e=>(0,r.jsx)(d.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>(0,r.jsx)(g.Z,{size:16,className:"text-foreground",strokeWidth:1.5}),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("p",{className:"text-foreground",children:e.name}),void 0!==e.comment&&(0,r.jsx)("p",{className:"text-foreground-lighter",children:e.comment})]})},e.name)):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(d.Z.Option,{disabled:!0,value:"header-2",label:"header-2",children:"PostgreSQL Data Types"}),y.N0.map(e=>(0,r.jsx)(d.Z.Option,{value:e.name,label:e.name,addOnBefore:()=>q(e.type),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-foreground",children:e.name}),(0,r.jsx)("span",{className:"text-foreground-lighter",children:e.description})]})},e.name))]}),k&&void 0!==O&&(0,r.jsxs)(u.b,{withIcon:!0,variant:"warning",title:(0,r.jsxs)(r.Fragment,{children:["It is recommended to use ",(0,r.jsx)("code",{className:"text-xs",children:O.alternative})," ","instead"]}),children:[(0,r.jsxs)("p",{children:["Postgres recommends against using the data type ",(0,r.jsx)("code",{className:"text-xs",children:b})," ","unless you have a very specific use case."]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,r.jsx)(h.z,{asChild:!0,type:"default",icon:(0,r.jsx)(j.Z,{}),children:(0,r.jsx)(o(),{href:O.reference,target:"_blank",rel:"noreferrer",children:"Read more"})}),(0,r.jsxs)(h.z,{type:"primary",onClick:()=>A(O.alternative),children:["Use ",O.alternative]})]})]})]}):(0,r.jsxs)(i.fC,{delayDuration:0,children:[(0,r.jsx)(i.xz,{children:(0,r.jsx)(c.Z,{readOnly:!0,disabled:!0,label:z?"Type":"",layout:z?"horizontal":void 0,className:"md:gap-x-0",size:"small",icon:q(null!==(n=null===(t=y.N0.find(e=>e.name===b))||void 0===t?void 0:t.type)&&void 0!==n?n:""),value:b,descriptionText:z?"Custom non-native psql data types currently cannot be changed to a different data type via Supabase Studio":""})}),!z&&(0,r.jsx)(i.h_,{children:(0,r.jsxs)(i.VY,{side:"bottom",children:[(0,r.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,r.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background w-[240px]",children:(0,r.jsx)("span",{className:"text-xs text-foreground",children:"Custom non-native psql data types currently cannot be changed to a different data type via Supabase Studio"})})]})})]})}},55274:function(e,t,n){n.d(t,{BB:function(){return c},DL:function(){return p},Ks:function(){return d},N0:function(){return v},VP:function(){return x},XO:function(){return h},YF:function(){return o},ji:function(){return l},lb:function(){return u},nA:function(){return m},vH:function(){return f}});var r=n(829),i=n.n(r),a=n(22487),s=n.n(a);let l=["int2","int4","int8","float4","float8","numeric","double precision"],o=["json","jsonb"],c=["text","varchar"],d=["timestamp","timestamptz"],u=["date"],h=["time","timetz"],m=s()(d,u,h),f=["uuid","bool","vector"],p=i()(s()(l,o,c,m,f)),x={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},v=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"}]},62029:function(e,t,n){var r=n(52322),i=n(24990),a=n(17172),s=n(32079);t.Z=e=>{let{title:t="",size:n="medium",children:l,ctaButtonLabel:o="",infoButtonLabel:c="",infoButtonUrl:d="",onClickCta:u=()=>{},loading:h=!1,disabled:m=!1,disabledMessage:f=""}=e,p=o&&u||d&&c;return(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsxs)("div",{className:"".concat("medium"===n?"w-80":"w-[400px]"," space-y-4"),children:[(0,r.jsx)("h5",{className:"text-foreground",children:t}),(0,r.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:l}),p&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&u&&(0,r.jsxs)(i.fC,{delayDuration:0,children:[(0,r.jsx)(i.xz,{asChild:!0,children:(0,r.jsx)(s.z,{type:"primary",onClick:u,loading:h,disabled:h||m,children:o})}),m&&f.length>0&&(0,r.jsx)(i.h_,{children:(0,r.jsxs)(i.VY,{side:"bottom",children:[(0,r.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,r.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,r.jsx)("span",{className:"text-xs text-foreground",children:f})})]})})]}),d&&c?(0,r.jsx)(s.z,{type:"default",icon:(0,r.jsx)(a.Z,{strokeWidth:1.5}),children:(0,r.jsx)("a",{target:"_blank",rel:"noreferrer",href:d,children:c})}):null]})]})})})})}},4787:function(e,t,n){n.d(t,{B4:function(){return o},S0:function(){return s},hj:function(){return a}});var r=n(52322),i=n(2784);let a=e=>{let{children:t,id:n,header:i,disabled:a,className:s}=e;return(0,r.jsxs)("div",{id:n,className:["grid grid-cols-12 gap-6 px-8 py-8","".concat(a?" opacity-30":" opacity-100"),"".concat(s)].join(" "),children:[i,t]})},s=e=>{let{children:t,className:n="",description:i}=e;return void 0!==i?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(n),children:[(0,r.jsx)("label",{className:"text-foreground text-sm",children:t}),i]}):(0,r.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(n),children:t})},l=()=>(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,r.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,r.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,r.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),o=e=>{let{children:t,loading:n=!0,fullWidth:a,className:s}=e;return(0,r.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(a&&"!col-span-12","\n        ").concat(s,"\n      "),children:n?i.Children.map(t,()=>(0,r.jsx)(l,{})):t})}},61531:function(e,t,n){var r=n(52322),i=n(99064),a=n(25097),s=n(17172),l=n(39097),o=n.n(l),c=n(2784),d=n(32079);t.Z=e=>{let{icon:t,title:n,description:l,url:u,urlLabel:h="Read more",defaultVisibility:m=!1,hideCollapse:f=!1,button:p,className:x="",block:v=!1}=e,[g,j]=(0,c.useState)(m);return(0,r.jsx)("div",{className:"".concat(v?"block w-full":"","\n      block w-full rounded border bg-surface-200 py-3 ").concat(x),children:(0,r.jsxs)("div",{className:"flex flex-col px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[t&&(0,r.jsx)("span",{className:"text-foreground-lighter",children:t}),(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsx)("h5",{className:"text-sm text-foreground",children:n})})]}),l&&!f?(0,r.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>j(!g),children:g?(0,r.jsx)(i.Z,{size:14,strokeWidth:1.5}):(0,r.jsx)(a.Z,{size:14,strokeWidth:1.5})}):null]}),(l||u||p)&&(0,r.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(g?"mt-3":""),style:{maxHeight:g?500:0},children:[(0,r.jsx)("div",{className:"text-foreground-light text-sm",children:l}),u&&(0,r.jsx)("div",{children:(0,r.jsx)(d.z,{asChild:!0,type:"default",icon:(0,r.jsx)(s.Z,{}),children:(0,r.jsx)(o(),{href:u,target:"_blank",rel:"noreferrer",children:h})})}),p&&(0,r.jsx)("div",{children:p})]})]})})}},92286:function(e,t,n){var r=n(52322),i=n(90038),a=n(76141),s=n(89404),l=n(2784),o=n(59491),c=n(27570),d=n(49650),u=n(87175),h=n(32079),m=n(95492),f=n(61786),p=n(90504),x=n(19869);t.Z=e=>{let{className:t,disabled:n=!1,size:v="tiny",showError:g=!0,selectedSchemaName:j,supportSelectAll:y=!1,excludedSchemas:b=[],onSelectSchema:w,onSelectCreateSchema:N}=e,[_,E]=(0,l.useState)(!1),S=(0,u.Xo)(o.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:T}=(0,c.d2)(),{data:z,isLoading:C,isSuccess:k,isError:A,error:R,refetch:Z}=(0,d.Q)({projectRef:null==T?void 0:T.ref,connectionString:null==T?void 0:T.connectionString}),O=(z||[]).filter(e=>!b.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,r.jsxs)("div",{className:t,children:[C&&(0,r.jsx)(h.z,{type:"default",className:"justify-start",block:!0,size:v,loading:!0,children:"Loading schemas..."}),g&&A&&(0,r.jsxs)(m.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,r.jsx)(m.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,r.jsxs)(m.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==R?void 0:R.message]}),(0,r.jsx)(h.z,{type:"default",size:"tiny",onClick:()=>Z(),children:"Reload schemas"})]}),k&&(0,r.jsxs)(f.J2,{open:_,onOpenChange:E,modal:!1,children:[(0,r.jsx)(f.xo,{asChild:!0,children:(0,r.jsx)(h.z,{size:v,disabled:n,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,r.jsx)(i.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:(0,r.jsxs)("div",{className:"w-full flex gap-1",children:[(0,r.jsx)("p",{className:"text-foreground-lighter",children:"schema:"}),(0,r.jsx)("p",{className:"text-foreground",children:"*"===j?"All schemas":j})]})})}),(0,r.jsx)(f.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,r.jsxs)(p.mY,{children:[(0,r.jsx)(p.sZ,{placeholder:"Find schema..."}),(0,r.jsxs)(p.e8,{children:[(0,r.jsx)(p.rb,{children:"No schemas found"}),(0,r.jsx)(p.fu,{children:(0,r.jsxs)(x.x,{className:(O||[]).length>7?"h-[210px]":"",children:[y&&(0,r.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),E(!1)},onClick:()=>{w("*"),E(!1)},children:[(0,r.jsx)("span",{children:"All schemas"}),"*"===j&&(0,r.jsx)(a.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==O?void 0:O.map(e=>(0,r.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),E(!1)},onClick:()=>{w(e.name),E(!1)},children:[(0,r.jsx)("span",{children:e.name}),j===e.name&&(0,r.jsx)(a.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.zz,{}),(0,r.jsx)(p.fu,{children:(0,r.jsxs)(p.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),E(!1)},onClick:()=>{N(),E(!1)},children:[(0,r.jsx)(s.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},48699:function(e,t,n){var r=n(52322),i=n(6277);t.Z=e=>{let{max:t=100,value:n=0,barClass:a="bg-foreground",bgClass:s="",type:l="vertical",borderClass:o="",labelBottom:c="",labelBottomClass:d="tabular-nums",labelTop:u="",labelTopClass:h=""}=e;if("horizontal"===l){let e=Number(n/t*100),l=c||u;return(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[l&&(0,r.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,r.jsx)("p",{className:(0,i.default)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",d),children:c}),(0,r.jsx)("p",{className:(0,i.default)("text-foreground-light text-sm",h),children:u})]}),(0,r.jsx)("div",{className:"relative rounded h-1 overflow-hidden w-full border p-0 ".concat(s||"bg-surface-400"," ").concat(o||"border-none"),children:(0,r.jsx)("div",{className:"absolute rounded inset-x-0 bottom-0 h-1 ".concat(a," transition-all"),style:{width:"".concat(e,"%")}})})]})}{let e=Number(n/t*35);return e<2&&(e=2),(0,r.jsx)("div",{className:"relative rounded w-5 overflow-hidden border p-1 ".concat(s||"bg-gray-400"," ").concat(o||"border-none"),style:{height:35},children:(0,r.jsx)("div",{className:"absolute inset-x-0 bottom-0 w-5 ".concat(a),style:{height:e}})})}}},60028:function(e,t,n){n.d(t,{z:function(){return l}});var r=n(36492),i=n(31696),a=n(74026);async function s(e,t){let{projectRef:n,connectionString:r}=e;if(!n)throw Error("projectRef is required");let a=new Headers;r&&a.set("x-connection-encrypted",r);let{data:s,error:l}=await (0,i.U2)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":r},path:{ref:n}},headers:a,signal:t});return l&&(0,i.S3)(l),s}let l=function(e){let{projectRef:t,connectionString:n}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(a.z.list(t),e=>{let{signal:r}=e;return s({projectRef:t,connectionString:n},r)},{enabled:i&&void 0!==t,...l})}},26764:function(e,t,n){n.d(t,{u:function(){return c}});var r=n(85945),i=n(48228),a=n(56958),s=n(31696),l=n(74026);async function o(e){let{projectRef:t,connectionString:n,id:r,tables:i,publish_insert:a,publish_update:l,publish_delete:o,publish_truncate:c}=e,d=new Headers;n&&d.set("x-connection-encrypted",n);let u={id:r};void 0!==i&&(u.tables=i),void 0!==a&&(u.publish_insert=a),void 0!==l&&(u.publish_update=l),void 0!==o&&(u.publish_delete=o),void 0!==c&&(u.publish_truncate=c);let{data:h,error:m}=await (0,s.r$)("/platform/pg-meta/{ref}/publications",{params:{header:{"x-connection-encrypted":n},path:{ref:t},query:{id:r}},body:u,headers:d});return m&&(0,s.S3)(m),h}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.NL)();return(0,i.D)(e=>o(e),{async onSuccess(t,n,r){let{projectRef:i}=n;await s.invalidateQueries(l.z.list(i)),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?a.Am.error("Failed to update database publication: ".concat(e.message)):t(e,n,r)},...n})}},74026:function(e,t,n){n.d(t,{z:function(){return r}});let r={list:e=>["projects",e,"database-publications"]}},37603:function(e,t,n){var r,i;n.d(t,{l:function(){return r}}),(i=r||(r={})).TABLE="r",i.VIEW="v",i.MATERIALIZED_VIEW="m",i.FOREIGN_TABLE="f",i.PARTITIONED_TABLE="p"},16623:function(e,t,n){n.d(t,{C:function(){return r}});let r={list:(e,t)=>["projects",e,"entity-types",...t?[t]:[]]}},4573:function(e,t,n){n.d(t,{k:function(){return l}});var r=n(36492),i=n(31696),a=n(60942);async function s(e,t){let{projectRef:n,connectionString:r}=e;if(!n)throw Error("projectRef is required");let a=new Headers;r&&a.set("x-connection-encrypted",r);let{data:s,error:l}=await (0,i.U2)("/platform/pg-meta/{ref}/types",{params:{header:{"x-connection-encrypted":r},path:{ref:n}},headers:Object.fromEntries(a),signal:t});return l&&(0,i.S3)(l),s}let l=function(e){let{projectRef:t,connectionString:n}=e,{enabled:i=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(a.P.list(t),e=>{let{signal:r}=e;return s({projectRef:t,connectionString:n},r)},{enabled:i&&void 0!==t,staleTime:0,...l})}},60942:function(e,t,n){n.d(t,{P:function(){return r}});let r={list:e=>["projects",e,"enumerated-types"]}},87166:function(e,t,n){n.d(t,{T:function(){return r}});let r={list:e=>["projects",e,"foreignTables"],listBySchema:(e,t)=>[...r.list(e),t],foreignTable:(e,t)=>["projects",e,"foreignTables",t]}},1698:function(e,t,n){n.d(t,{B:function(){return r}});let r={list:e=>["projects",e,"materializedViews"],listBySchema:(e,t)=>[...r.list(e),t],materializedView:(e,t)=>["projects",e,"materializedViews",t]}},29573:function(e,t,n){n.d(t,{W:function(){return r}});let r={list:(e,t,n)=>["projects",e,"tables",t,n].filter(Boolean),table:(e,t)=>["projects",e,"tables",t]}},6564:function(e,t,n){n.d(t,{hC:function(){return s},yp:function(){return l}});var r=n(36492);n(2784);var i=n(31696),a=n(29573);async function s(e,t){let{id:n,projectRef:r,connectionString:a}=e;if(!r)throw Error("projectRef is required");if(!n)throw Error("id is required");let s=new Headers;a&&s.set("x-connection-encrypted",a);let{data:l,error:o}=await (0,i.U2)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":a},path:{ref:r},query:{id:n.toString()}},headers:s,signal:t});return o&&(0,i.S3)(o),l}let l=function(e){let{projectRef:t,connectionString:n,id:i}=e,{enabled:l=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(a.W.table(t,i),e=>{let{signal:r}=e;return s({projectRef:t,connectionString:n,id:i},r)},{enabled:l&&void 0!==t&&void 0!==i,staleTime:0,...o})}},57924:function(e,t,n){n.d(t,{AF:function(){return h},Bj:function(){return u},Lk:function(){return d},o_:function(){return m}});var r=n(36492),i=n(85945),a=n(829),s=n.n(a),l=n(2784),o=n(31696),c=n(29573);async function d(e,t){let{projectRef:n,connectionString:r,schema:i,includeColumns:a=!1,sortByProperty:l="name"}=e;if(!n)throw Error("projectRef is required");let c=new Headers;r&&c.set("x-connection-encrypted",r);let d={include_columns:"".concat(a)};i&&(d.included_schemas=i);let{data:u,error:h}=await (0,o.U2)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":r},path:{ref:n},query:d},headers:c,signal:t});return(!Array.isArray(u)&&h&&(0,o.S3)(h),Array.isArray(u)&&l)?s()(u,e=>e[l]):u}let u=function(e){let{projectRef:t,connectionString:n,schema:i,includeColumns:a}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(c.W.list(t,i,a),e=>{let{signal:r}=e;return d({projectRef:t,connectionString:n,schema:i,includeColumns:a},r)},{enabled:s&&void 0!==t,staleTime:0,...l})};function h(e){let{projectRef:t,connectionString:n}=e,r=(0,i.NL)();return(0,l.useCallback)((e,i)=>r.fetchQuery({queryKey:c.W.list(t,e,i),queryFn:r=>{let{signal:a}=r;return d({projectRef:t,connectionString:n,schema:e,includeColumns:i},a)}}),[n,t,r])}function m(e){let{projectRef:t,connectionString:n}=e,r=(0,i.NL)();return(0,l.useCallback)((e,i)=>r.prefetchQuery({queryKey:c.W.list(t,e,i),queryFn:r=>{let{signal:a}=r;return d({projectRef:t,connectionString:n,schema:e,includeColumns:i},a)}}),[n,t,r])}},56706:function(e,t,n){n.d(t,{N:function(){return r}});let r={list:e=>["projects",e,"views"],listBySchema:(e,t)=>[...r.list(e),t],view:(e,t)=>[...r.list(e),t]}},47759:function(e,t,n){n.d(t,{E:function(){return l},R:function(){return s}});var r=n(36492),i=n(31696),a=n(56706);async function s(e,t){let{projectRef:n,connectionString:r,schema:a}=e;if(!n)throw Error("projectRef is required");let s=new Headers;r&&s.set("x-connection-encrypted",r);let{data:l,error:o}=await (0,i.U2)("/platform/pg-meta/{ref}/views",{params:{header:{"x-connection-encrypted":r},path:{ref:n},query:{included_schemas:a||""}},headers:s,signal:t});return o&&(0,i.S3)(o),l}let l=function(e){let{projectRef:t,connectionString:n,schema:i}=e,{enabled:l=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.a)(i?a.N.listBySchema(t,i):a.N.list(t),e=>{let{signal:r}=e;return s({projectRef:t,connectionString:n,schema:i},r)},{enabled:l&&void 0!==t,staleTime:0,...o})}},65802:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(85945),i=n(27570),a=n(18592);let s=e=>{let{id:t}=e;return"\n    select\n      c.oid::int8 as \"id\",\n      nc.nspname as \"schema\",\n      c.relname as \"name\",\n      c.relkind as \"type\",\n      obj_description(c.oid) as \"comment\",\n      count(*) over() as \"count\"\n    from\n      pg_namespace nc\n      join pg_class c on nc.oid = c.relnamespace\n    where\n      c.relkind in ('r', 'v', 'm', 'f', 'p')\n      and not pg_is_other_temp_schema(nc.oid)\n      and (\n        pg_has_role(c.relowner, 'USAGE')\n        or has_table_privilege(\n          c.oid,\n          'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n        )\n        or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n      )\n      and c.oid = '".concat(t,"'\n    limit 1;\n  ")},l=function(e){let{projectRef:t,connectionString:n,id:r,...i}=e,{enabled:l,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.cp)({projectRef:t,connectionString:n,sql:s({id:r,...i}),queryKey:["entity-type",r]},{select(e){var t;return null!==(t=e.result[0])&&void 0!==t?t:null},enabled:l&&void 0!==t&&void 0!==r&&!isNaN(r),...o})};var o=n(16623),c=n(2784),d=function(e,t){let n=(0,r.NL)(),{project:a}=(0,i.d2)(),s=(0,c.useMemo)(()=>{var t,r,i,s;return null===(s=n.getQueryCache().find(o.C.list(null==a?void 0:a.ref)))||void 0===s?void 0:null===(i=s.state.data)||void 0===i?void 0:null===(r=i.pages)||void 0===r?void 0:null===(t=r.flatMap(e=>e.data.entities))||void 0===t?void 0:t.find(t=>t.id===e)},[null==a?void 0:a.ref,e]),{data:d}=l({projectRef:null==a?void 0:a.ref,connectionString:null==a?void 0:a.connectionString,id:e},{enabled:!s,onSettled(n){n||void 0===e||null==t||t(e)}});return null!=s?s:d}},90130:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(52879),i=n(2784),a=n(99959),s=n(99248);let l=e=>(0,r.v1)("schema",r.Oi.withDefault(e)),o=()=>{let{ref:e}=(0,a.UO)(),t=e&&e.length>0&&window.localStorage.getItem(s.dA.LAST_SELECTED_SCHEMA(e))||"public",[n,r]=l((0,i.useMemo)(()=>t,[e]));return(0,i.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(s.dA.LAST_SELECTED_SCHEMA(e),n)},[n,e]),{selectedSchema:n,setSelectedSchema:r}}},42991:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(27570),i=n(37603),a=n(36492),s=n(88354),l=n(99248),o=n(87166);async function c(e,t){let{id:n,projectRef:r,connectionString:i}=e;if(!r)throw Error("projectRef is required");if(!n)throw Error("id is required");let a=new Headers;i&&a.set("x-connection-encrypted",i);let o=await (0,s.U2)("".concat(l.T5,"/pg-meta/").concat(r,"/foreign-tables?id=").concat(n),{headers:Object.fromEntries(a),signal:t});if("error"in o)throw o.error;return o}let d=function(e){let{projectRef:t,connectionString:n,id:r}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(o.T.foreignTable(t,r),e=>{let{signal:i}=e;return c({projectRef:t,connectionString:n,id:r},i)},{enabled:i&&void 0!==t&&void 0!==r,staleTime:0,...s})};var u=n(1698);async function h(e,t){let{id:n,projectRef:r,connectionString:i}=e;if(!r)throw Error("projectRef is required");if(!n)throw Error("id is required");let a=new Headers;i&&a.set("x-connection-encrypted",i);let o=await (0,s.U2)("".concat(l.T5,"/pg-meta/").concat(r,"/materialized-views?id=").concat(n),{headers:Object.fromEntries(a),signal:t});if("error"in o)throw o.error;return o}let m=function(e){let{projectRef:t,connectionString:n,id:r}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(u.B.materializedView(t,r),e=>{let{signal:i}=e;return h({projectRef:t,connectionString:n,id:r},i)},{enabled:i&&void 0!==t&&void 0!==r,staleTime:0,...s})};var f=n(6564),p=n(31696),x=n(56706);async function v(e,t){let{id:n,projectRef:r,connectionString:i}=e;if(!r)throw Error("projectRef is required");if(!n)throw Error("id is required");let a=new Headers;i&&a.set("x-connection-encrypted",i);let{data:s,error:l}=await (0,p.U2)("/platform/pg-meta/{ref}/views",{params:{header:{"x-connection-encrypted":i},path:{ref:r},query:{id:"".concat(n)}},headers:a,signal:t});return l&&(0,p.S3)(l),s}let g=function(e){let{projectRef:t,connectionString:n,id:r}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.a)(x.N.view(t,r),e=>{let{signal:i}=e;return v({projectRef:t,connectionString:n,id:r},i)},{enabled:i&&void 0!==t&&void 0!==r,staleTime:0,...s})};var j=n(65802),y=function(e){let{project:t}=(0,r.d2)(),n=(0,j.Z)(e),a=(0,f.yp)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===i.l.TABLE}),s=(0,f.yp)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===i.l.PARTITIONED_TABLE}),l=g({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===i.l.VIEW}),o=m({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===i.l.MATERIALIZED_VIEW}),c=d({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,id:null==n?void 0:n.id},{enabled:(null==n?void 0:n.type)===i.l.FOREIGN_TABLE});switch(null==n?void 0:n.type){case i.l.TABLE:return a;case i.l.PARTITIONED_TABLE:return s;case i.l.VIEW:return l;case i.l.MATERIALIZED_VIEW:return o;case i.l.FOREIGN_TABLE:return c;default:return a}}},11354:function(e,t,n){n.d(t,{F:function(){return r},U:function(){return i}});let r=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public"],i=r.filter(e=>"extensions"!==e)},11992:function(e,t,n){var r=n(52322),i=n(69557);n(2784);var a=n(46318);let s=e=>{let{open:t,children:n,className:a,...s}=e;return(0,r.jsx)(i.fC,{asChild:s.asChild,defaultOpen:s.defaultOpen,open:t,onOpenChange:s.onOpenChange,disabled:s.disabled,className:a,children:n})};s.Trigger=function(e){let{children:t,asChild:n}=e;return(0,r.jsx)(i.xz,{asChild:n,children:t})},s.Content=function(e){let{asChild:t,children:n,className:s}=e,l=(0,a.Z)("collapsible");return(0,r.jsx)(i.VY,{asChild:t,className:[l.content,s].join(" "),children:n})},t.ZP=s},22854:function(e,t,n){var r=n(52322),i=n(6277),a=n(2784),s=n(25001),l=n(46318),o=n(70780);t.Z=function(e){var t;let{disabled:n,id:c="",name:d="",layout:u="flex",error:h,descriptionText:m,label:f,afterLabel:p,beforeLabel:x,labelOptional:v,onChange:g,onBlur:j,defaultChecked:y,checked:b,className:w,align:N="left",size:_="medium",validation:E,labelLayout:S,...T}=e,z=(0,l.Z)("toggle"),{formContextOnChange:C,values:k,errors:A,handleBlur:R,touched:Z,fieldLevelValidation:O}=(0,o.G)();k&&!b&&(b=k[c||d]);let[q,L]=(0,a.useState)(null!==(t=y||b)&&void 0!==t&&t),D=null!=b?b:q;(0,a.useEffect)(()=>{L(D)},[]),h||(A&&!h&&(h=A[c||d]),h=Z&&Z[c||d]?h:void 0);let W=[z.base,z.handle_container[_]];D&&W.push(z.active);let I=[z.handle.base,z.handle[_]];return D&&I.push(z.handle_active[_]),(0,r.jsx)(s.l,{className:w,label:f,afterLabel:p,beforeLabel:x,labelOptional:v,layout:u,id:c,error:h,align:N,descriptionText:m,size:_,labelLayout:S,nonBoxInput:!0,children:(0,r.jsx)("button",{type:"button",id:c,name:d,className:(0,i.default)(...W,n&&"opacity-50 cursor-default"),onClick:function(){g&&g(!D),L(!q);let e={};e.target={type:"checkbox",name:d,id:c,value:!D,checked:!D},C&&C(e),E&&O(c,E(!q))},disabled:n,onBlur:function(e){setTimeout(()=>{R&&R(e)},100),j&&j(e)},...T,children:(0,r.jsx)("span",{"aria-hidden":"true",className:I.join(" ")})})})}}}]);