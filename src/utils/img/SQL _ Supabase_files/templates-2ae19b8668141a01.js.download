(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5969],{89754:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql/templates",function(){return r(90715)}])},7339:function(e,t,r){"use strict";var n=r(52322),s=r(43276),l=r(2784);t.Z=e=>{let{title:t,description:r,sql:o,onClick:i}=e,[c,a]=(0,l.useState)(!1);return(0,n.jsx)(s.Z,{title:t,loading:c,onClick:()=>void(a(!0),i(o,t)),description:r,className:"xl:h-48 p-6"})}},43276:function(e,t,r){"use strict";var n=r(52322),s=r(6838),l=r(91179),o=r(39097),i=r.n(o);r(2784);var c=r(54383);t.Z=e=>{let t,{title:r,description:o,children:a,footer:d,url:u="",linkHref:f="",imgUrl:p,imgAlt:h,icon:x,className:v,loading:g=!1,fixedHeight:m=!0,hideChevron:j=!1,titleClass:b="",...N}=e,w=u||f||N.onClick,y={};N.onClick?(t="button",y=N):f?(t=i(),y={href:f,...N}):u?(t="a",y={href:u,...N}):(t="div",y=N);let k=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];w&&(k=[...k,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),m&&(k=[...k,"h-32"]);let _=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"mr-4 flex flex-col",children:t})},q=(0,n.jsxs)(n.Fragment,{children:[p&&(0,n.jsx)(_,{children:(0,n.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(p),alt:"".concat(h),width:"26"})}),x&&(0,n.jsx)(_,{children:x}),(0,n.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof r?(0,n.jsx)("h5",{className:"text-foreground pr-5 ".concat(b),children:r}):r,(a||o)&&(0,n.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:o}),(0,n.jsx)("div",{className:"w-full",children:a&&a})]}),d&&(0,n.jsx)("div",{className:"w-full !mt-auto",children:d})]}),w&&(0,n.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:g?(0,n.jsx)(s.Z,{className:"animate-spin"}):j?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(l.Z,{})})]});return(0,n.jsx)(t,{...y,className:(0,c.cn)(k,v),children:q})}},38264:function(e,t,r){"use strict";var n=r(52322),s=r(6277);t.Z=e=>{let{options:t,width:r=50,activeOption:l,onClickOption:o,borderOverride:i="border-stronger"}=e,c=e=>"absolute top-0 z-1 text-xs inline-flex h-full items-center justify-center font-medium\n    ".concat(e?"hover:text-foreground-light hover:text-foreground":"hover:text-foreground"," hover:text-foreground focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue\n    transition ease-in-out duration-150");return(0,n.jsxs)("div",{className:"relative border ".concat(i," rounded-md h-7"),style:{padding:1,width:(r+1)*2},children:[(0,n.jsx)("span",{style:{width:r,translate:l===t[1]?"0px":"".concat(r-2,"px")},"aria-hidden":"true",className:(0,s.default)("z-0 inline-block rounded h-full bg-overlay-hover shadow transform","transition-all ease-in-out border border-strong")}),t.map((e,t)=>(0,n.jsx)("span",{style:{width:r+1},className:"\n              ".concat(l===e?"text-foreground":"text-foreground-light","\n              ").concat(0===t?"right-0":"left-0","\n              ").concat(c(l===e),"\n              cursor-pointer\n            "),onClick:()=>o(e),children:(0,n.jsx)("span",{className:(0,s.default)("capitalize hover:text-foreground",l===e?"text-foreground":"text-foreground-light"),children:e})},"toggle_".concat(t)))]})}},90715:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(52322),s=r(59491),l=r(96795),o=r.n(l),i=r(5632),c=r(56958),a=r(99959),d=r(36998),u=r(27570),f=r(87175),p=r(75939),h=r(82955),x=r(74067),v=r(28020),g=r(2670),m=r(24413),j=r(30789),b=r(7339),N=()=>{let e=(0,i.useRouter)(),{ref:t}=(0,a.UO)(),{profile:r}=(0,x.Un)(),{project:l}=(0,u.d2)(),[N]=o()(d.o,{type:"template"}),w=(0,g.W2)(),y=(0,m.B0)(),k=(0,a.Mk)(),_=(0,p.P)("sqlFolderOrganization"),q=(0,f.Xo)(s.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==r?void 0:r.id},subject:{id:null==r?void 0:r.id}}),C=async(n,s)=>{if(!t)return console.error("Project ref is required");if(!l)return console.error("Project is required");if(!r)return console.error("Profile is required");if(!q)return(0,c.Am)("Your queries will not be saved as you do not have sufficient permissions");try{if(_){let o=(0,j.wI)({id:(0,h.k$)(),name:s,sql:n,owner_id:null==r?void 0:r.id,project_id:null==l?void 0:l.id});y.addSnippet({projectRef:t,snippet:o}),y.addNeedsSaving(o.id),e.push("/project/".concat(t,"/sql/").concat(o.id))}else{let t=(0,j.UA)({id:(0,h.k$)(),name:s,sql:n,owner_id:r.id,project_id:l.id});w.addSnippet(t,l.ref),w.addNeedsSaving(t.id),e.push("/project/".concat(l.ref,"/sql/").concat(t.id))}}catch(e){c.Am.error("Failed to create new query: ".concat(e.message))}};return(0,n.jsx)("div",{className:"block h-full space-y-8 overflow-y-auto p-6",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h1",{className:"text-foreground mb-3 text-xl",children:"Scripts"}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Quick scripts to run on your database."}),(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:["Click on any script to fill the query box, modify the script, then click",(0,n.jsx)("span",{className:"text-code",children:"Run"}),"."]})]}),(0,n.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 ",children:N.map(t=>(0,n.jsx)(b.Z,{title:t.title,description:t.description,sql:t.sql,onClick:(r,n)=>{C(r,n),v.Z.sendEvent({category:"scripts",action:"script_clicked",label:t.title},k,e)}},t.title))})]})})},w=r(1728);let y=()=>(0,n.jsx)(N,{});y.getLayout=e=>(0,n.jsx)(w.Z,{title:"SQL",children:e});var k=y},9015:function(e,t,r){"use strict";var n=r(52322),s=r(64266),l=r(2784),o=r(46318);let i=e=>{var t,r,i;let{defaultActiveId:c,activeId:a,type:d="pills",size:u="tiny",block:f,onChange:p,onClick:h,scrollable:x,wrappable:v,addOnBefore:g,addOnAfter:m,listClassNames:j,baseClassNames:b,refs:N,children:w}=e,y=l.Children.toArray(w),[k,_]=(0,l.useState)(null!==(i=null!=a?a:c)&&void 0!==i?i:null==y?void 0:null===(r=y[0])||void 0===r?void 0:null===(t=r.props)||void 0===t?void 0:t.id);(0,l.useMemo)(()=>{a&&a!==k&&_(a)},[a]);let q=(0,o.Z)("tabs");function C(e){null==h||h(e),e!==k&&(null==p||p(e),_(e))}let Z=[q[d].list];return x&&Z.push(q.scrollable),v&&Z.push(q.wrappable),j&&Z.push(j),(0,n.jsxs)(s.fC,{value:k,className:[q.base,b].join(" "),ref:null==N?void 0:N.base,children:[(0,n.jsxs)(s.aV,{className:Z.join(" "),ref:null==N?void 0:N.list,children:[g,y.map(e=>{let t=k===e.props.id,r=[q[d].base,q.size[u]];return t?r.push(q[d].active):r.push(q[d].inactive),f&&r.push(q.block),(0,n.jsxs)(s.xz,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),C(e.props.id))},onClick:()=>C(e.props.id),value:e.props.id,className:r.join(" "),children:[e.props.icon,(0,n.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),m]}),y]})};i.Panel=e=>{let{children:t,id:r,className:l}=e,i=(0,o.Z)("tabs");return(0,n.jsx)(s.VY,{value:r,className:[i.content,l].join(" "),children:t})},t.Z=i},55283:function(e,t,r){"use strict";r.d(t,{Fw:function(){return o},wy:function(){return l},zF:function(){return s}});var n=r(69557);let s=n.fC,l=n.wy,o=n.Fw}},function(e){e.O(0,[8421,8183,6334,5746,1357,2474,5590,6128,6875,7280,2569,9979,6012,125,5834,8507,9428,5029,4689,5632,8020,6998,1728,2888,9774,179],function(){return e(e.s=89754)}),_N_E=e.O()}]);