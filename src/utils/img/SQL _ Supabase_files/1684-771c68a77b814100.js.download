(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1684],{93746:function(e,t,n){var r=n(67878),o=n(15125);e.exports=function(e){return o(e)&&r(e)}},7774:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(46145).Z)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]])},65644:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(46145).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},926:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},56666:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(32802);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},32802:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(86522);function o(e){var t=function(e,t){if("object"!=(0,r.Z)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.Z)(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.Z)(t)?t:t+""}},86522:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return r}})},59147:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(926);function o(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},69557:function(e,t,n){"use strict";n.d(t,{Fw:function(){return w},VY:function(){return T},fC:function(){return R},p_:function(){return m},wy:function(){return _},xz:function(){return x}});var r=n(7896),o=n(2784),a=n(17998),i=n(92211),l=n(87695),s=n(61644),c=n(62656),u=n(72714),d=n(79616),f=n(23372);let p="Collapsible",[g,m]=(0,i.b)(p),[y,h]=g(p),v=(0,o.forwardRef)((e,t)=>{let{__scopeCollapsible:n,open:a,defaultOpen:i,disabled:s,onOpenChange:c,...d}=e,[p=!1,g]=(0,l.T)({prop:a,defaultProp:i,onChange:c});return(0,o.createElement)(y,{scope:n,disabled:s,contentId:(0,f.M)(),open:p,onOpenToggle:(0,o.useCallback)(()=>g(e=>!e),[g])},(0,o.createElement)(u.WV.div,(0,r.Z)({"data-state":C(p),"data-disabled":s?"":void 0},d,{ref:t})))}),_=(0,o.forwardRef)((e,t)=>{let{__scopeCollapsible:n,...i}=e,l=h("CollapsibleTrigger",n);return(0,o.createElement)(u.WV.button,(0,r.Z)({type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":C(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled},i,{ref:t,onClick:(0,a.M)(e.onClick,l.onOpenToggle)}))}),b="CollapsibleContent",w=(0,o.forwardRef)((e,t)=>{let{forceMount:n,...a}=e,i=h(b,e.__scopeCollapsible);return(0,o.createElement)(d.z,{present:n||i.open},({present:e})=>(0,o.createElement)(E,(0,r.Z)({},a,{ref:t,present:e})))}),E=(0,o.forwardRef)((e,t)=>{let{__scopeCollapsible:n,present:a,children:i,...l}=e,d=h(b,n),[f,p]=(0,o.useState)(a),g=(0,o.useRef)(null),m=(0,c.e)(t,g),y=(0,o.useRef)(0),v=y.current,_=(0,o.useRef)(0),w=_.current,E=d.open||f,R=(0,o.useRef)(E),x=(0,o.useRef)();return(0,o.useEffect)(()=>{let e=requestAnimationFrame(()=>R.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.b)(()=>{let e=g.current;if(e){x.current=x.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();y.current=t.height,_.current=t.width,R.current||(e.style.transitionDuration=x.current.transitionDuration,e.style.animationName=x.current.animationName),p(a)}},[d.open,a]),(0,o.createElement)(u.WV.div,(0,r.Z)({"data-state":C(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!E},l,{ref:m,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style}}),E&&i)});function C(e){return e?"open":"closed"}let R=v,x=_,T=w},27533:function(e,t,n){"use strict";let r;n.d(t,{RJ:function(){return ev}});var o=n(2784),a=n(43100);let i=()=>{},l=i(),s=Object,c=e=>e===l,u=e=>"function"==typeof e,d=(e,t)=>({...e,...t}),f=e=>u(e.then),p=new WeakMap,g=0,m=e=>{let t,n;let r=typeof e,o=e&&e.constructor,a=o==Date;if(s(e)!==e||a||o==RegExp)t=a?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=p.get(e))return t;if(t=++g+"~",p.set(e,t),o==Array){for(n=0,t="@";n<e.length;n++)t+=m(e[n])+",";p.set(e,t)}if(o==s){t="#";let r=s.keys(e).sort();for(;!c(n=r.pop());)c(e[n])||(t+=n+":"+m(e[n])+",");p.set(e,t)}}return t},y=new WeakMap,h={},v={},_="undefined",b=typeof window!=_,w=typeof document!=_,E=()=>b&&typeof window.requestAnimationFrame!=_,C=(e,t)=>{let n=y.get(e);return[()=>!c(t)&&e.get(t)||h,r=>{if(!c(t)){let o=e.get(t);t in v||(v[t]=o),n[5](t,d(o,r),o||h)}},n[6],()=>!c(t)&&t in v?v[t]:!c(t)&&e.get(t)||h]},R=!0,[x,T]=b&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[i,i],S={initFocus:e=>(w&&document.addEventListener("visibilitychange",e),x("focus",e),()=>{w&&document.removeEventListener("visibilitychange",e),T("focus",e)}),initReconnect:e=>{let t=()=>{R=!0,e()},n=()=>{R=!1};return x("online",t),x("offline",n),()=>{T("online",t),T("offline",n)}}},O=!o.useId,k=!b||"Deno"in window,D=e=>E()?window.requestAnimationFrame(e):setTimeout(e,1),N=k?o.useEffect:o.useLayoutEffect,P="undefined"!=typeof navigator&&navigator.connection,V=!k&&P&&(["slow-2g","2g"].includes(P.effectiveType)||P.saveData),A=e=>{if(u(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?m(e):"",t]},I=0,M=()=>++I;var L={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function j(...e){let[t,n,r,o]=e,a=d({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{}),i=a.populateCache,s=a.rollbackOnError,p=a.optimisticData,g=!1!==a.revalidate,m=e=>"function"==typeof s?s(e):!1!==s,h=a.throwOnError;if(u(n)){let e=[];for(let r of t.keys())!/^\$(inf|sub)\$/.test(r)&&n(t.get(r)._k)&&e.push(r);return Promise.all(e.map(v))}return v(n);async function v(n){let o;let[a]=A(n);if(!a)return;let[s,d]=C(t,a),[v,_,b,w]=y.get(t),E=v[a],R=()=>g&&(delete b[a],delete w[a],E&&E[0])?E[0](2).then(()=>s().data):s().data;if(e.length<3)return R();let x=r,T=M();_[a]=[T,0];let S=!c(p),O=s(),k=O.data,D=O._c,N=c(D)?k:D;if(S&&d({data:p=u(p)?p(N,k):p,_c:N}),u(x))try{x=x(N)}catch(e){o=e}if(x&&f(x)){if(x=await x.catch(e=>{o=e}),T!==_[a][0]){if(o)throw o;return x}o&&S&&m(o)&&(i=!0,d({data:x=N,_c:l}))}i&&!o&&(u(i)&&(x=i(x,N)),d({data:x,error:l,_c:l})),_[a][1]=M();let P=await R();if(d({_c:l}),o){if(h)throw o;return}return i?P:x}}let F=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},Z=(e,t)=>{if(!y.has(e)){let n=d(S,t),r={},o=j.bind(l,e),a=i,s={},c=(e,t)=>{let n=s[e]||[];return s[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},u=(t,n,r)=>{e.set(t,n);let o=s[t];if(o)for(let e of o)e(n,r)},f=()=>{if(!y.has(e)&&(y.set(e,[r,{},{},{},o,u,c]),!k)){let t=n.initFocus(setTimeout.bind(l,F.bind(l,r,0))),o=n.initReconnect(setTimeout.bind(l,F.bind(l,r,1)));a=()=>{t&&t(),o&&o(),y.delete(e)}}};return f(),[e,o,f,a]}return[e,y.get(e)[4]]},[W,U]=Z(new Map),H=d({onLoadingSlow:i,onSuccess:i,onError:i,onErrorRetry:(e,t,n,r,o)=>{let a=n.errorRetryCount,i=o.retryCount,l=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;(c(a)||!(i>a))&&setTimeout(r,l,o)},onDiscarded:i,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:V?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:V?5e3:3e3,compare:(e,t)=>m(e)==m(t),isPaused:()=>!1,cache:W,mutate:U,fallback:{}},{isOnline:()=>R,isVisible:()=>{let e=w&&document.visibilityState;return c(e)||"hidden"!==e}}),J=(e,t)=>{let n=d(e,t);if(t){let{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=d(o,i))}return n},B=(0,o.createContext)({}),q=b&&window.__SWR_DEVTOOLS_USE__,z=q?window.__SWR_DEVTOOLS_USE__:[],$=e=>u(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],K=()=>d(H,(0,o.useContext)(B)),Y=z.concat(e=>(t,n,r)=>{let o=n&&((...e)=>{let[r]=A(t),[,,,o]=y.get(W),a=o[r];return c(a)?n(...e):(delete o[r],a)});return e(t,o,r)}),X=(e,t,n)=>{let r=t[e]||(t[e]=[]);return r.push(n),()=>{let e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}};q&&(window.__SWR_DEVTOOLS_REACT__=o);let G=o.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),Q={dedupe:!0};s.defineProperty(e=>{let{value:t}=e,n=(0,o.useContext)(B),r=u(t),a=(0,o.useMemo)(()=>r?t(n):t,[r,n,t]),i=(0,o.useMemo)(()=>r?a:J(n,a),[r,n,a]),s=a&&a.provider,c=(0,o.useRef)(l);s&&!c.current&&(c.current=Z(s(i.cache||W),a));let f=c.current;return f&&(i.cache=f[0],i.mutate=f[1]),N(()=>{if(f)return f[2]&&f[2](),f[3]},[]),(0,o.createElement)(B.Provider,d(e,{value:i}))},"defaultValue",{value:H});let ee=(r=(e,t,n)=>{let{cache:r,compare:i,suspense:s,fallbackData:f,revalidateOnMount:p,revalidateIfStale:g,refreshInterval:m,refreshWhenHidden:h,refreshWhenOffline:v,keepPreviousData:_}=n,[b,w,E,R]=y.get(r),[x,T]=A(e),S=(0,o.useRef)(!1),P=(0,o.useRef)(!1),V=(0,o.useRef)(x),I=(0,o.useRef)(t),F=(0,o.useRef)(n),Z=()=>F.current,W=()=>Z().isVisible()&&Z().isOnline(),[U,H,J,B]=C(r,x),q=(0,o.useRef)({}).current,z=c(f)?n.fallback[x]:f,$=(e,t)=>{for(let n in q)if("data"===n){if(!i(e[n],t[n])&&(!c(e[n])||!i(ei,t[n])))return!1}else if(t[n]!==e[n])return!1;return!0},K=(0,o.useMemo)(()=>{let e=!!x&&!!t&&(c(p)?!Z().isPaused()&&!s&&(!!c(g)||g):p),n=t=>{let n=d(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=U(),o=B(),a=n(r),i=r===o?a:n(o),l=a;return[()=>{let e=n(U());return $(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>i]},[r,x]),Y=(0,a.useSyncExternalStore)((0,o.useCallback)(e=>J(x,(t,n)=>{$(n,t)||e()}),[r,x]),K[0],K[1]),ee=!S.current,et=b[x]&&b[x].length>0,en=Y.data,er=c(en)?z:en,eo=Y.error,ea=(0,o.useRef)(er),ei=_?c(en)?ea.current:en:er,el=(!et||!!c(eo))&&(ee&&!c(p)?p:!Z().isPaused()&&(s?!c(er)&&g:c(er)||g)),es=!!(x&&t&&ee&&el),ec=c(Y.isValidating)?es:Y.isValidating,eu=c(Y.isLoading)?es:Y.isLoading,ed=(0,o.useCallback)(async e=>{let t,r;let o=I.current;if(!x||!o||P.current||Z().isPaused())return!1;let a=!0,s=e||{},d=!E[x]||!s.dedupe,f=()=>O?!P.current&&x===V.current&&S.current:x===V.current,p={isValidating:!1,isLoading:!1},g=()=>{H(p)},m=()=>{let e=E[x];e&&e[1]===r&&delete E[x]},y={isValidating:!0};c(U().data)&&(y.isLoading=!0);try{if(d&&(H(y),n.loadingTimeout&&c(U().data)&&setTimeout(()=>{a&&f()&&Z().onLoadingSlow(x,n)},n.loadingTimeout),E[x]=[o(T),M()]),[t,r]=E[x],t=await t,d&&setTimeout(m,n.dedupingInterval),!E[x]||E[x][1]!==r)return d&&f()&&Z().onDiscarded(x),!1;p.error=l;let e=w[x];if(!c(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return g(),d&&f()&&Z().onDiscarded(x),!1;let s=U().data;p.data=i(s,t)?s:t,d&&f()&&Z().onSuccess(t,x,n)}catch(n){m();let e=Z(),{shouldRetryOnError:t}=e;!e.isPaused()&&(p.error=n,d&&f()&&(e.onError(n,x,e),(!0===t||u(t)&&t(n))&&W()&&e.onErrorRetry(n,x,e,e=>{let t=b[x];t&&t[0]&&t[0](L.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return a=!1,g(),!0},[x,r]),ef=(0,o.useCallback)((...e)=>j(r,V.current,...e),[]);if(N(()=>{I.current=t,F.current=n,c(en)||(ea.current=en)}),N(()=>{if(!x)return;let e=ed.bind(l,Q),t=0,n=X(x,b,(n,r={})=>{if(n==L.FOCUS_EVENT){let n=Date.now();Z().revalidateOnFocus&&n>t&&W()&&(t=n+Z().focusThrottleInterval,e())}else if(n==L.RECONNECT_EVENT)Z().revalidateOnReconnect&&W()&&e();else if(n==L.MUTATE_EVENT)return ed();else if(n==L.ERROR_REVALIDATE_EVENT)return ed(r)});return P.current=!1,V.current=x,S.current=!0,H({_k:T}),el&&(c(er)||k?e():D(e)),()=>{P.current=!0,n()}},[x]),N(()=>{let e;function t(){let t=u(m)?m(U().data):m;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!U().error&&(h||Z().isVisible())&&(v||Z().isOnline())?ed(Q).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[m,h,v,x]),(0,o.useDebugValue)(ei),s&&c(er)&&x){if(!O&&k)throw Error("Fallback data is required when using suspense in SSR.");I.current=t,F.current=n,P.current=!1;let e=R[x];if(c(e)||G(ef(e)),c(eo)){let e=ed(Q);c(ei)||(e.status="fulfilled",e.value=!0),G(e)}else throw eo}return{mutate:ef,get data(){return q.data=!0,ei},get error(){return q.error=!0,eo},get isValidating(){return q.isValidating=!0,ec},get isLoading(){return q.isLoading=!0,eu}}},function(...e){let t=K(),[n,o,a]=$(e),i=J(t,a),l=r,{use:s}=i,c=(s||[]).concat(Y);for(let e=c.length;e--;)l=c[e](l);return l(n,o||i.fetcher||null,i)});var et={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},en={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},er={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},eo={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},ea={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ei={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},el={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},es={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>{null!=e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id&&"type"in e&&"string"==typeof e.type&&"function"in e&&null!=e.function&&"object"==typeof e.function&&"arguments"in e.function&&"string"==typeof e.function.name&&e.function.arguments}))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},ec={[et.code]:et,[en.code]:en,[er.code]:er,[eo.code]:eo,[ea.code]:ea,[ei.code]:ei,[el.code]:el,[es.code]:es};et.name,et.code,en.name,en.code,er.name,er.code,eo.name,eo.code,ea.name,ea.code,ei.name,ei.code,el.name,el.code,es.name,es.code;var eu=[et,en,er,eo,ea,ei,el,es].map(e=>e.code),ed=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let n=e.slice(0,t);if(!eu.includes(n))throw Error(`Failed to parse stream string. Invalid code ${n}.`);let r=JSON.parse(e.slice(t+1));return ec[n].parse(r)};async function*ef(e,{isAborted:t}={}){let n=new TextDecoder,r=[],o=0;for(;;){let{value:a}=await e.read();if(a&&(r.push(a),o+=a.length,10!==a[a.length-1]))continue;if(0===r.length)break;let i=function(e,t){let n=new Uint8Array(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return e.length=0,n}(r,o);for(let e of(o=0,n.decode(i,{stream:!0}).split("\n").filter(e=>""!==e).map(ed)))yield e;if(null==t?void 0:t()){e.cancel();break}}}var ep=((e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);async function eg({reader:e,abortControllerRef:t,update:n,onFinish:r,generateId:o=ep,getCurrentDate:a=()=>new Date}){let i=a(),l={data:[]};for await(let{type:r,value:a}of ef(e,{isAborted:()=>(null==t?void 0:t.current)===null})){"text"===r&&(l.text?l.text={...l.text,content:(l.text.content||"")+a}:l.text={id:o(),role:"assistant",content:a,createdAt:i});let e=null;"function_call"===r&&(l.function_call={id:o(),role:"assistant",content:"",function_call:a.function_call,name:a.function_call.name,createdAt:i},e=l.function_call);let t=null;"tool_calls"===r&&(l.tool_calls={id:o(),role:"assistant",content:"",tool_calls:a.tool_calls,createdAt:i},t=l.tool_calls),"data"===r&&l.data.push(...a),n([e,t,l.text].filter(Boolean),[...l.data])}return null==r||r(l),{messages:[l.text,l.function_call,l.tool_calls].filter(Boolean),data:l.data}}async function em({api:e,messages:t,body:n,credentials:r,headers:o,abortController:a,appendMessage:i,restoreMessagesOnFailure:l,onResponse:s,onUpdate:c,onFinish:u,generateId:d}){var f;let p=await fetch(e,{method:"POST",body:JSON.stringify({messages:t,...n}),headers:{"Content-Type":"application/json",...o},signal:null==(f=null==a?void 0:a())?void 0:f.signal,credentials:r}).catch(e=>{throw l(),e});if(s)try{await s(p)}catch(e){throw e}if(!p.ok)throw l(),Error(await p.text()||"Failed to fetch the chat response.");if(!p.body)throw Error("The response body is empty.");let g=p.body.getReader();if("true"===p.headers.get("X-Experimental-Stream-Data"))return await eg({reader:g,abortControllerRef:null!=a?{current:a()}:void 0,update:c,onFinish(e){u&&null!=e.text&&u(e.text)},generateId:d});{let e=new Date,t=function(e){let t=new TextDecoder;return e?function(e){return t.decode(e,{stream:!0}).split("\n").filter(e=>""!==e).map(ed).filter(Boolean)}:function(e){return e?t.decode(e,{stream:!0}):""}}(!1),n="",r={id:d(),createdAt:e,content:"",role:"assistant"};for(;;){let{done:e,value:o}=await g.read();if(e)break;if((n+=t(o)).startsWith('{"function_call":')?r.function_call=n:n.startsWith('{"tool_calls":')?r.tool_calls=n:r.content=n,i({...r}),(null==a?void 0:a())===null){g.cancel();break}}if(n.startsWith('{"function_call":')){let e=JSON.parse(n).function_call;r.function_call=e,i({...r})}if(n.startsWith('{"tool_calls":')){let e=JSON.parse(n).tool_calls;r.tool_calls=e,i({...r})}return u&&u(r),r}}async function ey({getStreamedResponse:e,experimental_onFunctionCall:t,experimental_onToolCall:n,updateChatRequest:r,getCurrentMessages:o}){for(;;){let a=await e();if("messages"in a){let e=!1;for(let i of a.messages)if(void 0!==i.function_call&&"string"!=typeof i.function_call||void 0!==i.tool_calls&&"string"!=typeof i.tool_calls){if(e=!0,t){let n=i.function_call;if("object"!=typeof n){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let a=await t(o(),n);if(void 0===a){e=!1;break}r(a)}if(n){let t=i.tool_calls;if(!Array.isArray(t)||t.some(e=>"object"!=typeof e)){console.warn("experimental_onToolCall should not be defined when using tools");continue}let a=await n(o(),t);if(void 0===a){e=!1;break}r(a)}}if(!e)break}else{let e=function(e){for(let t of e.messages){if(void 0!==t.tool_calls)for(let e of t.tool_calls)"object"==typeof e&&e.function.arguments&&"string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments));void 0!==t.function_call&&"object"==typeof t.function_call&&t.function_call.arguments&&"string"!=typeof t.function_call.arguments&&(t.function_call.arguments=JSON.stringify(t.function_call.arguments))}};if((void 0===a.function_call||"string"==typeof a.function_call)&&(void 0===a.tool_calls||"string"==typeof a.tool_calls))break;if(t){let n=a.function_call;if("object"!=typeof n){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let i=await t(o(),n);if(void 0===i)break;e(i),r(i)}if(n){let t=a.tool_calls;if("object"!=typeof t){console.warn("experimental_onToolCall should not be defined when using functions");continue}let i=await n(o(),t);if(void 0===i)break;e(i),r(i)}}}}var eh=async(e,t,n,r,o,a,i,l,s,c,u,d)=>{var f,p;let g=i.current;n(t.messages,!1);let m=d?t.messages:t.messages.map(({role:e,content:t,name:n,function_call:r,tool_calls:o,tool_call_id:a})=>({role:e,content:t,tool_call_id:a,...void 0!==n&&{name:n},...void 0!==r&&{function_call:r},...void 0!==o&&{tool_calls:o}}));if("string"!=typeof e){let r={id:s(),createdAt:new Date,content:"",role:"assistant"};async function y(e){let{content:o,ui:a,next:i}=await e;r.content=o,r.ui=await a,n([...t.messages,{...r}],!1),i&&await y(i)}try{let n=e({messages:m,data:t.data});await y(n)}catch(e){throw n(g,!1),e}return c&&c(r),r}return await em({api:e,messages:m,body:{data:t.data,...a.current.body,...null==(f=t.options)?void 0:f.body,...void 0!==t.functions&&{functions:t.functions},...void 0!==t.function_call&&{function_call:t.function_call},...void 0!==t.tools&&{tools:t.tools},...void 0!==t.tool_choice&&{tool_choice:t.tool_choice}},credentials:a.current.credentials,headers:{...a.current.headers,...null==(p=t.options)?void 0:p.headers},abortController:()=>l.current,appendMessage(e){n([...t.messages,e],!1)},restoreMessagesOnFailure(){n(g,!1)},onResponse:u,onUpdate(e,a){n([...t.messages,...e],!1),r([...o||[],...a||[]],!1)},onFinish:c,generateId:s})};function ev({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:a,experimental_onFunctionCall:i,experimental_onToolCall:l,onResponse:s,onFinish:c,onError:u,credentials:d,headers:f,body:p,generateId:g=ep}={}){let m=(0,o.useId)(),y=null!=t?t:m,h="string"==typeof e?[e,y]:y,[v]=(0,o.useState)([]),{data:_,mutate:b}=ee([h,"messages"],null,{fallbackData:null!=n?n:v}),{data:w=!1,mutate:E}=ee([h,"loading"],null),{data:C,mutate:R}=ee([h,"streamData"],null),{data:x,mutate:T}=ee([h,"error"],null),S=(0,o.useRef)(_||[]);(0,o.useEffect)(()=>{S.current=_||[]},[_]);let O=(0,o.useRef)(null),k=(0,o.useRef)({credentials:d,headers:f,body:p});(0,o.useEffect)(()=>{k.current={credentials:d,headers:f,body:p}},[d,f,p]);let D=(0,o.useCallback)(async t=>{try{E(!0),T(void 0);let n=new AbortController;O.current=n,await ey({getStreamedResponse:()=>eh(e,t,b,R,C,k,S,O,g,c,s,a),experimental_onFunctionCall:i,experimental_onToolCall:l,updateChatRequest:e=>{t=e},getCurrentMessages:()=>S.current}),O.current=null}catch(e){if("AbortError"===e.name)return O.current=null,null;u&&e instanceof Error&&u(e),T(e)}finally{E(!1)}},[b,E,e,k,s,c,u,T,R,C,a,i,l,S,O,g]),N=(0,o.useCallback)(async(e,{options:t,functions:n,function_call:r,tools:o,tool_choice:a,data:i}={})=>(e.id||(e.id=g()),D({messages:S.current.concat(e),options:t,data:i,...void 0!==n&&{functions:n},...void 0!==r&&{function_call:r},...void 0!==o&&{tools:o},...void 0!==a&&{tool_choice:a}})),[D,g]),P=(0,o.useCallback)(async({options:e,functions:t,function_call:n,tools:r,tool_choice:o}={})=>0===S.current.length?null:"assistant"===S.current[S.current.length-1].role?D({messages:S.current.slice(0,-1),options:e,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}}):D({messages:S.current,options:e,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}}),[D]),V=(0,o.useCallback)(()=>{O.current&&(O.current.abort(),O.current=null)},[]),A=(0,o.useCallback)(e=>{b(e,!1),S.current=e},[b]),[I,M]=(0,o.useState)(r),L=(0,o.useCallback)((e,t={},n)=>{n&&(k.current={...k.current,...n}),e.preventDefault(),I&&(N({content:I,role:"user",createdAt:new Date},t),M(""))},[I,N]);return{messages:_||[],error:x,append:N,reload:P,stop:V,setMessages:A,input:I,setInput:M,handleInputChange:e=>{M(e.target.value)},handleSubmit:L,isLoading:w,data:C}}},83997:function(e,t,n){"use strict";let r;n.d(t,{VY:function(){return k},fC:function(){return S},xz:function(){return O}});var o=n(7896),a=n(2784),i=n(17998),l=n(92211),s=n(87695),c=n(62656),u=n(94465),d=(n(78773),n(79616)),f=n(72714),p=n(35999);let g="HoverCard",[m,y]=(0,l.b)(g,[u.D7]),h=(0,u.D7)(),[v,_]=m(g),b=(0,a.forwardRef)((e,t)=>{let{__scopeHoverCard:n,...r}=e,l=_("HoverCardTrigger",n),s=h(n);return(0,a.createElement)(u.ee,(0,o.Z)({asChild:!0},s),(0,a.createElement)(f.WV.a,(0,o.Z)({"data-state":l.open?"open":"closed"},r,{ref:t,onPointerEnter:(0,i.M)(e.onPointerEnter,T(l.onOpen)),onPointerLeave:(0,i.M)(e.onPointerLeave,T(l.onClose)),onFocus:(0,i.M)(e.onFocus,l.onOpen),onBlur:(0,i.M)(e.onBlur,l.onClose),onTouchStart:(0,i.M)(e.onTouchStart,e=>e.preventDefault())})))}),[w,E]=m("HoverCardPortal",{forceMount:void 0}),C="HoverCardContent",R=(0,a.forwardRef)((e,t)=>{let n=E(C,e.__scopeHoverCard),{forceMount:r=n.forceMount,...l}=e,s=_(C,e.__scopeHoverCard);return(0,a.createElement)(d.z,{present:r||s.open},(0,a.createElement)(x,(0,o.Z)({"data-state":s.open?"open":"closed"},l,{onPointerEnter:(0,i.M)(e.onPointerEnter,T(s.onOpen)),onPointerLeave:(0,i.M)(e.onPointerLeave,T(s.onClose)),ref:t})))}),x=(0,a.forwardRef)((e,t)=>{let{__scopeHoverCard:n,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:d,onInteractOutside:f,...g}=e,m=_(C,n),y=h(n),v=(0,a.useRef)(null),b=(0,c.e)(t,v),[w,E]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(w){let e=document.body;return r=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=r,e.style.webkitUserSelect=r}}},[w]),(0,a.useEffect)(()=>{if(v.current){let e=()=>{E(!1),m.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;(null===(e=document.getSelection())||void 0===e?void 0:e.toString())!==""&&(m.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!1}}},[m.isPointerDownOnContentRef,m.hasSelectionRef]),(0,a.useEffect)(()=>{v.current&&(function(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t})(v.current).forEach(e=>e.setAttribute("tabindex","-1"))}),(0,a.createElement)(p.XB,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:(0,i.M)(d,e=>{e.preventDefault()}),onDismiss:m.onDismiss},(0,a.createElement)(u.VY,(0,o.Z)({},y,g,{onPointerDown:(0,i.M)(g.onPointerDown,e=>{e.currentTarget.contains(e.target)&&E(!0),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!0}),ref:b,style:{...g.style,userSelect:w?"text":void 0,WebkitUserSelect:w?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function T(e){return t=>"touch"===t.pointerType?void 0:e()}let S=e=>{let{__scopeHoverCard:t,children:n,open:r,defaultOpen:o,onOpenChange:i,openDelay:l=700,closeDelay:c=300}=e,d=h(t),f=(0,a.useRef)(0),p=(0,a.useRef)(0),g=(0,a.useRef)(!1),m=(0,a.useRef)(!1),[y=!1,_]=(0,s.T)({prop:r,defaultProp:o,onChange:i}),b=(0,a.useCallback)(()=>{clearTimeout(p.current),f.current=window.setTimeout(()=>_(!0),l)},[l,_]),w=(0,a.useCallback)(()=>{clearTimeout(f.current),g.current||m.current||(p.current=window.setTimeout(()=>_(!1),c))},[c,_]),E=(0,a.useCallback)(()=>_(!1),[_]);return(0,a.useEffect)(()=>()=>{clearTimeout(f.current),clearTimeout(p.current)},[]),(0,a.createElement)(v,{scope:t,open:y,onOpenChange:_,onOpen:b,onClose:w,onDismiss:E,hasSelectionRef:g,isPointerDownOnContentRef:m},(0,a.createElement)(u.fC,d,n))},O=b,k=R}}]);