"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3238],{43238:function(e,t,a){a.d(t,{Z:function(){return em}});var l=a(52322),i=a(99959),s=a(2784),n=a(56958),r=a(53535),c=a(26211),o=a(3373),d=a(99248),u=a(63175),m=a(4689),p=a(59491),f=a(65644),h=a(29354),x=a(39097),b=a.n(x),j=a(5632),v=a(53111),g=a(78232),y=a(91547),_=a(85642),w=a(33259),N=a(85945),k=a(48228),C=a(88354),z=a(42654);async function Z(e){let{projectRef:t,id:a,isPublic:l,file_size_limit:i,allowed_mime_types:s}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("Bucket name is requried");let n=await (0,C.v_)("".concat(d.T5,"/storage/").concat(t,"/buckets"),{id:a,public:l,file_size_limit:i,allowed_mime_types:s});if(n.error)throw n.error;return n}let S=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,N.NL)();return(0,k.D)(e=>Z(e),{async onSuccess(t,a,i){let{projectRef:s}=a;await l.invalidateQueries(z.m.buckets(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,l){void 0===t?n.Am.error("Failed to create bucket: ".concat(e.message)):t(e,a,l)},...a})};var R=a(83690),E=a(62277),T=a(750),A=a(22854),P=a(48869),O=a(11992),F=a(54383),I=a(62284),B=a(32079),M=e=>{var t;let{visible:a,onClose:r}=e,{ref:c}=(0,i.UO)(),o=(0,j.useRouter)(),{mutate:u,isLoading:m}=S({onSuccess:e=>{n.Am.success("Successfully created bucket ".concat(e.name)),o.push("/project/".concat(c,"/storage/buckets/").concat(e.name)),r()}}),{data:p}=(0,w.k)({projectRef:c},{enabled:d.Qy}),{value:f,unit:h}=(0,_.Ku)(null!==(t=null==p?void 0:p.fileSizeLimit)&&void 0!==t?t:0),x="".concat(f," ").concat(h),[v,N]=(0,s.useState)(y.b.BYTES),[k,C]=(0,s.useState)(!1),z=async e=>{if(!c)return console.error("Project ref is required");u({projectRef:c,id:e.name,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,_.Fm)(e.formatted_size_limit,v):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null})};return(0,s.useEffect)(()=>{a&&(N(y.b.BYTES),C(!1))},[a]),(0,l.jsx)(R.Z,{hideFooter:!0,visible:a,size:"medium",header:"Create storage bucket",onCancel:()=>r(),children:(0,l.jsx)(E.Z,{validateOnBlur:!1,initialValues:{name:"",public:!1,file_size_limit:0,allowed_mime_types:"",has_file_size_limit:!1,formatted_size_limit:0},validate:e=>{let t={};return e.name||(t.name="Please provide a name for your bucket"),e.name&&e.name.endsWith(" ")&&(t.name="The name of the bucket cannot end with a whitespace"),e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),"public"===e.name&&(t.name='"public" is a reserved name. Please choose another name'),t},onSubmit:z,children:e=>{let{values:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(R.Z.Content,{children:[(0,l.jsx)(T.Z,{id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created.",descriptionText:"Only lowercase letters, numbers, dots, and hyphens"}),(0,l.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,l.jsx)(A.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),t.public&&(0,l.jsxs)(P.b,{title:"Public buckets are not protected",variant:"warning",withIcon:!0,children:[(0,l.jsx)("p",{className:"mb-2",children:"Users can read objects in public buckets without any authorization."}),(0,l.jsx)("p",{children:"Row level security (RLS) policies are still required for other operations such as object uploads and deletes."})]})]})]}),(0,l.jsxs)(O.ZP,{open:k,onOpenChange:()=>C(!k),children:[(0,l.jsx)(O.ZP.Trigger,{asChild:!0,children:(0,l.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,l.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,l.jsx)(g.Z,{size:18,strokeWidth:2,className:(0,F.cn)("text-foreground-light",k&&"rotate-180")})]})}),(0,l.jsx)(O.ZP.Content,{className:"py-4",children:(0,l.jsxs)("div",{className:"w-full space-y-5 px-5",children:[(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsx)(A.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,l.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,l.jsx)("div",{className:"col-span-8",children:(0,l.jsx)(T.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,_.Fm)(t.formatted_size_limit,v).toLocaleString()," bytes.")})}),(0,l.jsx)("div",{className:"col-span-4",children:(0,l.jsx)(I.Z,{id:"size_limit_units",disabled:!1,value:v,onChange:N,children:Object.values(y.b).map(e=>(0,l.jsx)(I.Z.Option,{label:e,value:e,children:(0,l.jsx)("div",{children:e})},e))})}),d.Qy&&(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,l.jsx)(b(),{href:"/project/".concat(c,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",x,")"]})})]})]}),(0,l.jsx)(T.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,l.jsx)(R.Z.Separator,{}),(0,l.jsxs)(R.Z.Content,{className:"flex items-center space-x-2 justify-end",children:[(0,l.jsx)(B.z,{type:"default",htmlType:"button",disabled:m,onClick:()=>r(),children:"Cancel"}),(0,l.jsx)(B.z,{type:"primary",htmlType:"submit",loading:m,disabled:m,children:"Save"})]})]})}})})};async function D(e){let{projectRef:t,id:a,isPublic:l,file_size_limit:i,allowed_mime_types:s}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("Bucket name is requried");let n=await (0,C.r$)("".concat(d.T5,"/storage/").concat(t,"/buckets/").concat(a),{public:l,file_size_limit:i,allowed_mime_types:s});if(n.error)throw n.error;return n}let L=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,N.NL)();return(0,k.D)(e=>D(e),{async onSuccess(t,a,i){let{projectRef:s}=a;await l.invalidateQueries(z.m.buckets(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,l){void 0===t?n.Am.error("Failed to update bucket: ".concat(e.message)):t(e,a,l)},...a})};var q=e=>{var t;let{visible:a,bucket:r,onClose:c}=e,{ref:o}=(0,i.UO)(),{mutate:u,isLoading:m}=L({onSuccess:()=>{n.Am.success('Successfully updated bucket "'.concat(null==r?void 0:r.name,'"')),c()}}),{data:p}=(0,w.k)({projectRef:o},{enabled:d.Qy}),{value:f,unit:h}=(0,_.Ku)(null!==(t=null==p?void 0:p.fileSizeLimit)&&void 0!==t?t:0),x="".concat(f," ").concat(h),[j,v]=(0,s.useState)(y.b.BYTES),[N,k]=(0,s.useState)(!1),C=async e=>void 0===r?console.error("Bucket is required"):void 0===o?console.error("Project ref is required"):void u({projectRef:o,id:r.id,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,_.Fm)(e.formatted_size_limit,j):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null});return(0,s.useEffect)(()=>{if(a){var e;let{unit:t}=(0,_.Ku)(null!==(e=null==r?void 0:r.file_size_limit)&&void 0!==e?e:0);v(t),k(!1)}},[a]),(0,l.jsx)(R.Z,{hideFooter:!0,visible:a,size:"medium",header:'Edit bucket "'.concat(null==r?void 0:r.name,'"'),onCancel:c,children:(0,l.jsx)(E.Z,{validateOnBlur:!1,initialValues:{},validate:e=>{let t={};return e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),t},onSubmit:C,children:e=>{let{values:t,resetForm:i}=e;return(0,s.useEffect)(()=>{if(a&&void 0!==r){var e,t,l;let{value:a}=(0,_.Ku)(null!==(e=r.file_size_limit)&&void 0!==e?e:0),s={name:null!==(t=r.name)&&void 0!==t?t:"",public:r.public,file_size_limit:r.file_size_limit,allowed_mime_types:(null!==(l=r.allowed_mime_types)&&void 0!==l?l:[]).join(", "),has_file_size_limit:null!==r.file_size_limit,formatted_size_limit:null!=a?a:0};i({values:s,initialValues:s})}},[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(R.Z.Content,{children:[(0,l.jsx)(T.Z,{disabled:!0,id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created."}),(0,l.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,l.jsx)(A.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),(null==r?void 0:r.public)!==t.public&&(0,l.jsx)(P.b,{title:(null==r?void 0:r.public)||!t.public?(null==r?void 0:r.public)&&!t.public?"Warning: Making bucket private":"":"Warning: Making bucket public",variant:"warning",withIcon:!0,children:(0,l.jsx)("p",{className:"mb-2",children:(null==r?void 0:r.public)||!t.public?(null==r?void 0:r.public)&&!t.public?'All objects in "'.concat(null==r?void 0:r.name,'" will be made private and will only be accessible via signed URLs or downloaded with the right authorisation headers'):"":'This will make all objects in the bucket "'.concat(null==r?void 0:r.name,'" public')})})]})]}),(0,l.jsxs)(O.ZP,{open:N,onOpenChange:()=>k(!N),children:[(0,l.jsx)(O.ZP.Trigger,{asChild:!0,children:(0,l.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,l.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,l.jsx)(g.Z,{size:18,strokeWidth:2,className:(0,F.cn)("text-foreground-light",N&&"rotate-180")})]})}),(0,l.jsx)(O.ZP.Content,{className:"py-4",children:(0,l.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(A.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,l.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,l.jsx)("div",{className:"col-span-8",children:(0,l.jsx)(T.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,_.Fm)(t.formatted_size_limit,j).toLocaleString()," bytes.")})}),(0,l.jsx)("div",{className:"col-span-4",children:(0,l.jsx)(I.Z,{id:"size_limit_units",disabled:!1,value:j,onChange:v,children:Object.values(y.b).map(e=>(0,l.jsx)(I.Z.Option,{label:e,value:e,children:(0,l.jsx)("div",{children:e})},e))})}),d.Qy&&(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,l.jsx)(b(),{href:"/project/".concat(o,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",x,")"]})})]})]}),(0,l.jsx)(T.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,l.jsx)(R.Z.Separator,{}),(0,l.jsxs)(R.Z.Content,{className:"flex items-center space-x-2 justify-end",children:[(0,l.jsx)(B.z,{type:"default",disabled:m,onClick:()=>c(),children:"Cancel"}),(0,l.jsx)(B.z,{type:"primary",htmlType:"submit",loading:m,disabled:m,children:"Save"})]})]})}})})},W=a(32177),V=a(31696);async function K(e){let{projectRef:t,id:a}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("Bucket name is requried");let{data:l,error:i}=await (0,V.v_)("/platform/storage/{ref}/buckets/{id}/empty",{params:{path:{id:a,ref:t}}});return i&&(0,V.S3)(i),l}let Q=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,N.NL)();return(0,k.D)(e=>K(e),{async onSuccess(t,a,i){let{projectRef:s}=a;await l.invalidateQueries(z.m.buckets(s)),await (null==e?void 0:e(t,a,i))},async onError(e,a,l){void 0===t?n.Am.error("Failed to empty bucket: ".concat(e.message)):t(e,a,l)},...a})};var U=a(74138);let Y=e=>{let{visible:t=!1,bucket:a,onClose:s}=e,{ref:r}=(0,i.UO)(),{fetchFolderContents:c}=(0,u.H)(),{mutate:o,isLoading:d}=Q({onSuccess:async()=>{void 0!==a&&(await c(a.id,a.name,-1),n.Am.success("Successfully deleted bucket ".concat(a.name)),s())}}),m=async()=>r?a?void o({projectRef:r,id:a.id}):console.error("No bucket is selected"):console.error("Project ref is required");return(0,l.jsx)(U.Z,{variant:"destructive",size:"small",title:"Confirm to delete all contents from ".concat(null==a?void 0:a.name),confirmLabel:"Empty bucket",visible:t,onCancel:()=>s(),onConfirm:m,alert:{title:"This action cannot be undone",description:"The contents of your bucket cannot be recovered once deleted"},children:(0,l.jsxs)("p",{className:"text-sm",children:['Are you sure you want to empty the bucket "',null==a?void 0:a.name,'"?']})})};var X=a(44778),G=a(41679),$=a(88787),H=a(87175),J=a(3085),ee=a(95492),et=a(40022),ea=a(6277),el=a(34291),ei=a.n(el),es=a(24213);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let en=(0,a(46145).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var er=a(3536),ec=a(81076),eo=a(34503),ed=e=>{let{bucket:t,projectRef:a="",isSelected:i=!1,onSelectEmptyBucket:s=ei(),onSelectDeleteBucket:n=ei(),onSelectEditBucket:r=ei()}=e,c=(0,H.Xo)(p.KA.STORAGE_ADMIN_WRITE,"*");return(0,l.jsxs)("div",{className:(0,ea.default)("group flex items-center justify-between rounded-md",i&&"text-foreground bg-surface-100"),children:[(0,l.jsx)(b(),{href:"/project/".concat(a,"/storage/buckets/").concat(encodeURIComponent(t.id)),className:(0,F.cn)("py-1 px-3",i?"w-[88%]":"w-full"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between space-x-2 truncate w-full",children:[(0,l.jsx)("p",{className:"text-sm group-hover:text-foreground transition truncate ".concat(i?"text-foreground":"text-foreground-light"),title:t.name,children:t.name}),t.public&&(0,l.jsx)(ec.C,{variant:"warning",children:"Public"})]})}),c&&i?(0,l.jsxs)(eo.h_,{children:[(0,l.jsx)(eo.$F,{asChild:!0,children:(0,l.jsx)(B.z,{type:"text",icon:(0,l.jsx)(g.Z,{}),className:"mr-1 p-0.5"})}),(0,l.jsxs)(eo.AW,{side:"bottom",align:"start",children:[(0,l.jsxs)(eo.Xi,{className:"space-x-2",onClick:()=>r(),children:[(0,l.jsx)(es.Z,{size:14}),(0,l.jsx)("p",{children:"Edit bucket"})]},"toggle-private"),(0,l.jsx)(eo.VD,{}),(0,l.jsxs)(eo.Xi,{className:"space-x-2",onClick:()=>s(),children:[(0,l.jsx)(en,{size:14}),(0,l.jsx)("p",{children:"Empty bucket"})]},"empty-bucket"),(0,l.jsxs)(eo.Xi,{className:"space-x-2",onClick:()=>n(),children:[(0,l.jsx)(er.Z,{size:14}),(0,l.jsx)("p",{children:"Delete bucket"})]},"delete-bucket")]})]}):(0,l.jsx)("div",{className:"w-5"})]},t.id)},eu=()=>{let e=(0,j.useRouter)(),{ref:t,bucketId:a}=(0,i.UO)(),n=(0,c.V)(),r=(null==n?void 0:n.parent_project_ref)!==void 0,[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(),[y,_]=(0,s.useState)(),[w,N]=(0,s.useState)(),k=(0,H.Xo)(p.KA.STORAGE_ADMIN_WRITE,"*"),[C,z]=(0,v._)("storage-explorer-sort","created-at"),Z=e.pathname.split("/")[4],{data:S,error:R,isLoading:E,isError:T,isSuccess:A}=(0,$.K)({projectRef:t}),P=null!=S?S:[],O="alphabetical"===C?P.sort((e,t)=>e.name.toLowerCase().trim().localeCompare(t.name.toLowerCase().trim())):P.sort((e,t)=>new Date(t.created_at)>new Date(e.created_at)?-1:1),F=o.length>1?O.filter(e=>e.name.includes(o.trim())):O,I=(null==R?void 0:R.message.includes("Tenant config"))&&r;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(J.ZP,{type:"pills",className:"my-6 flex flex-grow flex-col",children:[(0,l.jsxs)("div",{className:"mb-6 mx-5 flex flex-col gap-y-1.5",children:[(0,l.jsx)(X.u,{block:!0,type:"default",icon:(0,l.jsx)(f.Z,{}),disabled:!k,style:{justifyContent:"start"},onClick:()=>m(!0),tooltip:{content:{side:"bottom",text:"You need additional permissions to create buckets"}},children:"New bucket"}),(0,l.jsx)(et.nM,{className:"px-0",children:(0,l.jsx)(et.nn,{name:"search-buckets","aria-labelledby":"Search buckets",placeholder:"Search buckets...",value:o,onChange:e=>{d(e.target.value)},children:(0,l.jsxs)(et.ZY,{value:C,onValueChange:e=>z(e),children:[(0,l.jsx)(et.IR,{value:"alphabetical",className:"flex gap-2",children:"Alphabetical"},"alphabetical"),(0,l.jsx)(et.IR,{value:"created-at",children:"Created at"},"created-at")]})})})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"mx-3",children:[(0,l.jsx)(J.ZP.Group,{title:(0,l.jsx)("span",{className:"uppercase font-mono",children:"All buckets"})}),E&&(0,l.jsxs)("div",{className:"space-y-2 mx-2",children:[(0,l.jsx)(G.Z,{className:"!py-2.5"}),(0,l.jsx)(G.Z,{className:"!py-2.5"}),(0,l.jsx)(G.Z,{className:"!py-2.5"})]}),T&&(0,l.jsx)("div",{className:"px-2",children:(0,l.jsxs)(ee.bZ,{variant:I?"default":"warning",children:[(0,l.jsx)(ee.Cd,{className:"text-xs tracking-normal",children:I?"Storage is not available on preview branches for now":"Failed to fetch buckets"}),(0,l.jsx)(ee.X,{className:"text-xs",children:I?"We're actively looking into making this available on preview branches":"Please refresh to try again"})]})}),A&&(0,l.jsxs)(l.Fragment,{children:[0===P.length&&(0,l.jsx)(et.Cf,{className:"mx-2",title:"No buckets available",description:"Buckets that you create will appear here"}),o.length>0&&0===F.length&&(0,l.jsx)(et.Cf,{className:"mx-2",title:"No results found",description:'Your search for "'.concat(o,'" did not return any results')}),F.map((e,i)=>{let s=a===e.id;return(0,l.jsx)(ed,{bucket:e,projectRef:t,isSelected:s,onSelectEmptyBucket:()=>_(e),onSelectDeleteBucket:()=>N(e),onSelectEditBucket:()=>g(e)},"".concat(i,"_").concat(e.id))})]})]}),(0,l.jsx)("div",{className:"h-px w-full bg-border"}),(0,l.jsxs)("div",{className:"mx-3",children:[(0,l.jsx)(J.ZP.Group,{title:(0,l.jsx)("span",{className:"uppercase font-mono",children:"Configuration"})}),(0,l.jsx)(b(),{href:"/project/".concat(t,"/storage/policies"),legacyBehavior:!0,children:(0,l.jsx)(J.ZP.Item,{rounded:!0,active:"policies"===Z,children:(0,l.jsx)("p",{className:"truncate",children:"Policies"})})}),(0,l.jsx)(b(),{href:"/project/".concat(t,"/settings/storage"),children:(0,l.jsx)(J.ZP.Item,{rounded:!0,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"truncate",children:"Settings"}),(0,l.jsx)(h.Z,{strokeWidth:1,className:"h-4 w-4"})]})})})]})]})]}),(0,l.jsx)(M,{visible:u,onClose:()=>m(!1)}),(0,l.jsx)(q,{visible:void 0!==x,bucket:x,onClose:()=>g(void 0)}),(0,l.jsx)(Y,{visible:void 0!==y,bucket:y,onClose:()=>_(void 0)}),(0,l.jsx)(W.Iw,{visible:void 0!==w,bucket:w,onClose:()=>N(void 0)})]})},em=(0,o.Q)(e=>{let{title:t,children:a}=e,{ref:o}=(0,i.UO)(),p=(0,c.V)(),f=(0,u.H)(),{data:h,isLoading:x}=(0,r.q)({projectRef:o}),b=null==h?void 0:h.autoApiService,j=(null==p?void 0:p.status)===d.S.INACTIVE;(0,s.useEffect)(()=>{!x&&b&&v(b)},[x,o]);let v=async e=>{j||(e.endpoint?f.initStore(o,e.endpoint,e.serviceApiKey,e.protocol):n.Am.error("Failed to fetch project configuration. Try refreshing your browser, or reach out to us at support@supabase.io"))};return(0,l.jsx)(m.Z,{title:t||"Storage",product:"Storage",productMenu:(0,l.jsx)(eu,{}),children:a})})},29354:function(e,t,a){a.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(46145).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},40022:function(e,t,a){a.d(t,{Cf:function(){return k},DS:function(){return v},GZ:function(){return h},HJ:function(){return N},IR:function(){return w},Qn:function(){return x},ZY:function(){return _},nM:function(){return g},nn:function(){return y},qs:function(){return j},rt:function(){return b}});var l=a(52322),i=a(68806),s=a(97234),n=a(39097),r=a.n(n),c=a(2784),o=a(55283),d=a(54383),u=a(42070),m=a(34503),p=a(2322),f=a(81384);let h=(0,c.forwardRef)((e,t)=>{let{...a}=e;return(0,l.jsx)(o.zF,{...a,className:(0,d.cn)("w-full px-2",a.className)})}),x=(0,c.forwardRef)((e,t)=>{let{...a}=e;return(0,l.jsx)(o.wy,{disabled:!0,ref:t,...a,className:(0,d.cn)("w-full flex gap-1 items-center group px-3 text-xs font-normal font-mono uppercase text-lighter tracking-wide",a.className),children:(0,l.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:a.title})})}),b=(0,c.forwardRef)((e,t)=>{let{...a}=e;return(0,l.jsx)(o.Fw,{...a,className:(0,d.cn)("w-full data-[state=open]:pt-1 flex flex-col gap-2",a.className)})}),j=(0,c.forwardRef)((e,t)=>(0,l.jsx)("div",{ref:t,...e,className:(0,d.cn)("h-px bg-border-muted",e.className)})),v=(0,c.forwardRef)((e,t)=>{let{className:a,isActive:i,forceHoverState:s,...n}=e;return(0,l.jsx)(r(),{ref:t,...n,"aria-current":i,className:(0,d.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",i?"bg-selection":"hover:bg-surface-200",s&&"bg-surface-200",i?"text-foreground":"text-foreground-light hover:text-foreground",a)})}),g=(0,c.forwardRef)((e,t)=>(0,l.jsx)("div",{ref:t,...e,className:(0,d.cn)("flex px-2 gap-2 items-center",e.className)})),y=(0,c.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,l.jsxs)("label",{htmlFor:s.name,className:"relative w-full",children:[(0,l.jsx)("span",{className:"sr-only",children:s["aria-labelledby"]}),(0,l.jsx)(u.I,{ref:t,type:"text",className:(0,d.cn)("h-[28px] w-full","text-xs","pl-7","pr-7","w-full","rounded",s.className),...s}),a,(0,l.jsx)(i.Z,{className:"absolute left-2 top-2 text-foreground-muted",size:14,strokeWidth:1.5})]})}),_=(0,c.forwardRef)((e,t)=>{let{value:a,onValueChange:i,contentClassName:n,triggerClassName:r,...c}=e;return(0,l.jsxs)(m.h_,{modal:!1,children:[(0,l.jsxs)(p.u,{delayDuration:0,children:[(0,l.jsx)(m.$F,{asChild:!0,className:(0,d.cn)("absolute right-1 top-[.3rem]","text-foreground-muted transition-colors hover:text-foreground data-[state=open]:text-foreground",r),children:(0,l.jsx)(p.aJ,{children:(0,l.jsx)(s.Z,{size:18,strokeWidth:1})})}),(0,l.jsx)(p._v,{side:"bottom",children:"Sort By"})]}),(0,l.jsx)(m.AW,{side:"bottom",align:"end",className:(0,d.cn)("w-48",n),children:(0,l.jsx)(m._x,{value:a,onValueChange:i,children:c.children})})]})}),w=(0,c.forwardRef)((e,t)=>(0,l.jsx)(m.qB,{ref:t,...e})),N=(0,c.forwardRef)((e,t)=>(0,l.jsxs)("div",{ref:t,...e,className:(0,d.cn)("flex flex-col px-2 gap-1 pb-4",e.className),children:[(0,l.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:0}),(0,l.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:1}),(0,l.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:2})]})),k=(0,c.forwardRef)((e,t)=>{let{illustration:a,title:i,description:s,actions:n,...r}=e;return(0,l.jsx)("div",{ref:t,...r,className:(0,d.cn)("border bg-surface-100/50 flex flex-col gap-y-3 items-center justify-center rounded-md px-3 py-4",r.className),children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-1 items-center justify-center",children:[a,i&&(0,l.jsx)("p",{className:"text-xs text-foreground-light",children:i}),s&&(0,l.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:s}),n&&(0,l.jsx)("div",{className:"mt-2",children:n})]})})})},11992:function(e,t,a){var l=a(52322),i=a(69557);a(2784);var s=a(46318);let n=e=>{let{open:t,children:a,className:s,...n}=e;return(0,l.jsx)(i.fC,{asChild:n.asChild,defaultOpen:n.defaultOpen,open:t,onOpenChange:n.onOpenChange,disabled:n.disabled,className:s,children:a})};n.Trigger=function(e){let{children:t,asChild:a}=e;return(0,l.jsx)(i.xz,{asChild:a,children:t})},n.Content=function(e){let{asChild:t,children:a,className:n}=e,r=(0,s.Z)("collapsible");return(0,l.jsx)(i.VY,{asChild:t,className:[r.content,n].join(" "),children:a})},t.ZP=n},22854:function(e,t,a){var l=a(52322),i=a(6277),s=a(2784),n=a(25001),r=a(46318),c=a(70780);t.Z=function(e){var t;let{disabled:a,id:o="",name:d="",layout:u="flex",error:m,descriptionText:p,label:f,afterLabel:h,beforeLabel:x,labelOptional:b,onChange:j,onBlur:v,defaultChecked:g,checked:y,className:_,align:w="left",size:N="medium",validation:k,labelLayout:C,...z}=e,Z=(0,r.Z)("toggle"),{formContextOnChange:S,values:R,errors:E,handleBlur:T,touched:A,fieldLevelValidation:P}=(0,c.G)();R&&!y&&(y=R[o||d]);let[O,F]=(0,s.useState)(null!==(t=g||y)&&void 0!==t&&t),I=null!=y?y:O;(0,s.useEffect)(()=>{F(I)},[]),m||(E&&!m&&(m=E[o||d]),m=A&&A[o||d]?m:void 0);let B=[Z.base,Z.handle_container[N]];I&&B.push(Z.active);let M=[Z.handle.base,Z.handle[N]];return I&&M.push(Z.handle_active[N]),(0,l.jsx)(n.l,{className:_,label:f,afterLabel:h,beforeLabel:x,labelOptional:b,layout:u,id:o,error:m,align:w,descriptionText:p,size:N,labelLayout:C,nonBoxInput:!0,children:(0,l.jsx)("button",{type:"button",id:o,name:d,className:(0,i.default)(...B,a&&"opacity-50 cursor-default"),onClick:function(){j&&j(!I),F(!O);let e={};e.target={type:"checkbox",name:d,id:o,value:!I,checked:!I},S&&S(e),k&&P(o,k(!O))},disabled:a,onBlur:function(e){setTimeout(()=>{T&&T(e)},100),v&&v(e)},...z,children:(0,l.jsx)("span",{"aria-hidden":"true",className:M.join(" ")})})})}},55283:function(e,t,a){a.d(t,{Fw:function(){return n},wy:function(){return s},zF:function(){return i}});var l=a(69557);let i=l.fC,s=l.wy,n=l.Fw},69557:function(e,t,a){a.d(t,{Fw:function(){return y},VY:function(){return C},fC:function(){return N},p_:function(){return h},wy:function(){return v},xz:function(){return k}});var l=a(7896),i=a(2784),s=a(17998),n=a(92211),r=a(87695),c=a(61644),o=a(62656),d=a(72714),u=a(79616),m=a(23372);let p="Collapsible",[f,h]=(0,n.b)(p),[x,b]=f(p),j=(0,i.forwardRef)((e,t)=>{let{__scopeCollapsible:a,open:s,defaultOpen:n,disabled:c,onOpenChange:o,...u}=e,[p=!1,f]=(0,r.T)({prop:s,defaultProp:n,onChange:o});return(0,i.createElement)(x,{scope:a,disabled:c,contentId:(0,m.M)(),open:p,onOpenToggle:(0,i.useCallback)(()=>f(e=>!e),[f])},(0,i.createElement)(d.WV.div,(0,l.Z)({"data-state":w(p),"data-disabled":c?"":void 0},u,{ref:t})))}),v=(0,i.forwardRef)((e,t)=>{let{__scopeCollapsible:a,...n}=e,r=b("CollapsibleTrigger",a);return(0,i.createElement)(d.WV.button,(0,l.Z)({type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":w(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled},n,{ref:t,onClick:(0,s.M)(e.onClick,r.onOpenToggle)}))}),g="CollapsibleContent",y=(0,i.forwardRef)((e,t)=>{let{forceMount:a,...s}=e,n=b(g,e.__scopeCollapsible);return(0,i.createElement)(u.z,{present:a||n.open},({present:e})=>(0,i.createElement)(_,(0,l.Z)({},s,{ref:t,present:e})))}),_=(0,i.forwardRef)((e,t)=>{let{__scopeCollapsible:a,present:s,children:n,...r}=e,u=b(g,a),[m,p]=(0,i.useState)(s),f=(0,i.useRef)(null),h=(0,o.e)(t,f),x=(0,i.useRef)(0),j=x.current,v=(0,i.useRef)(0),y=v.current,_=u.open||m,N=(0,i.useRef)(_),k=(0,i.useRef)();return(0,i.useEffect)(()=>{let e=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,c.b)(()=>{let e=f.current;if(e){k.current=k.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();x.current=t.height,v.current=t.width,N.current||(e.style.transitionDuration=k.current.transitionDuration,e.style.animationName=k.current.animationName),p(s)}},[u.open,s]),(0,i.createElement)(d.WV.div,(0,l.Z)({"data-state":w(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!_},r,{ref:h,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style}}),_&&n)});function w(e){return e?"open":"closed"}let N=j,k=v,C=y}}]);