(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3208],{49282:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/log-drains",function(){return a(92581)}])},43276:function(e,t,a){"use strict";var r=a(52322),n=a(6838),l=a(91179),s=a(39097),i=a.n(s);a(2784);var o=a(54383);t.Z=e=>{let t,{title:a,description:s,children:d,footer:c,url:u="",linkHref:h="",imgUrl:p,imgAlt:m,icon:f,className:x,loading:g=!1,fixedHeight:v=!0,hideChevron:j=!1,titleClass:b="",...y}=e,N=u||h||y.onClick,w={};y.onClick?(t="button",w=y):h?(t=i(),w={href:h,...y}):u?(t="a",w={href:u,...y}):(t="div",w=y);let k=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];N&&(k=[...k,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),v&&(k=[...k,"h-32"]);let z=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"mr-4 flex flex-col",children:t})},C=(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(z,{children:(0,r.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(p),alt:"".concat(m),width:"26"})}),f&&(0,r.jsx)(z,{children:f}),(0,r.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof a?(0,r.jsx)("h5",{className:"text-foreground pr-5 ".concat(b),children:a}):a,(d||s)&&(0,r.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:s}),(0,r.jsx)("div",{className:"w-full",children:d&&d})]}),c&&(0,r.jsx)("div",{className:"w-full !mt-auto",children:c})]}),N&&(0,r.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:g?(0,r.jsx)(n.Z,{className:"animate-spin"}):j?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(l.Z,{})})]});return(0,r.jsx)(t,{...w,className:(0,o.cn)(k,x),children:C})}},92581:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eh}});var r=a(52322),n=a(59491),l=a(17172),s=a(39097),i=a.n(s),o=a(2784),d=a(56958),c=a(99959),u=a(88883),h=a(3536),p=a(63955),m=a(30195),f=a(36492),x=a(31696);let g=e=>["projects",e,"log-drains"];async function v(e,t){let{ref:a}=e;if(!a)throw Error("ref is required");let{data:r,error:n}=await (0,x.U2)("/platform/projects/{ref}/analytics/log-drains",{params:{path:{ref:a}},signal:t});return n&&(0,x.S3)(n),r}let j=function(e){let{ref:t}=e,{enabled:a,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.a)(g(t),e=>{let{signal:a}=e;return v({ref:t},a)},{enabled:a&&!!t,refetchOnMount:!1,...r})};var b=a(22574),y=a(42070),N=a(7117),w=a(62949),k=a(84752),z=a(93705),C=a(32079),E=a(87668),R=a(69548),_=a(46145);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let S=(0,_.Z)("Braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]),D=(0,_.Z)("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]),Z={size:24,strokeWidth:1.5,className:"text-foreground-light"},A=[{value:"webhook",name:"HTTP Endpoint",description:"Forward logs as a POST request to a custom HTTP endpoint",icon:(0,r.jsx)(S,{...Z})},{value:"datadog",name:"Datadog",description:"Datadog is a monitoring service for cloud-scale applications",icon:(0,r.jsx)(D,{...Z})}];A.map(e=>e.value);let T=[{label:"AP1",value:"AP1"},{label:"EU",value:"EU"},{label:"US1",value:"US1"},{label:"US1-FED",value:"US1-FED"},{label:"US3",value:"US3"},{label:"US5",value:"US5"}],V="log-drain-destination-form",L=m.z.discriminatedUnion("type",[m.z.object({type:m.z.literal("webhook"),url:m.z.string().url("Endpoint URL is required and must be a valid URL"),http:m.z.enum(["http1","http2"]),gzip:m.z.boolean(),headers:m.z.record(m.z.string(),m.z.string()).optional()}),m.z.object({type:m.z.literal("datadog"),api_key:m.z.string().min(1,{message:"API key is required"}),region:m.z.string().min(1,{message:"Region is required"})}),m.z.object({type:m.z.literal("elastic")}),m.z.object({type:m.z.literal("postgres")}),m.z.object({type:m.z.literal("bigquery")})]),P=m.z.object({name:m.z.string().min(1,{message:"Destination name is required"}),description:m.z.string().optional()}).and(L);function U(e){let{value:t,label:a,description:n,formControl:l,placeholder:s,type:i,defaultValue:o}=e;return(0,r.jsx)(b.Wi,{name:t,control:l,render:e=>{let{field:t}=e;return(0,r.jsx)(E.E,{layout:"horizontal",label:a,description:n||"",children:(0,r.jsx)(b.NI,{children:(0,r.jsx)(y.I,{defaultValue:o,type:i||"text",placeholder:s,...t})})})}})}function F(e){var t,a,n,s,m,f,x,g,v,_;let{open:S,onOpenChange:D,defaultValues:Z,onSubmit:L,isLoading:F,mode:I}=e,q="create"===I?{"Content-Type":"application/json"}:(null==Z?void 0:null===(t=Z.config)||void 0===t?void 0:t.headers)||{},{ref:M}=(0,c.UO)(),{data:O}=j({ref:M}),W=(null==Z?void 0:Z.type)||"webhook",[H,G]=(0,o.useState)({name:"",value:""}),X=(0,p.cI)({resolver:(0,u.F)(P),values:{name:(null==Z?void 0:Z.name)||"",description:(null==Z?void 0:Z.description)||"",type:W,http:(null==Z?void 0:null===(a=Z.config)||void 0===a?void 0:a.http)||"http2",gzip:"create"===I||(null==Z?void 0:null===(n=Z.config)||void 0===n?void 0:n.gzip)||!1,headers:q,url:(null==Z?void 0:null===(s=Z.config)||void 0===s?void 0:s.url)||"",api_key:(null==Z?void 0:null===(m=Z.config)||void 0===m?void 0:m.api_key)||"",region:(null==Z?void 0:null===(f=Z.config)||void 0===f?void 0:f.region)||""}}),Y=X.watch("headers"),$=X.watch("type"),B=(null===(x=Object.keys(Y||{}))||void 0===x?void 0:x.length)>0;return(0,o.useEffect)(()=>{"create"!==I||S||X.reset()},[I,S,X]),(0,r.jsx)(N.yo,{open:S,onOpenChange:e=>{G({name:"",value:""}),D(e)},children:(0,r.jsxs)(N.ue,{tabIndex:void 0,showClose:!1,size:"lg",className:"overflow-y-auto flex flex-col",children:[(0,r.jsx)(N.Tu,{children:(0,r.jsx)(N.bC,{children:"Add destination"})}),(0,r.jsxs)(N.DN,{className:"!px-0 !pb-0",children:[(0,r.jsx)(b.l0,{...X,children:(0,r.jsxs)("form",{id:V,onSubmit:e=>{e.preventDefault();let t=X.getValues("name");if((null==O?void 0:O.find(e=>e.name===t))&&"create"===I){d.Am.error("Log drain name already exists");return}X.handleSubmit(L)(e)},children:[(0,r.jsxs)("div",{className:"space-y-8 px-content",children:[(0,r.jsx)(U,{value:"name",placeholder:"My Destination",label:"Name",formControl:X.control}),(0,r.jsx)(U,{value:"description",placeholder:"My Destination",label:"Description",formControl:X.control}),"create"===I&&(0,r.jsx)(E.E,{layout:"horizontal",label:"Type",description:(null===(g=A.find(e=>e.value===$))||void 0===g?void 0:g.description)||"",children:(0,r.jsxs)(w.Ph,{defaultValue:W,value:X.getValues("type"),onValueChange:e=>X.setValue("type",e),children:[(0,r.jsx)(w.i4,{children:null===(v=A.find(e=>e.value===$))||void 0===v?void 0:v.name}),(0,r.jsx)(w.Bw,{children:A.map(e=>(0,r.jsx)(w.Ql,{value:e.value,id:e.value,className:"text-left",children:e.name},e.value))})]})})]}),(0,r.jsxs)("div",{className:"space-y-8 mt-4",children:["webhook"===$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-content space-y-8",children:[(0,r.jsx)(U,{value:"url",label:"Endpoint URL",formControl:X.control,placeholder:"https://example.com/log-drain"}),(0,r.jsx)(b.Wi,{control:X.control,name:"http",render:e=>{let{field:t}=e;return(0,r.jsxs)(E.E,{layout:"horizontal",label:"HTTP Version",children:[(0,r.jsx)(b.NI,{children:(0,r.jsxs)(k.W,{className:"flex gap-2",onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(b.xJ,{asChild:!0,children:(0,r.jsx)(b.NI,{children:(0,r.jsx)(k.Y,{value:"http1",label:"HTTP/1"})})}),(0,r.jsx)(b.xJ,{asChild:!0,children:(0,r.jsx)(b.NI,{children:(0,r.jsx)(k.Y,{value:"http2",label:"HTTP/2"})})})]})}),(0,r.jsx)(b.zG,{})]})}})]}),(0,r.jsx)(b.Wi,{control:X.control,name:"gzip",render:e=>{let{field:t}=e;return(0,r.jsx)(b.xJ,{className:"space-y-2 px-4",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(b.NI,{children:(0,r.jsx)(z.r,{checked:t.value,onCheckedChange:t.onChange})}),(0,r.jsx)(b.lX,{className:"text-base",children:"Gzip"}),(0,r.jsx)(R.b,{align:"start",children:"Gzip compresses logs before sending it to the destination."})]})})}}),(0,r.jsxs)("div",{className:"border-t",children:[(0,r.jsxs)("div",{className:"px-content pt-2 pb-3 border-b bg-background-alternative-200",children:[(0,r.jsx)(b.lX,{children:"Custom Headers"}),(0,r.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Set custom headers when draining logs to the Endpoint URL"})]}),(0,r.jsx)("div",{className:"divide-y",children:B&&(null===(_=Object.keys(Y||{}))||void 0===_?void 0:_.map(e=>(0,r.jsxs)("div",{className:"flex text-sm px-content text-foreground items-center font-mono py-1.5 group",children:[(0,r.jsx)("div",{className:"w-full",children:e}),(0,r.jsx)("div",{className:"w-full truncate",title:null==Y?void 0:Y[e],children:null==Y?void 0:Y[e]}),(0,r.jsx)(C.z,{className:"justify-self-end opacity-0 group-hover:opacity-100 w-7",type:"text",title:"Remove",icon:(0,r.jsx)(h.Z,{}),onClick:()=>(function(e){let t={...Y};delete t[e],X.setValue("headers",t)})(e)})]},e)))})]})]}),"datadog"===$&&(0,r.jsxs)("div",{className:"grid gap-4 px-content",children:[(0,r.jsx)(U,{type:"password",value:"api_key",label:"API Key",formControl:X.control,description:(0,r.jsxs)(r.Fragment,{children:["The API Key obtained from the Datadog dashboard"," ",(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"text-sm underline transition hover:text-foreground",href:"https://app.datadoghq.com/organization-settings/api-keys",children:"here"})]})}),(0,r.jsx)(b.Wi,{name:"region",control:X.control,render:e=>{let{field:t}=e;return(0,r.jsx)(E.E,{layout:"horizontal",label:"Region",description:(0,r.jsxs)("p",{children:["The Datadog region to send logs to. Read more about Datadog regions"," ",(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-foreground transition",href:"https://docs.datadoghq.com/getting_started/site/#access-the-datadog-site",children:"here"}),"."]}),children:(0,r.jsx)(b.NI,{children:(0,r.jsxs)(w.Ph,{value:t.value,onValueChange:t.onChange,children:[(0,r.jsx)(w.i4,{className:"col-span-3",children:(0,r.jsx)(w.ki,{placeholder:"Select a region"})}),(0,r.jsx)(w.Bw,{children:(0,r.jsxs)(w.DI,{children:[(0,r.jsx)(w.n5,{children:"Region"}),T.map(e=>(0,r.jsx)(w.Ql,{value:e.value,children:e.label},e.value))]})})]})})})}})]})]})]})}),"webhook"===$&&(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),function(){let e=X.getValues("headers");if(!e)return;let t=Object.keys(e);if((null==t?void 0:t.length)===20){d.Am.error("You can only have 20 custom headers");return}if(null==t?void 0:t.includes(H.name)){d.Am.error("Header name already exists");return}if(!H.name||!H.value){d.Am.error("Header name and value are required");return}X.setValue("headers",{...e,[H.name]:H.value}),G({name:"",value:""})}()},className:"flex border-t py-4 gap-4 items-center px-content",children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:"header-name",children:"Header name"}),(0,r.jsx)(y.I,{id:"header-name",type:"text",placeholder:"x-header-name",value:H.name,onChange:e=>G({...H,name:e.target.value})}),(0,r.jsx)("label",{className:"sr-only",htmlFor:"header-value",children:"Header value"}),(0,r.jsx)(y.I,{id:"header-value",type:"text",placeholder:"Header value",value:H.value,onChange:e=>G({...H,value:e.target.value})}),(0,r.jsx)(C.z,{htmlType:"submit",type:"outline",children:"Add"})]})]}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsx)(N.DN,{className:"border-t bg-background-alternative-200 mt-auto",children:(0,r.jsx)(E.E,{isReactForm:!1,layout:"horizontal",label:(0,r.jsxs)("div",{className:"text-foreground-light",children:["Additional drain cost",(0,r.jsx)("div",{className:"text-foreground-lighter mt-2",children:(0,r.jsxs)(i(),{target:"_blank",rel:"noopener noreferrer",className:"underline flex gap-1 items-center",href:"https://supabase.com/docs/guides/platform/log-drains",children:["Documentation ",(0,r.jsx)(l.Z,{className:"w-4 h-4"})]})})]}),children:(0,r.jsxs)("ul",{className:"text-right text-foreground-light",children:[(0,r.jsx)("li",{className:"text-brand-link text-base",children:"$60 per drain per month"}),(0,r.jsx)("li",{children:"$0.20 per million events"}),(0,r.jsx)("li",{children:"$0.09 per GB egress"})]})})}),(0,r.jsx)(N.FF,{className:"p-content !mt-0",children:(0,r.jsx)(C.z,{form:V,loading:F,htmlType:"submit",type:"primary",children:"Save destination"})})]})]})})}var I=a(67767);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let q=(0,_.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var M=a(56006),O=a(43276),W=a(64306),H=a(85945),G=a(48228);async function X(e){let{projectRef:t,token:a}=e,{data:r,error:n}=await (0,x.IV)("/platform/projects/{ref}/analytics/log-drains/{token}",{params:{path:{ref:t,token:a}}});return n&&(0,x.S3)(n),r}let Y=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,H.NL)();return(0,G.D)(e=>X(e),{async onSuccess(t,a,n){let{projectRef:l}=a;await r.invalidateQueries(g(l)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?d.Am.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};var $=a(93463),B=a(89823);function Q(){let e=(0,B.l)(),{data:t,isLoading:a,isSuccess:r}=(0,$.Gl)({orgSlug:null==e?void 0:e.slug});return a?{plan:null,isLoading:a,isSuccess:!1}:{plan:null==t?void 0:t.plan,isLoading:a,isSuccess:r}}var J=a(71863),K=a(34503),ee=a(74138),et=a(81384);function ea(e){let{onNewDrainClick:t,onUpdateDrainClick:a}=e,n=(0,B.l)(),{isLoading:l,plan:s}=Q(),u=!l&&((null==s?void 0:s.id)==="team"||(null==s?void 0:s.id)==="enterprise"),[p,m]=(0,o.useState)(!1),[f,x]=(0,o.useState)(null),{ref:g}=(0,c.UO)(),{data:v,isLoading:b,refetch:y,error:N,isError:w}=j({ref:g},{enabled:u}),{mutate:k}=Y({onSuccess:()=>{m(!1),x(null)},onError:()=>{m(!1),x(null),d.Am.error("Failed to delete log drain")}});return l||u?b||l?(0,r.jsx)("div",{children:(0,r.jsx)(et.A,{})}):b||(null==v?void 0:v.length)!==0?w?(0,r.jsx)(M.Z,{error:N}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(W.Z,{className:"",children:(0,r.jsxs)(J.iA,{children:[(0,r.jsx)(J.xD,{children:(0,r.jsxs)(J.SC,{children:[(0,r.jsx)(J.ss,{className:"max-w-[200px]",children:"Name"}),(0,r.jsx)(J.ss,{children:"Description"}),(0,r.jsx)(J.ss,{className:"text-right",children:"Destination"}),(0,r.jsx)(J.ss,{className:"text-right",children:(0,r.jsx)("div",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)(J.RM,{children:null==v?void 0:v.map(e=>(0,r.jsxs)(J.SC,{children:[(0,r.jsx)(J.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(J.pj,{children:e.description}),(0,r.jsx)(J.pj,{className:"text-right font-mono",children:e.type}),(0,r.jsx)(J.pj,{className:"text-right",children:(0,r.jsxs)(K.h_,{children:[(0,r.jsx)(K.$F,{asChild:!0,children:(0,r.jsx)(C.z,{type:"text",className:"px-1 opacity-50 hover:opacity-100 !bg-transparent",icon:(0,r.jsx)(I.Z,{})})}),(0,r.jsxs)(K.AW,{className:"max-w-[140px]",align:"end",children:[(0,r.jsxs)(K.Xi,{onClick:()=>{a(e)},children:[(0,r.jsx)(q,{className:"h-4 w-4 mr-2"}),"Update"]}),(0,r.jsxs)(K.Xi,{onClick:()=>{x(e),m(!0)},children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id))}),(0,r.jsx)(ee.Z,{confirmLabel:"Delete",variant:"destructive",title:"Delete Log Drain",visible:p,onConfirm:()=>{f&&g&&k({token:f.token,projectRef:g})},onCancel:()=>m(!1),children:(0,r.jsxs)("div",{className:"text-foreground-light",children:[(0,r.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,r.jsx)("span",{className:"text-foreground",children:null==f?void 0:f.name}),"?"]}),(0,r.jsx)("p",{children:"This action cannot be undone."})]})})]})})}):(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:A.map(e=>(0,r.jsx)(O.Z,{title:e.name,description:e.description,icon:e.icon,onClick:()=>{t(e.value)}},e.value))}):(0,r.jsx)(O.Z,{title:"Upgrade to a Team Plan",description:"Upgrade to a Team or Enterprise Plan to use Log Drains",children:(0,r.jsx)(C.z,{className:"mt-2",asChild:!0,children:(0,r.jsx)(i(),{href:"/org/".concat(null==n?void 0:n.slug,"/billing"),children:"Upgrade to Team"})})})}var er=a(79067),en=a(74178);async function el(e){let{data:t,error:a}=await (0,x.v_)("/platform/projects/{ref}/analytics/log-drains",{params:{path:{ref:e.projectRef}},body:{name:e.name,description:e.description,type:e.type,config:e.config}});return a&&(0,x.S3)(a),t}let es=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,H.NL)();return(0,G.D)(e=>el(e),{async onSuccess(t,a,n){let{projectRef:l}=a;await r.invalidateQueries(g(l)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?d.Am.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};async function ei(e){if(!e.token)throw Error("Token is required");let{data:t,error:a}=await (0,x.gz)("/platform/projects/{ref}/analytics/log-drains/{token}",{params:{path:{ref:e.projectRef,token:e.token}},body:{name:e.name,description:e.description,config:e.config}});return a&&(0,x.S3)(a),t}let eo=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,H.NL)();return(0,G.D)(e=>ei(e),{async onSuccess(t,a,n){let{projectRef:l}=a;await r.invalidateQueries(g(l)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?d.Am.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};var ed=a(87175),ec=a(95492);let eu=()=>{let e=(0,ed.Xo)(n.KA.ANALYTICS_WRITE,"logflare"),[t,a]=(0,o.useState)(!1),{ref:s}=(0,c.UO)(),[u,h]=(0,o.useState)(null),[p,m]=(0,o.useState)("create"),{plan:f,isLoading:x}=Q(),g=!x&&((null==f?void 0:f.id)==="team"||(null==f?void 0:f.id)==="enterprise"),{data:v}=j({ref:s},{enabled:g}),{mutate:b,isLoading:y}=es({onSuccess:()=>{d.Am.success("Log drain destination created"),a(!1)},onError:()=>{d.Am.error("Failed to create log drain"),a(!1)}}),{mutate:N,isLoading:w}=eo({onSuccess:()=>{d.Am.success("Log drain updated"),a(!1)},onError:()=>{a(!1),d.Am.error("Failed to update log drain")}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(en._S,{children:(0,r.jsxs)(en.tU,{className:"flex flex-row justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(en.q7,{children:"Log Drains"}),(0,r.jsx)(en.FW,{children:"Send your project logs to third party destinations"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(C.z,{type:"default",icon:(0,r.jsx)(l.Z,{strokeWidth:1.5}),asChild:!0,children:(0,r.jsx)(i(),{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/log-drains",children:"Documentation"})}),(null==v?void 0:v.length)!==0&&(0,r.jsx)(C.z,{disabled:!g||!e,onClick:()=>{h(null),m("create"),a(!0)},type:"primary",children:"Add destination"})]})]})}),(0,r.jsxs)(en._S,{className:"flex flex-col gap-10",bottomPadding:!0,children:[(0,r.jsx)(F,{mode:p,open:t,onOpenChange:e=>{e||h(null),a(e)},defaultValues:{type:(null==u?void 0:u.type)||"webhook",...u},isLoading:y||w,onSubmit:e=>{let{name:t,description:a,type:r,...n}=e,l={name:t,description:a||"",type:r,config:n,id:null==u?void 0:u.id,projectRef:s,token:null==u?void 0:u.token};if("create"===p)b(l);else if(l.id&&(null==u?void 0:u.token))N(l);else throw Error("Log drain ID and token is required")}}),e?(0,r.jsx)(ea,{onUpdateDrainClick:function(e){h(e),m("update"),a(!0)},onNewDrainClick:function(e){h({type:e}),m("create"),a(!0)}}):(0,r.jsx)(ec.bZ,{variant:"default",children:"You do not have permission to manage log drains"})]})]})};eu.getLayout=e=>(0,r.jsx)(er.Z,{title:"Log Drains",children:e});var eh=eu},67767:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(46145).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},69548:function(e,t,a){"use strict";a.d(t,{b:function(){return i}});var r=a(52322),n=a(2784),l=a(2322);let s=(0,n.forwardRef)((e,t)=>(0,r.jsx)("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...e,children:(0,r.jsx)("path",{"fill-rule":"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z","clip-rule":"evenodd"})})),i=(0,n.forwardRef)((e,t)=>{let{...a}=e;return(0,r.jsxs)(l.u,{children:[(0,r.jsx)(l.aJ,{type:"button",role:"button",className:"flex [&_svg]:data-[state=delayed-open]:fill-foreground-lighter [&_svg]:data-[state=instant-open]:fill-foreground-lighter",children:(0,r.jsx)(s,{strokeWidth:2,className:"transition-colors fill-foreground-muted w-4 h-4"})}),(0,r.jsx)(l._v,{...a})]})})},62949:function(e,t,a){"use strict";a.d(t,{Bw:function(){return j},DI:function(){return p},Ph:function(){return h},Ql:function(){return y},U$:function(){return N},i4:function(){return x},ki:function(){return m},n5:function(){return b}});var r=a(52322),n=a(38947),l=a(78232),s=a(20670),i=a(76141),o=a(2784),d=a(54383),c=a(10929),u=a(75109);let h=n.fC,p=n.ZA,m=n.B4,f=(0,c.j)("",{variants:{size:{...u.Ld}},defaultVariants:{size:u.Rc}}),x=o.forwardRef((e,t)=>{let{className:a,children:s,size:i,...o}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex w-full items-center justify-between rounded-md border border-strong hover:border-stronger bg-alternative dark:bg-muted hover:bg-selection text-xs ring-offset-background-control placeholder:text-foreground-muted focus:outline-none ring-border-control focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200","data-[state=open]:bg-selection data-[state=open]:border-stronger",f({size:i}),a),...o,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 text-foreground-muted"})})]})});x.displayName=n.xz.displayName;let g=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",a),...l,children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})});g.displayName=n.u_.displayName;let v=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});v.displayName=n.$G.displayName;let j=o.forwardRef((e,t)=>{let{className:a,children:l,position:s="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-overlay text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...i,children:[(0,r.jsx)(g,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(v,{})]})})});j.displayName=n.VY.displayName;let b=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-xs text-foreground-lighter/75 uppercase tracking-wider font-mono",a),...l})});b.displayName=n.__.displayName;let y=o.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("group","relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-overlay-hover text-foreground-light focus:text-foreground data-[state=checked]:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{className:"h-3.5 w-3.5 bg-foreground rounded-full flex justify-center items-center",children:(0,r.jsx)(i.Z,{className:"h-2 w-2 text-background-overlay",strokeWidth:6})})}),(0,r.jsx)(n.eT,{children:l})]})});y.displayName=n.ck.displayName;let N=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-border-overlay",a),...l})});N.displayName=n.Z0.displayName},7117:function(e,t,a){"use strict";a.d(t,{DN:function(){return v},Ei:function(){return y},FF:function(){return j},Tu:function(){return g},aM:function(){return c},bC:function(){return b},sw:function(){return u},ue:function(){return x},yo:function(){return d}});var r=a(52322),n=a(70241),l=a(10929),s=a(2784),i=a(8609),o=a(54383);let d=n.fC,c=n.xz,u=n.x8;(0,l.j)("fixed inset-0 z-50 flex",{variants:{side:{top:"items-start",bottom:"items-end",left:"justify-start",right:"justify-end"}},defaultVariants:{side:"right"}});let h=e=>{let{side:t,children:a,...l}=e;return(0,r.jsx)(n.h_,{...l,children:a})};h.displayName=n.h_.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsx)(n.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-alternative/90 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",a),...s,ref:t})});p.displayName=n.aV.displayName;let m=(0,o.cn)(["fixed z-50 scale-100 gap-4 bg-studio opacity-100 shadow-lg","data-[state=open]:animate-in data-[state=open]:duration-300 data-[state=closed]:animate-out data-[state=closed]:duration-300"]),f=(0,l.j)(m,{variants:{side:{top:"data-[state=open]:slide-in-from-top data-[state=closed]:slide-out-to-top w-full border-b inset-x-0 top-0",bottom:"data-[state=open]:slide-in-from-bottom data-[state=closed]:slide-out-to-bottom w-full border-t inset-x-0 bottom-0",left:"data-[state=open]:slide-in-from-left data-[state=closed]:slide-out-to-left h-full border-r inset-y-0 left-0",right:"data-[state=open]:slide-in-from-right data-[state=closed]:slide-out-to-right h-full border-l inset-y-0 right-0"},size:{content:"",default:"",sm:"",lg:"",xl:"",xxl:"",full:""}},compoundVariants:[{side:["top","bottom"],size:"content",class:"max-h-screen"},{side:["top","bottom"],size:"default",class:"h-1/3"},{side:["top","bottom"],size:"sm",class:"h-1/4"},{side:["top","bottom"],size:"lg",class:"h-1/2"},{side:["top","bottom"],size:"xl",class:"h-5/6"},{side:["top","bottom"],size:"full",class:"h-screen"},{side:["right","left"],size:"content",class:"max-w-screen"},{side:["right","left"],size:"default",class:"w-1/3"},{side:["right","left"],size:"sm",class:"w-1/4"},{side:["right","left"],size:"lg",class:"w-1/2"},{side:["right","left"],size:"xl",class:"w-4/6"},{side:["right","left"],size:"xxl",class:"w-5/6"},{side:["right","left"],size:"full",class:"w-screen"}],defaultVariants:{side:"right",size:"default"}}),x=s.forwardRef((e,t)=>{let{side:a,size:l,className:s,children:d,showClose:c=!0,...u}=e;return(0,r.jsxs)(h,{side:a,children:[(0,r.jsx)(p,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)(f({side:a,size:l}),s),...u,children:[d,c?(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]}):null]})]})});x.displayName=n.VY.displayName;let g=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("px-5 py-4 text-center sm:text-left border-b bg-dash-sidebar",t),...a})};g.displayName="SheetHeader";let v=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("px-content py-content",t),...a})};v.displayName="SheetSection";let j=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("px-5 py-3 border-t w-full","flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};j.displayName="SheetFooter";let b=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg text-foreground",a),...l})});b.displayName=n.Dx.displayName;let y=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-foreground-light",a),...l})});y.displayName=n.dk.displayName},6019:function(e,t,a){"use strict";a.d(t,{ck:function(){return L},fC:function(){return V},z$:function(){return P}});var r=a(7896),n=a(2784),l=a(17998),s=a(62656),i=a(92211),o=a(72714),d=a(2923),c=a(87695),u=a(59241),h=a(35019),p=a(90022),m=a(79616);let f="Radio",[x,g]=(0,i.b)(f),[v,j]=x(f),b=(0,n.forwardRef)((e,t)=>{let{__scopeRadio:a,name:i,checked:d=!1,required:c,disabled:u,value:h="on",onCheck:p,...m}=e,[f,x]=(0,n.useState)(null),g=(0,s.e)(t,e=>x(e)),j=(0,n.useRef)(!1),b=!f||!!f.closest("form");return(0,n.createElement)(v,{scope:a,checked:d,disabled:u},(0,n.createElement)(o.WV.button,(0,r.Z)({type:"button",role:"radio","aria-checked":d,"data-state":w(d),"data-disabled":u?"":void 0,disabled:u,value:h},m,{ref:g,onClick:(0,l.M)(e.onClick,e=>{d||null==p||p(),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})),b&&(0,n.createElement)(N,{control:f,bubbles:!j.current,name:i,value:h,checked:d,required:c,disabled:u,style:{transform:"translateX(-100%)"}}))}),y=(0,n.forwardRef)((e,t)=>{let{__scopeRadio:a,forceMount:l,...s}=e,i=j("RadioIndicator",a);return(0,n.createElement)(m.z,{present:l||i.checked},(0,n.createElement)(o.WV.span,(0,r.Z)({"data-state":w(i.checked),"data-disabled":i.disabled?"":void 0},s,{ref:t})))}),N=e=>{let{control:t,checked:a,bubbles:l=!0,...s}=e,i=(0,n.useRef)(null),o=(0,p.D)(a),d=(0,h.t)(t);return(0,n.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&t){let r=new Event("click",{bubbles:l});t.call(e,a),e.dispatchEvent(r)}},[o,a,l]),(0,n.createElement)("input",(0,r.Z)({type:"radio","aria-hidden":!0,defaultChecked:a},s,{tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function w(e){return e?"checked":"unchecked"}let k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],z="RadioGroup",[C,E]=(0,i.b)(z,[d.Pc,g]),R=(0,d.Pc)(),_=g(),[S,D]=C(z),Z=(0,n.forwardRef)((e,t)=>{let{__scopeRadioGroup:a,name:l,defaultValue:s,value:i,required:h=!1,disabled:p=!1,orientation:m,dir:f,loop:x=!0,onValueChange:g,...v}=e,j=R(a),b=(0,u.gm)(f),[y,N]=(0,c.T)({prop:i,defaultProp:s,onChange:g});return(0,n.createElement)(S,{scope:a,name:l,required:h,disabled:p,value:y,onValueChange:N},(0,n.createElement)(d.fC,(0,r.Z)({asChild:!0},j,{orientation:m,dir:b,loop:x}),(0,n.createElement)(o.WV.div,(0,r.Z)({role:"radiogroup","aria-required":h,"aria-orientation":m,"data-disabled":p?"":void 0,dir:b},v,{ref:t}))))}),A=(0,n.forwardRef)((e,t)=>{let{__scopeRadioGroup:a,disabled:i,...o}=e,c=D("RadioGroupItem",a),u=c.disabled||i,h=R(a),p=_(a),m=(0,n.useRef)(null),f=(0,s.e)(t,m),x=c.value===o.value,g=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{let e=e=>{k.includes(e.key)&&(g.current=!0)},t=()=>g.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,n.createElement)(d.ck,(0,r.Z)({asChild:!0},h,{focusable:!u,active:x}),(0,n.createElement)(b,(0,r.Z)({disabled:u,required:c.required,checked:x},p,o,{name:c.name,ref:f,onCheck:()=>c.onValueChange(o.value),onKeyDown:(0,l.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,l.M)(o.onFocus,()=>{var e;g.current&&(null===(e=m.current)||void 0===e||e.click())})})))}),T=(0,n.forwardRef)((e,t)=>{let{__scopeRadioGroup:a,...l}=e,s=_(a);return(0,n.createElement)(y,(0,r.Z)({},s,l,{ref:t}))}),V=Z,L=A,P=T},16530:function(e,t,a){"use strict";a.d(t,{bU:function(){return N},fC:function(){return y}});var r=a(7896),n=a(2784),l=a(17998),s=a(62656),i=a(92211),o=a(87695),d=a(90022),c=a(35019),u=a(72714);let h="Switch",[p,m]=(0,i.b)(h),[f,x]=p(h),g=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,name:i,checked:d,defaultChecked:c,required:h,disabled:p,value:m="on",onCheckedChange:x,...g}=e,[v,y]=(0,n.useState)(null),N=(0,s.e)(t,e=>y(e)),w=(0,n.useRef)(!1),k=!v||!!v.closest("form"),[z=!1,C]=(0,o.T)({prop:d,defaultProp:c,onChange:x});return(0,n.createElement)(f,{scope:a,checked:z,disabled:p},(0,n.createElement)(u.WV.button,(0,r.Z)({type:"button",role:"switch","aria-checked":z,"aria-required":h,"data-state":b(z),"data-disabled":p?"":void 0,disabled:p,value:m},g,{ref:N,onClick:(0,l.M)(e.onClick,e=>{C(e=>!e),k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),k&&(0,n.createElement)(j,{control:v,bubbles:!w.current,name:i,value:m,checked:z,required:h,disabled:p,style:{transform:"translateX(-100%)"}}))}),v=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,...l}=e,s=x("SwitchThumb",a);return(0,n.createElement)(u.WV.span,(0,r.Z)({"data-state":b(s.checked),"data-disabled":s.disabled?"":void 0},l,{ref:t}))}),j=e=>{let{control:t,checked:a,bubbles:l=!0,...s}=e,i=(0,n.useRef)(null),o=(0,d.D)(a),u=(0,c.t)(t);return(0,n.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&t){let r=new Event("click",{bubbles:l});t.call(e,a),e.dispatchEvent(r)}},[o,a,l]),(0,n.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:a},s,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function b(e){return e?"checked":"unchecked"}let y=g,N=v}},function(e){e.O(0,[8421,8183,6334,5746,1357,2474,5590,6128,6875,7280,2569,7914,5700,8507,9428,5029,4689,2687,2888,9774,179],function(){return e(e.s=49282)}),_N_E=e.O()}]);