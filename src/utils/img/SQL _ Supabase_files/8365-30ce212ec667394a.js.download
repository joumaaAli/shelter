"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8365],{78365:function(e,t,i){i.d(t,{U7:function(){return q},dU:function(){return ev},SK:function(){return eU},uW:function(){return eJ},m9:function(){return e2},gn:function(){return t$}});var s=i(52322),n=i(59491),r=i(2784),a=i(56958),l=i(48601),o=i(99959),d=i(6554),c=i(70987),u=i(67873),h=i(4787),p=i(14782),E=i(75716),m=i(33635),g=i(95569),_=i(93463),x=i(87175),T=i(89823),b=i(99248),S=i(28879),A=i.n(S),N=i(48188),f=i(31634),j=i(14048),L=i(13252),R=i(750),y=i(32079),v=i(4419),I=i(22854),O=i(62284);function w(e){return A()(e).format("dddd, MMMM D, YYYY HH:mm:ss Z")}var C=e=>{let{name:t,properties:i,formValues:n,disabled:a=!1}=e,[l,o]=(0,r.useState)(!!i.isSecret),[d,c]=(0,r.useState)(n[t]?w(new Date(n[t])):"");if((0,r.useEffect)(()=>{i.show&&i.show.key&&!n[i.show.key]&&(n[t]="",c(""))},[i.show&&i.show.key&&!n[i.show.key]]),i.show){if(i.show.matches){if(!i.show.matches.includes(n[i.show.key]))return null}else if(!n[i.show.key])return null}switch(i.type){case"datetime":return(0,s.jsx)(R.Z,{size:"small",layout:"vertical",id:t,name:t,type:"text",value:d,readOnly:!0,label:i.title,labelOptional:i.descriptionOptional?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:(0,s.jsx)(L.M,{selectsRange:!1,minDate:new Date,from:n[t],to:n[t],onChange:e=>{e&&e.to?(n[t]=e.to,c(w(new Date(e.to)))):(c(""),n[t]="")},children:(0,s.jsx)("span",{children:"Pick"})})});case"string":return(0,s.jsx)(R.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:a,type:l?"password":"text",label:i.title,labelOptional:i.descriptionOptional?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:i.isSecret?(0,s.jsx)(y.z,{icon:l?(0,s.jsx)(N.Z,{}):(0,s.jsx)(f.Z,{}),type:"default",onClick:()=>o(!l)}):(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:i.units?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"multiline-string":return(0,s.jsx)(R.Z.TextArea,{size:"small",layout:"vertical",id:t,name:t,disabled:a,type:l?"password":"text",label:i.title,labelOptional:i.descriptionOptional?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):void 0,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:i.isSecret?(0,s.jsx)(y.z,{icon:l?(0,s.jsx)(N.Z,{}):(0,s.jsx)(f.Z,{}),type:"default",onClick:()=>o(!l)}):(0,s.jsx)("span",{className:"mr-3 text-scale-900",children:i.units?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"number":return(0,s.jsx)(v.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:a,label:i.title,labelOptional:i.descriptionOptional?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:i.units?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"boolean":return(0,s.jsx)(I.Z,{size:"small",id:t,name:t,disabled:a,label:i.title,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:i.description}):null});case"select":return(0,s.jsx)(O.Z,{size:"small",name:t,disabled:a,label:i.title,descriptionText:i.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:i.description}):null,defaultValue:i.enum[0],children:i.enum.map(e=>(0,s.jsx)(O.Z.Option,{id:e.value,label:e.label,value:e.value,addOnBefore:()=>e.icon?(0,s.jsx)("img",{className:"h-6 w-6",src:"".concat(b.GW,"/img/icons/").concat(e.icon)}):null,children:e.label},e.value))})}return(0,s.jsx)(s.Fragment,{})},D=i(95492),P=i(37970),M=i(62277);let U=(0,l.object)({JWT_EXP:(0,l.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value"),REFRESH_TOKEN_ROTATION_ENABLED:(0,l.boolean)().required(),SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:(0,l.number)().min(0,"Must be a value more than 0").required("Must have a Reuse Interval value"),MFA_PHONE_OTP_LENGTH:(0,l.number)().min(6,"Must be a value 6 or larger").max(30,"must be a value no greater than 30"),MFA_PHONE_TEMPLATE:(0,l.string)().required("SMS template is required."),MFA_MAX_ENROLLED_FACTORS:(0,l.number)().min(0,"Must be be a value more than 0").max(30,"Must be a value no greater than 30"),DB_MAX_POOL_SIZE:(0,l.number)().min(1,"Must be 1 or larger").max(200,"Must be a value no greater than 200"),API_MAX_REQUEST_DURATION:(0,l.number)().min(5,"Must be 5 or larger").max(30,"Must be a value no greater than 30"),MFA_TOTP:(0,l.string)().required(),MFA_PHONE:(0,l.string)().required()});function k(e,t){return e?t?"Enabled":"Verify Enabled":"Disabled"}let X=[{label:"Enabled",value:"Enabled"},{label:"Verify Enabled",value:"Verify Enabled"},{label:"Disabled",value:"Disabled"}],B=e=>"Enabled"===e?{verifyEnabled:!0,enrollEnabled:!0}:"Verify Enabled"===e?{verifyEnabled:!0,enrollEnabled:!1}:{verifyEnabled:!1,enrollEnabled:!1};var q=()=>{var e,t,i;let{ref:l}=(0,o.UO)(),{data:S,error:A,isLoading:N,isError:f,isSuccess:j}=(0,m.$E)({projectRef:l}),{mutate:L,isLoading:R}=(0,g._)(),y="auth-config-advanced-form",O=(0,x.Xo)(n.KA.READ,"custom_config_gotrue"),w=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue"),q=(0,T.l)(),{data:K,isSuccess:F}=(0,_.Gl)({orgSlug:null==q?void 0:q.slug}),Z=F&&"free"!==K.plan.id&&"pro"!==K.plan.id,V=F&&(null==K?void 0:null===(e=K.plan)||void 0===e?void 0:e.id)!=="free",z=b.Qy&&!V,H=null==K?void 0:K.project_addons.find(e=>e.ref===l);null==H||H.addons.some(e=>"auth_mfa_phone"===e.type);let G=b.Qy&&!Z,W={SITE_URL:null==S?void 0:S.SITE_URL,JWT_EXP:null==S?void 0:S.JWT_EXP,REFRESH_TOKEN_ROTATION_ENABLED:(null==S?void 0:S.REFRESH_TOKEN_ROTATION_ENABLED)||!1,MFA_PHONE_OTP_LENGTH:(null==S?void 0:S.MFA_PHONE_OTP_LENGTH)||6,MFA_PHONE_TEMPLATE:(null==S?void 0:S.MFA_PHONE_TEMPLATE)||"Your code is {{ .Code }}",SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:null==S?void 0:S.SECURITY_REFRESH_TOKEN_REUSE_INTERVAL,MFA_MAX_ENROLLED_FACTORS:(null==S?void 0:S.MFA_MAX_ENROLLED_FACTORS)||10,DB_MAX_POOL_SIZE:(null==S?void 0:S.DB_MAX_POOL_SIZE)||10,API_MAX_REQUEST_DURATION:(null==S?void 0:S.API_MAX_REQUEST_DURATION)||10,MFA_TOTP:k(null===(t=null==S?void 0:S.MFA_TOTP_VERIFY_ENABLED)||void 0===t||t,null===(i=null==S?void 0:S.MFA_TOTP_ENROLL_ENABLED)||void 0===i||i)||"Enabled",MFA_PHONE:k((null==S?void 0:S.MFA_PHONE_VERIFY_ENABLED)||!1,(null==S?void 0:S.MFA_PHONE_ENROLL_ENABLED)||!1)||"Disabled"},Y=(null==S?void 0:S.HOOK_SEND_SMS_URI)!==null&&(null==S?void 0:S.HOOK_SEND_SMS_ENABLED)===!0,$=(null==S?void 0:S.EXTERNAL_PHONE_ENABLED)===!0&&((null==S?void 0:S.SMS_PROVIDER)==="twilio"||(null==S?void 0:S.SMS_PROVIDER)==="vonage")||Y,J="Enabled"===W.MFA_PHONE||"Verify Enabled"===W.MFA_PHONE;return f?(0,s.jsxs)(D.bZ,{variant:"destructive",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(D.X,{children:A.message})]}):O?(0,s.jsx)(M.Z,{id:y,initialValues:W,onSubmit:(e,t)=>{let{resetForm:i}=t,s={...e},{verifyEnabled:n,enrollEnabled:r}=B(e.MFA_TOTP);if(V){let{verifyEnabled:t,enrollEnabled:i}=B(e.MFA_PHONE);s={...s,MFA_PHONE_ENROLL_ENABLED:i,MFA_PHONE_VERIFY_ENABLED:t}}s={...s,MFA_TOTP_ENROLL_ENABLED:r,MFA_TOTP_VERIFY_ENABLED:n},delete s.MFA_TOTP,delete s.MFA_PHONE,Z||(delete s.DB_MAX_POOL_SIZE,delete s.API_MAX_REQUEST_DURATION),L({projectRef:l,config:s},{onError:e=>{a.Am.error("Failed to update settings: ".concat(null==e?void 0:e.message))},onSuccess:()=>{a.Am.success("Successfully updated settings"),i({values:e,initialValues:e})}})},validationSchema:U,children:e=>{let{handleReset:t,resetForm:i,values:n,initialValues:a}=e,l=JSON.stringify(n)!==JSON.stringify(a);(0,r.useEffect)(()=>{j&&i({values:W,initialValues:W})},[j]);let o="Disabled"===W.MFA_PHONE&&n.MFA_PHONE!==W.MFA_PHONE;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.p,{title:"Advanced Settings",description:"These settings rarely need to be changed."}),(0,s.jsxs)(u.by,{disabled:!0,footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(d.i,{form:y,isSubmitting:R,hasChanges:l,handleReset:t,disabled:!w,helper:w?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Access Tokens (JWT)"}),children:(0,s.jsx)(h.B4,{loading:N,children:(0,s.jsx)(v.Z,{id:"JWT_EXP",size:"small",label:"Access token (JWT) expiry time",descriptionText:"How long access tokens are valid for before a refresh token has to be used. Recommendation: 3600 (1 hour).",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!w})})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Refresh Tokens"}),children:(0,s.jsxs)(h.B4,{loading:N,children:[(0,s.jsx)(I.Z,{id:"REFRESH_TOKEN_ROTATION_ENABLED",size:"small",label:"Detect and revoke potentially compromised refresh tokens",layout:"flex",descriptionText:"Prevent replay attacks from potentially compromised refresh tokens. Recommendation: ON.",disabled:!w}),n.REFRESH_TOKEN_ROTATION_ENABLED&&(0,s.jsx)(v.Z,{id:"SECURITY_REFRESH_TOKEN_REUSE_INTERVAL",size:"small",min:0,label:"Refresh token reuse interval",descriptionText:"Time interval where the same refresh token can be used multiple times to request for an access token. Recommendation: 10 seconds.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!w})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Multi-Factor Authentication (MFA)"}),children:(0,s.jsxs)(h.B4,{loading:N,children:[(0,s.jsx)(C,{name:"MFA_TOTP",properties:{type:"select",title:"TOTP (App Authenticator)",description:"Control use of TOTP (App Authenticator) factors",enum:X},formValues:n,disabled:!w}),(0,s.jsx)(v.Z,{id:"MFA_MAX_ENROLLED_FACTORS",size:"small",label:"Maximum number of per-user MFA factors",descriptionText:"How many MFA factors can be enrolled at once per user.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"factors"}),disabled:!w})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Advanced MFA"}),children:(0,s.jsxs)(h.B4,{loading:N,children:[z&&(0,s.jsx)(E.Z,{primaryText:"Upgrade to Pro",secondaryText:"Advanced MFA requires the Pro Plan"}),(0,s.jsx)(C,{name:"MFA_PHONE",properties:{type:"select",title:"Phone",description:"Control use of phone factors",enum:X},formValues:n,disabled:!w||!V}),!$&&J&&(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Please configure a valid phone provider. Only Twilio, Vonage, and Send SMS Hooks are supported at this time."})]}),(0,s.jsx)(v.Z,{id:"MFA_PHONE_OTP_LENGTH",size:"small",label:"Phone OTP Length",descriptionText:"Number of digits in OTP",disabled:!w||!V}),(0,s.jsx)(C,{name:"MFA_PHONE_TEMPLATE",properties:{title:"Phone verification message",type:"multiline-string",description:"To format the OTP code use `{{ .Code }}`"},formValues:n,disabled:!w||!V}),o&&(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Enabling advanced MFA with phone will result in an additional charge of $75 per month for the first project in the organization and an additional $10 per month for additional projects."})]})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Max Direct Database Connections"}),children:(0,s.jsxs)(h.B4,{loading:N,children:[G&&(0,s.jsx)(E.Z,{primaryText:"Upgrade to Team or Enterprise",secondaryText:"Max Direct Database Connections settings are only available on the Team Plan and up.",buttonText:"Upgrade to Team"}),(0,s.jsx)(v.Z,{id:"DB_MAX_POOL_SIZE",size:"small",label:"Max direct database connections used by Auth",descriptionText:"Auth will take up no more than this number of connections from the total number of available connections to serve requests. These connections are not reserved, so when unused they are released.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"connections"}),disabled:!w||!Z})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Max Request Duration"}),children:(0,s.jsxs)(h.B4,{loading:N,children:[G&&(0,s.jsx)(E.Z,{primaryText:"Upgrade to Team or Enterprise",secondaryText:"Max Request Duration settings are only available on the Team Plan and up.",buttonText:"Upgrade to Team"}),(0,s.jsx)(v.Z,{id:"API_MAX_REQUEST_DURATION",size:"small",label:"Maximum time allowed for an Auth request to last",descriptionText:"Number of seconds to wait for an Auth request to complete before canceling it. In certain high-load situations setting a larger or smaller value can be used to control load-shedding. Recommended: 10 seconds.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!w||!Z})]})})]})]})}}):(0,s.jsx)(p.Z,{resourceText:"view auth configuration settings"})},K=i(17172),F=i(39097),Z=i.n(F),V=i(65565),z=i(35648);let H=e=>atob(e.replace(/[-]/g,"+").replace(/[_]/g,"/")),G="http://json-schema.org/draft-07/schema#",W={$schema:G,type:"object",title:"Email",link:"https://supabase.com/docs/guides/auth/passwords",properties:{EXTERNAL_EMAIL_ENABLED:{title:"Enable Email provider",description:"This will enable Email based signup and login for your application",type:"boolean"},MAILER_AUTOCONFIRM:{title:"Confirm email",description:"Users will need to confirm their email address before signing in for the first time.",type:"boolean"},MAILER_SECURE_EMAIL_CHANGE_ENABLED:{title:"Secure email change",description:"Users will be required to confirm any email change on both the old email address and new email address.\n      If disabled, only the new email is required to confirm.",type:"boolean"},SECURITY_UPDATE_PASSWORD_REQUIRE_REAUTHENTICATION:{title:"Secure password change",description:"Users will need to be recently logged in to change their password without requiring reauthentication.\n      If disabled, a user can change their password at any time.",type:"boolean"},MAILER_OTP_EXP:{title:"Email OTP Expiration",type:"number",description:"Duration before an email otp / link expires.",units:"seconds"},MAILER_OTP_LENGTH:{title:"Email OTP Length",type:"number",description:"Number of digits in the email OTP",units:"number"}},validationSchema:(0,l.object)().shape({MAILER_OTP_EXP:(0,l.number)().min(0,"Must be more than 0").max(86400,"Must be no more than 86400").required("This is required"),MAILER_OTP_LENGTH:(0,l.number)().min(6,"Must be at least 6").max(10,"Must be no more than 10")}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},Y=(e,t)=>({is:(i,s)=>i&&s===t&&!e.HOOK_SEND_SMS_ENABLED}),$=e=>(0,l.object)().shape({EXTERNAL_PHONE_ENABLED:(0,l.boolean)().required(),SMS_PROVIDER:(0,l.string)(),SMS_TWILIO_ACCOUNT_SID:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio"),then:e=>e.required("Twilio Account SID is required"),otherwise:e=>e}),SMS_TWILIO_AUTH_TOKEN:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio"),then:e=>e.required("Twilio Auth Token is required"),otherwise:e=>e}),SMS_TWILIO_MESSAGE_SERVICE_SID:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio"),then:e=>e.required("Twilio Message Service SID is required"),otherwise:e=>e}),SMS_TWILIO_VERIFY_ACCOUNT_SID:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio_verify"),then:e=>e.required("Twilio Verify Account SID is required"),otherwise:e=>e}),SMS_TWILIO_VERIFY_AUTH_TOKEN:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio_verify"),then:e=>e.required("Twilio Verify Auth Token is required"),otherwise:e=>e}),SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"twilio_verify"),then:e=>e.required("Twilio Verify Service SID is required"),otherwise:e=>e}),SMS_MESSAGEBIRD_ACCESS_KEY:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"messagebird"),then:e=>e.required("Messagebird Access Key is required"),otherwise:e=>e}),SMS_MESSAGEBIRD_ORIGINATOR:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"messagebird"),then:e=>e.required("Messagebird Originator is required"),otherwise:e=>e}),SMS_TEXTLOCAL_API_KEY:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"textlocal"),then:e=>e.required("Textlocal API Key is required"),otherwise:e=>e}),SMS_TEXTLOCAL_SENDER:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"textlocal"),then:e=>e.required("Textlocal Sender is required"),otherwise:e=>e}),SMS_VONAGE_API_KEY:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"vonage"),then:e=>e.required("Vonage API is required"),otherwise:e=>e}),SMS_VONAGE_API_SECRET:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"vonage"),then:e=>e.required("Vonage API Secret is required"),otherwise:e=>e}),SMS_VONAGE_FROM:(0,l.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{...Y(e,"vonage"),then:e=>e.required("Vonage From is required"),otherwise:e=>e}),SMS_OTP_EXP:(0,l.number)().min(0,"Must be more than 0").required("This is required"),SMS_OTP_LENGTH:(0,l.number)().min(6,"Must be 6 or more in length").required("This is required"),SMS_TEMPLATE:(0,l.string)().required("SMS template is required."),SMS_TEST_OTP:(0,l.string)().matches(/^\s*([0-9]{1,15}=[0-9]+)(\s*,\s*[0-9]{1,15}=[0-9]+)*\s*$/g,"Must be a comma-separated list of <phone number>=<OTP> pairs. Phone numbers should be in international format, without spaces, dashes or the + prefix. Example: 123456789=987654").trim().transform(e=>e.replace(/\s+/g,"")),SMS_TEST_OTP_VALID_UNTIL:(0,l.string)().when(["SMS_TEST_OTP"],{is:e=>!!e,then:e=>e.required("You must provide a valid until date."),otherwise:e=>e.transform(e=>"")})}),J={$schema:G,type:"object",title:"Apple",link:"https://supabase.com/docs/guides/auth/social-login/auth-apple",properties:{EXTERNAL_APPLE_ENABLED:{title:"Enable Sign in with Apple",description:"Enables Sign in with Apple on the web using OAuth or natively within iOS, macOS, watchOS or tvOS apps.",type:"boolean"},EXTERNAL_APPLE_CLIENT_ID:{title:"Service ID (for OAuth)",description:"Client identifier used in the OAuth flow on the web.\n[Learn more](https://developer.apple.com/documentation/sign_in_with_apple/configuring_your_environment_for_sign_in_with_apple)",type:"string"},EXTERNAL_APPLE_SECRET:{title:"Secret Key (for OAuth)",description:"Secret key used in the OAuth flow.\n[Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#generate-a-client_secret)",type:"string",isSecret:!0},EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (iOS, macOS, watchOS, tvOS bundle IDs or service IDs)",description:"Comma separated list of allowed Apple app bundle IDs for native sign in, or service IDs for Sign in with Apple JS. [Learn more](https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js)",type:"string"}},validationSchema:(0,l.object)().shape({EXTERNAL_APPLE_ENABLED:(0,l.boolean)().required(),EXTERNAL_APPLE_SECRET:(0,l.string)().when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:(e,t)=>e&&!!t,then:e=>e.required("Secret key is required when using the OAuth flow.").matches(/^[a-z0-9_-]+([.][a-z0-9_-]+){2}$/i,"Secret key should be a JWT.").test({message:"Secret key is not a correctly generated JWT.",test:e=>{if(!e)return!0;try{let t=e.split(".").map(e=>H(e)),i=JSON.parse(t[0]),s=JSON.parse(t[1]);return"object"==typeof i&&"object"==typeof s&&i&&s&&"ES256"===i.alg&&"https://appleid.apple.com"===s.aud}catch(e){return console.log(e),!1}return!0}}).test({message:"Secret key expires in less than 7 days!",test:e=>{if(!e)return!0;try{let t=e.split(".").map(e=>H(e)),i=JSON.parse(t[1]);return Date.now()>i.exp-6048e5}catch(e){return console.log(e),!1}return!0}})}).when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_APPLE_CLIENT_ID"],{is:(e,t,i)=>e&&!!t&&!i,then:e=>e.matches(/^$/,"Secret Key should only be set if Service ID for OAuth is provided.")}),EXTERNAL_APPLE_CLIENT_ID:(0,l.string)().matches(/^[a-z0-9.-]+$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app)."),EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:(0,l.string)().matches(/^([.a-z0-9-]+(,\s*[.a-z0-9-]+)*,*\s*)?$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app). You must only use explicit bundle IDs, asterisks (*) are not allowed.").when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:(e,t)=>e&&!t,then:e=>e.required("At least one Authorized Client ID is required when not using the OAuth flow.")})}),misc:{iconKey:"apple-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign in with Apple on the web in the Apple Developer Center.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)",alert:{title:"Apple OAuth secret keys expire every 6 months",description:"A new secret should be generated every 6 months, otherwise users on the web will not be able to sign in."}}},Q={$schema:G,type:"object",title:"Azure",link:"https://supabase.com/docs/guides/auth/social-login/auth-azure",properties:{EXTERNAL_AZURE_ENABLED:{title:"Azure enabled",type:"boolean"},EXTERNAL_AZURE_CLIENT_ID:{title:"Application (client) ID",type:"string"},EXTERNAL_AZURE_SECRET:{title:"Secret Value",description:"Enter the data from Value, not the Secret ID. [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-azure#obtain-a-secret-id)",type:"string",isSecret:!0},EXTERNAL_AZURE_URL:{title:"Azure Tenant URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,l.object)().shape({EXTERNAL_AZURE_ENABLED:(0,l.boolean)().required(),EXTERNAL_AZURE_CLIENT_ID:(0,l.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:e=>e.required("Application (client) ID is required"),otherwise:e=>e}),EXTERNAL_AZURE_SECRET:(0,l.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:e=>e.required("Secret Value is required"),otherwise:e=>e}),EXTERNAL_AZURE_URL:(0,l.string)().matches(z.y,"Must be a valid URL").optional()}),misc:{iconKey:"microsoft-icon",requiresRedirect:!0}},ee={$schema:G,type:"object",title:"Bitbucket",link:"https://supabase.com/docs/guides/auth/social-login/auth-bitbucket",properties:{EXTERNAL_BITBUCKET_ENABLED:{title:"Bitbucket enabled",type:"boolean"},EXTERNAL_BITBUCKET_CLIENT_ID:{title:"Key",type:"string"},EXTERNAL_BITBUCKET_SECRET:{title:"Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_BITBUCKET_ENABLED:(0,l.boolean)().required(),EXTERNAL_BITBUCKET_CLIENT_ID:(0,l.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:e=>e.required("Key is required"),otherwise:e=>e}),EXTERNAL_BITBUCKET_SECRET:(0,l.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:e=>e.required("Secret is required"),otherwise:e=>e})}),misc:{iconKey:"bitbucket-icon",requiresRedirect:!0}},et={$schema:G,type:"object",title:"Discord",link:"https://supabase.com/docs/guides/auth/social-login/auth-discord?",properties:{EXTERNAL_DISCORD_ENABLED:{title:"Discord enabled",type:"boolean"},EXTERNAL_DISCORD_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_DISCORD_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_DISCORD_ENABLED:(0,l.boolean)().required(),EXTERNAL_DISCORD_CLIENT_ID:(0,l.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_DISCORD_SECRET:(0,l.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"discord-icon",requiresRedirect:!0}},ei={$schema:G,type:"object",title:"Facebook",link:"https://supabase.com/docs/guides/auth/social-login/auth-facebook",properties:{EXTERNAL_FACEBOOK_ENABLED:{title:"Facebook enabled",type:"boolean"},EXTERNAL_FACEBOOK_CLIENT_ID:{title:"Facebook client ID",type:"string"},EXTERNAL_FACEBOOK_SECRET:{title:"Facebook secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_FACEBOOK_ENABLED:(0,l.boolean)().required(),EXTERNAL_FACEBOOK_CLIENT_ID:(0,l.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:e=>e.required('"Facebook client ID" is required'),otherwise:e=>e}),EXTERNAL_FACEBOOK_SECRET:(0,l.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:e=>e.required('"Facebook secret" is required'),otherwise:e=>e})}),misc:{iconKey:"facebook-icon",requiresRedirect:!0}},es={$schema:G,type:"object",title:"Figma",link:"https://supabase.com/docs/guides/auth/social-login/auth-figma",properties:{EXTERNAL_FIGMA_ENABLED:{title:"Figma enabled",type:"boolean"},EXTERNAL_FIGMA_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_FIGMA_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_FIGMA_ENABLED:(0,l.boolean)().required(),EXTERNAL_FIGMA_CLIENT_ID:(0,l.string)().when("EXTERNAL_FIGMA_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_FIGMA_SECRET:(0,l.string)().when("EXTERNAL_FIGMA_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"figma-icon",requiresRedirect:!0}},en={$schema:G,type:"object",title:"GitHub",link:"https://supabase.com/docs/guides/auth/social-login/auth-github",properties:{EXTERNAL_GITHUB_ENABLED:{title:"GitHub enabled",type:"boolean"},EXTERNAL_GITHUB_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_GITHUB_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_GITHUB_ENABLED:(0,l.boolean)().required(),EXTERNAL_GITHUB_CLIENT_ID:(0,l.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_GITHUB_SECRET:(0,l.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"github-icon",requiresRedirect:!0}},er={$schema:G,type:"object",title:"GitLab",link:"https://supabase.com/docs/guides/auth/social-login/auth-gitlab",properties:{EXTERNAL_GITLAB_ENABLED:{title:"GitLab enabled",type:"boolean"},EXTERNAL_GITLAB_CLIENT_ID:{title:"Application ID",type:"string"},EXTERNAL_GITLAB_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_GITLAB_URL:{title:"Self Hosted GitLab URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,l.object)().shape({EXTERNAL_GITLAB_ENABLED:(0,l.boolean)().required(),EXTERNAL_GITLAB_CLIENT_ID:(0,l.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_GITLAB_SECRET:(0,l.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e}),EXTERNAL_GITLAB_URL:(0,l.string)().matches(z.y,"Must be a valid URL").optional()}),misc:{iconKey:"gitlab-icon",requiresRedirect:!0}},ea={$schema:G,type:"object",title:"Google",link:"https://supabase.com/docs/guides/auth/social-login/auth-google",properties:{EXTERNAL_GOOGLE_ENABLED:{title:"Enable Sign in with Google",description:"Enables Sign in with Google on the web using OAuth or One Tap, or in Android apps or Chrome extensions.",type:"boolean"},EXTERNAL_GOOGLE_CLIENT_ID:{title:"Client ID (for OAuth)",description:"Client ID to use with the OAuth flow on the web.",type:"string"},EXTERNAL_GOOGLE_SECRET:{title:"Client Secret (for OAuth)",description:"Client Secret to use with the OAuth flow on the web.",type:"string",isSecret:!0},EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (for Android, One Tap, and Chrome extensions)",description:"Comma separated list of client IDs of Android apps, One Tap or Chrome extensions that are allowed to log in to your project.",type:"string"},EXTERNAL_GOOGLE_SKIP_NONCE_CHECK:{title:"Skip nonce checks",description:"Allows ID tokens with any nonce to be accepted, which is less secure. Useful in situations where you don't have access to the nonce used to issue the ID token, such with iOS.",type:"boolean"}},validationSchema:(0,l.object)().shape({EXTERNAL_GOOGLE_ENABLED:(0,l.boolean)().required(),EXTERNAL_GOOGLE_SECRET:(0,l.string)().when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:(e,t)=>e&&!!t,then:e=>e.matches(/^[a-z0-9.\/_-]*$/i,"Invalid characters. Google OAuth Client Secrets usually contain letters, numbers, dots, dashes and underscores.").required("Client Secret is required when using the OAuth flow.")}).when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_GOOGLE_CLIENT_ID"],{is:(e,t,i)=>e&&!!t&&!i,then:e=>e.matches(/^$/,"Client Secret should only be set when Client ID for OAuth is set.")}),EXTERNAL_GOOGLE_CLIENT_ID:(0,l.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)+)?$/i,"Invalid characters. Google OAuth Client IDs are usually a domain-name (e.g. 01234567890-abcdefghijklmnopqrstuvwxyz012345.apps.googleusercontent.com)."),EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:(0,l.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)*(,\s*[a-z0-9-]+([.][a-z0-9-]+)*)*,*\s*)?$/i,"Invalid characters. Google Client IDs are usually a domain-name style string (e.g. com.example.com.app or *.apps.googleusercontent.com).").when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:(e,t)=>e&&!t,then:e=>e.required("At least one Authorized Client ID is required when not using the OAuth flow.")}),EXTERNAL_GOOGLE_SKIP_NONCE_CHECK:(0,l.boolean)().required()}),misc:{iconKey:"google-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign-in with Google on the web using OAuth.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-google#configure-your-services-id)"}},el={$schema:G,type:"object",title:"Kakao",link:"https://supabase.com/docs/guides/auth/social-login/auth-kakao",properties:{EXTERNAL_KAKAO_ENABLED:{title:"Kakao enabled",type:"boolean"},EXTERNAL_KAKAO_CLIENT_ID:{title:"REST API Key",type:"string"},EXTERNAL_KAKAO_SECRET:{title:"Client Secret Code",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_KAKAO_ENABLED:(0,l.boolean)().required(),EXTERNAL_KAKAO_CLIENT_ID:(0,l.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:e=>e.required("REST API Key is required"),otherwise:e=>e}),EXTERNAL_KAKAO_SECRET:(0,l.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:e=>e.required("Client Secret Code is required"),otherwise:e=>e})}),misc:{iconKey:"kakao-icon",requiresRedirect:!0}},eo={$schema:G,type:"object",title:"KeyCloak",link:"https://supabase.com/docs/guides/auth/social-login/auth-keycloak",properties:{EXTERNAL_KEYCLOAK_ENABLED:{title:"Keycloak enabled",type:"boolean"},EXTERNAL_KEYCLOAK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_KEYCLOAK_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_KEYCLOAK_URL:{title:"Realm URL",description:"",type:"string"}},validationSchema:(0,l.object)().shape({EXTERNAL_KEYCLOAK_ENABLED:(0,l.boolean)().required(),EXTERNAL_KEYCLOAK_CLIENT_ID:(0,l.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_KEYCLOAK_SECRET:(0,l.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:e=>e.required("Client secret is required"),otherwise:e=>e}),EXTERNAL_KEYCLOAK_URL:(0,l.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:e=>e.matches(z.y,"Must be a valid URL").required("Realm URL is required"),otherwise:e=>e.matches(z.y,"Must be a valid URL")})}),misc:{iconKey:"keycloak-icon",requiresRedirect:!0}},ed={$schema:G,type:"object",title:"LinkedIn (OIDC)",link:"https://supabase.com/docs/guides/auth/social-login/auth-linkedin",properties:{EXTERNAL_LINKEDIN_OIDC_ENABLED:{title:"LinkedIn enabled",type:"boolean"},EXTERNAL_LINKEDIN_OIDC_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_LINKEDIN_OIDC_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_LINKEDIN_OIDC_ENABLED:(0,l.boolean)().required(),EXTERNAL_LINKEDIN_OIDC_CLIENT_ID:(0,l.string)().when("EXTERNAL_LINKEDIN_OIDC_ENABLED",{is:!0,then:e=>e.required("API Key is required"),otherwise:e=>e}),EXTERNAL_LINKEDIN_OIDC_SECRET:(0,l.string)().when("EXTERNAL_LINKEDIN_OIDC_ENABLED",{is:!0,then:e=>e.required("API Secret Key is required"),otherwise:e=>e})}),misc:{iconKey:"linkedin-icon",requiresRedirect:!0}},ec={$schema:G,type:"object",title:"Notion",link:"https://supabase.com/docs/guides/auth/social-login/auth-notion",properties:{EXTERNAL_NOTION_ENABLED:{title:"Notion enabled",type:"boolean"},EXTERNAL_NOTION_CLIENT_ID:{title:"OAuth client ID",type:"string"},EXTERNAL_NOTION_SECRET:{title:"OAuth client secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_NOTION_ENABLED:(0,l.boolean)().required(),EXTERNAL_NOTION_CLIENT_ID:(0,l.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:e=>e.required("OAuth client ID is required"),otherwise:e=>e}),EXTERNAL_NOTION_SECRET:(0,l.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:e=>e.required("OAuth client secret is required"),otherwise:e=>e})}),misc:{iconKey:"notion-icon",requiresRedirect:!0}},eu={$schema:G,type:"object",title:"Twitch",link:"https://supabase.com/docs/guides/auth/social-login/auth-twitch",properties:{EXTERNAL_TWITCH_ENABLED:{title:"Twitch enabled",type:"boolean"},EXTERNAL_TWITCH_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_TWITCH_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_TWITCH_ENABLED:(0,l.boolean)().required(),EXTERNAL_TWITCH_CLIENT_ID:(0,l.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_TWITCH_SECRET:(0,l.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:e=>e.required("Client secret is required"),otherwise:e=>e})}),misc:{iconKey:"twitch-icon",requiresRedirect:!0}},eh={$schema:G,type:"object",title:"Twitter",link:"https://supabase.com/docs/guides/auth/social-login/auth-twitter",properties:{EXTERNAL_TWITTER_ENABLED:{title:"Twitter enabled",type:"boolean"},EXTERNAL_TWITTER_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_TWITTER_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_TWITTER_ENABLED:(0,l.boolean)().required(),EXTERNAL_TWITTER_CLIENT_ID:(0,l.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:e=>e.required("API Key is required"),otherwise:e=>e}),EXTERNAL_TWITTER_SECRET:(0,l.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:e=>e.required("API Secret Key is required"),otherwise:e=>e})}),misc:{iconKey:"twitter-icon",requiresRedirect:!0}},ep={$schema:G,type:"object",title:"Slack (Deprecated)",link:"https://supabase.com/docs/guides/auth/social-login/auth-slack",properties:{EXTERNAL_SLACK_ENABLED:{title:"Slack enabled",type:"boolean"},EXTERNAL_SLACK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SLACK_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_SLACK_ENABLED:(0,l.boolean)().required(),EXTERNAL_SLACK_CLIENT_ID:(0,l.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_SLACK_SECRET:(0,l.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"slack-icon",requiresRedirect:!0}},eE={$schema:G,type:"object",title:"Slack (OIDC)",link:"https://supabase.com/docs/guides/auth/social-login/auth-slack",properties:{EXTERNAL_SLACK_OIDC_ENABLED:{title:"Slack enabled",type:"boolean"},EXTERNAL_SLACK_OIDC_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SLACK_OIDC_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_SLACK_OIDC_ENABLED:(0,l.boolean)().required(),EXTERNAL_SLACK_OIDC_CLIENT_ID:(0,l.string)().when("EXTERNAL_SLACK_OIDC_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_SLACK_OIDC_SECRET:(0,l.string)().when("EXTERNAL_SLACK_OIDC_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"slack-icon",requiresRedirect:!0}},em={$schema:G,type:"object",title:"Spotify",link:"https://supabase.com/docs/guides/auth/social-login/auth-spotify",properties:{EXTERNAL_SPOTIFY_ENABLED:{title:"Spotify enabled",type:"boolean"},EXTERNAL_SPOTIFY_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SPOTIFY_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_SPOTIFY_ENABLED:(0,l.boolean)().required(),EXTERNAL_SPOTIFY_CLIENT_ID:(0,l.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_SPOTIFY_SECRET:(0,l.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"spotify-icon",requiresRedirect:!0}},eg={$schema:G,type:"object",title:"WorkOS",link:"https://supabase.com/docs/guides/auth/social-login/auth-workos",properties:{EXTERNAL_WORKOS_ENABLED:{title:"WorkOS enabled",type:"boolean"},EXTERNAL_WORKOS_URL:{title:"WorkOS URL",type:"string"},EXTERNAL_WORKOS_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_WORKOS_SECRET:{title:"Secret Key",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_WORKOS_ENABLED:(0,l.boolean)().required(),EXTERNAL_WORKOS_URL:(0,l.string)().matches(z.y,"Must be a valid URL").when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:e=>e.required("WorkOS URL is required"),otherwise:e=>e}),EXTERNAL_WORKOS_CLIENT_ID:(0,l.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_WORKOS_SECRET:(0,l.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:e=>e.required("Client Secret is required"),otherwise:e=>e})}),misc:{iconKey:"workos-icon",requiresRedirect:!0}},e_={$schema:G,type:"object",title:"Zoom",link:"https://supabase.com/docs/guides/auth/social-login/auth-zoom",properties:{EXTERNAL_ZOOM_ENABLED:{title:"Zoom enabled",type:"boolean"},EXTERNAL_ZOOM_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_ZOOM_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,l.object)().shape({EXTERNAL_ZOOM_ENABLED:(0,l.boolean)().required(),EXTERNAL_ZOOM_CLIENT_ID:(0,l.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:e=>e.required("Client ID is required"),otherwise:e=>e}),EXTERNAL_ZOOM_SECRET:(0,l.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:e=>e.required("Client secret is required"),otherwise:e=>e})}),misc:{iconKey:"zoom-icon",requiresRedirect:!0}},ex={$schema:G,type:"object",title:"SAML 2.0",link:"https://supabase.com/docs/guides/auth/enterprise-sso",properties:{SAML_ENABLED:{title:"Enable SAML 2.0 Single Sign-on",description:"You will need to use the [Supabase CLI](https://supabase.com/docs/guides/auth/sso/auth-sso-saml#managing-saml-20-connections) to set up SAML after enabling it",type:"boolean"},SAML_EXTERNAL_URL:{title:"SAML metadata URL",description:"You may use a different SAML metadata URL from what is defined with the API External URL. Please validate that your SAML External URL can reach the Custom Domain or Project URL.",descriptionOptional:"Optional",type:"string"},SAML_ALLOW_ENCRYPTED_ASSERTIONS:{title:"Allow encrypted SAML Assertions",description:"Some SAML Identity Providers require support for encrypted assertions. Usually this is not necessary.",descriptionOptional:"Optional",type:"boolean"}},validationSchema:(0,l.object)().shape({SAML_ENABLED:(0,l.boolean)().required(),SAML_EXTERNAL_URL:(0,l.string)().matches(z.y,"Must be a valid URL").optional(),SAML_ALLOW_ENCRYPTED_ASSERTIONS:(0,l.boolean)().optional()}),misc:{iconKey:"saml-icon"}},eT=[W,{$schema:G,type:"object",title:"Phone",link:"https://supabase.com/docs/guides/auth/phone-login",properties:{EXTERNAL_PHONE_ENABLED:{title:"Enable Phone provider",description:"This will enable phone based login for your application",type:"boolean"},SMS_PROVIDER:{type:"select",title:"SMS provider",description:"External provider that will handle sending SMS messages",enum:[{label:"Twilio",value:"twilio",icon:"twilio-icon.svg"},{label:"Messagebird",value:"messagebird",icon:"messagebird-icon.svg"},{label:"Textlocal",value:"textlocal",icon:"textlocal-icon.png"},{label:"Vonage",value:"vonage",icon:"vonage-icon.svg"},{label:"Twilio Verify",value:"twilio_verify",icon:"twilio-icon.svg"}]},SMS_TWILIO_ACCOUNT_SID:{type:"string",title:"Twilio Account SID",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Message Service SID",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_CONTENT_SID:{type:"string",title:"Twilio Content SID (Optional, For WhatsApp Only)",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_VERIFY_ACCOUNT_SID:{type:"string",title:"Twilio Account SID",show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_TWILIO_VERIFY_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Verify Service SID",show:{key:"SMS_PROVIDER",matches:["twilio_verify"]}},SMS_MESSAGEBIRD_ACCESS_KEY:{type:"string",title:"Messagebird Access Key",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_MESSAGEBIRD_ORIGINATOR:{type:"string",title:"Messagebird Originator",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_TEXTLOCAL_API_KEY:{type:"string",title:"Textlocal API Key",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_TEXTLOCAL_SENDER:{type:"string",title:"Textlocal Sender",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_VONAGE_API_KEY:{type:"string",title:"Vonage API Key",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_API_SECRET:{type:"string",title:"Vonage API Secret",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_FROM:{type:"string",title:"Vonage From",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_AUTOCONFIRM:{title:"Enable phone confirmations",type:"boolean",description:"Users will need to confirm their phone number before signing in."},SMS_OTP_EXP:{title:"SMS OTP Expiry",type:"number",description:"Duration before an SMS OTP expires",units:"seconds",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_OTP_LENGTH:{title:"SMS OTP Length",type:"number",description:"Number of digits in OTP",units:"digits",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_TEMPLATE:{title:"SMS Message",type:"multiline-string",description:"To format the OTP code use `{{ .Code }}`",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_TEST_OTP:{type:"string",title:"Test Phone Numbers and OTPs",description:"Register phone number and OTP combinations for testing as a comma separated list of <phone number>=<otp> pairs. Example: `18005550123=789012`"},SMS_TEST_OTP_VALID_UNTIL:{type:"datetime",title:"Test OTPs Valid Until",description:"Test phone number and OTP combinations won't be active past this date and time (local time zone).",show:{key:"SMS_TEST_OTP"}}},validationSchema:null,misc:{iconKey:"phone-icon4",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},ex,J,Q,ee,et,ei,es,en,er,ea,el,eo,ed,ec,eu,eh,eE,ep,em,eg,e_],eb=["bg-surface-100","hover:bg-overlay-hover","data-open:bg-selection","border-default","hover:border-strong data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border shadow","transition","first:rounded-tl","first:rounded-tr","last:rounded-bl","last:rounded-br","hover:z-50"];var eS=i(20670),eA=i(76141),eN=i(44778),ef=i(53535),ej=i(22721),eL=i(11992),eR=i(48869),ey=e=>{var t;let{config:i,provider:l}=e,[d,c]=(0,r.useState)(!1),{ref:u}=(0,o.UO)(),{mutate:h,isLoading:p}=(0,g._)(),E=["MAILER_AUTOCONFIRM","SMS_AUTOCONFIRM"],m=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue"),_=e=>{let t=i.HOOK_SEND_SMS_ENABLED&&e.startsWith("SMS_")&&!["SMS_AUTOCONFIRM","SMS_OTP_EXP","SMS_OTP_LENGTH","SMS_OTP_LENGTH","SMS_TEMPLATE","SMS_TEST_OTP","SMS_TEST_OTP_VALID_UNTIL"].includes(e);return["EXTERNAL_SLACK_CLIENT_ID","EXTERNAL_SLACK_SECRET"].includes(e)||t},T=e=>{switch(e){case"Slack (Deprecated)":return(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Slack (Deprecated) Provider"}),(0,s.jsxs)(D.X,{children:["Recently, Slack has updated their OAuth API. Please use the new Slack (OIDC) provider below. Developers using this provider should move over to the new provider. Please refer to our"," ",(0,s.jsx)("a",{href:"https://supabase.com/docs/guides/auth/social-login/auth-slack",className:"underline",target:"_blank",children:"documentation"})," ","for more details."]})]});case"Phone":return i.HOOK_SEND_SMS_ENABLED&&(0,s.jsxs)(D.bZ,{children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"SMS provider settings are disabled while the SMS hook is enabled."}),(0,s.jsxs)(D.X,{className:"flex flex-col gap-y-3",children:[(0,s.jsx)("p",{children:"The SMS hook will be used in place of the SMS provider configured"}),(0,s.jsx)(y.z,{asChild:!0,type:"default",className:"w-min",icon:(0,s.jsx)(K.Z,{}),children:(0,s.jsx)(Z(),{href:"/project/".concat(u,"/auth/hooks"),children:"View auth hooks"})})]})]});default:return null}},{data:S}=(0,ef.q)({projectRef:u}),A="".concat(null==S?void 0:S.autoApiService.protocol,"://").concat(null==S?void 0:S.autoApiService.endpoint),{data:N}=(0,ej.z)({projectRef:u}),f="SAML 2.0"===l.title&&i&&i.SAML_ENABLED,L="LinkedIn (OIDC)"===l.title&&i&&i.EXTERNAL_LINKEDIN_OIDC_ENABLED,v="Slack (OIDC)"===l.title&&i.EXTERNAL_SLACK_OIDC_ENABLED,I=i&&i["EXTERNAL_".concat(null==l?void 0:null===(t=l.title)||void 0===t?void 0:t.toUpperCase(),"_ENABLED")],O=(()=>{let e={};return Object.keys(l.properties).forEach(t=>{let s=E.includes(t);if("SAML 2.0"===l.title){let s=i[t];e[t]=s||"boolean"!==l.properties[t].type&&""}else if(s)e[t]=!i[t];else{let s=i[t];e[t]=s||"boolean"!==l.properties[t].type&&""}}),e})();return(0,s.jsxs)(eL.ZP,{open:d,onOpenChange:c,className:eb.join(" "),children:[(0,s.jsx)(eL.ZP.Trigger,{asChild:!0,children:(0,s.jsxs)("button",{type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-6 text-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eS.Z,{className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,s.jsx)("img",{src:"".concat(b.GW,"/img/icons/").concat(l.misc.iconKey,".svg"),width:18,alt:"".concat(l.title," auth icon")}),(0,s.jsx)("span",{className:"text-sm",children:l.title})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:f||I||L||v?(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-400 bg-brand-200 py-1 px-1 text-xs text-brand",children:[(0,s.jsx)("span",{className:"rounded-full bg-brand p-0.5 text-xs text-brand-200",children:(0,s.jsx)(eA.Z,{strokeWidth:2,size:12})}),(0,s.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,s.jsx)("div",{className:"rounded-md border border-strong bg-surface-100 py-1 px-3 text-xs text-foreground-lighter",children:"Disabled"})})]})}),(0,s.jsx)(M.Z,{name:"provider-".concat(l.title,"-form"),initialValues:O,validationSchema:l.validationSchema,onSubmit:(e,t)=>{let{resetForm:i}=t,s={...e};Object.keys(e).map(t=>{E.includes(t)&&(s[t]=!e[t]),""===s[t]&&(s[t]=null)}),h({projectRef:u,config:s},{onSuccess:()=>{i({values:{...e},initialValues:{...e}}),c(!1),a.Am.success("Successfully updated settings")}})},children:e=>{var t,i,n;let{handleReset:r,initialValues:a,values:o}=e,d=JSON.stringify(a)===JSON.stringify(o);return(0,s.jsx)(eL.ZP.Content,{children:(0,s.jsx)("div",{className:"group border-t border-strong bg-surface-100 py-6 px-6 text-foreground",children:(0,s.jsxs)("div",{className:"mx-auto my-6 max-w-lg space-y-6",children:[T(l.title),Object.keys(l.properties).map(e=>(0,s.jsx)(C,{name:e,properties:l.properties[e],formValues:o,disabled:_(e)||!m},e)),(null==l?void 0:null===(t=l.misc)||void 0===t?void 0:t.alert)&&(0,s.jsx)(eR.b,{title:l.misc.alert.title,variant:"warning",withIcon:!0,children:(0,s.jsx)(j.D,{children:l.misc.alert.description})}),l.misc.requiresRedirect&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(R.Z,{copy:!0,readOnly:!0,disabled:!0,label:"Callback URL (for OAuth)",value:(null==N?void 0:null===(i=N.customDomain)||void 0===i?void 0:i.status)==="active"?"https://".concat(null===(n=N.customDomain)||void 0===n?void 0:n.hostname,"/auth/v1/callback"):"".concat(A,"/auth/v1/callback"),descriptionText:(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:l.misc.helper})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(y.z,{asChild:!0,type:"default",icon:(0,s.jsx)(K.Z,{strokeWidth:1.5}),children:(0,s.jsx)(Z(),{href:l.link,target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,s.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,s.jsx)(y.z,{type:"default",htmlType:"reset",onClick:()=>{r(),c(!1)},disabled:p,children:"Cancel"}),(0,s.jsx)(eN.u,{htmlType:"submit",loading:p,disabled:p||!m||d,tooltip:{content:{side:"bottom",text:m?void 0:"You need additional permissions to update provider settings"}},children:"Save"})]})]})]})})})}})]})},ev=()=>{let{ref:e}=(0,o.UO)(),{isLoading:t,error:i,isError:n,data:r,isSuccess:a}=(0,m.$E)({projectRef:e});return(0,s.jsxs)("div",{children:[(0,s.jsx)(c.p,{title:"Auth Providers",description:"Authenticate your users through a suite of providers and login methods"}),(0,s.jsxs)("div",{className:"-space-y-px",children:[(null==r?void 0:r.EXTERNAL_EMAIL_ENABLED)&&(null==r?void 0:r.MAILER_OTP_EXP)>3600&&(0,s.jsxs)(D.bZ,{className:"flex w-full items-center justify-between my-3",variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(D.Cd,{children:"OTP expiry exceeds recommended threshold"}),(0,s.jsxs)(D.X,{className:"flex flex-col gap-y-3",children:[(0,s.jsx)("p",{children:"We have detected that you have enabled the email provider with the OTP expiry set to more than an hour. It is recommended to set this value to less than an hour."}),(0,s.jsx)(y.z,{asChild:!0,type:"default",className:"w-min",icon:(0,s.jsx)(K.Z,{}),children:(0,s.jsx)(Z(),{href:"https://supabase.com/docs/guides/platform/going-into-prod#security",children:"View security recommendations"})})]})]})]}),t&&eT.map(e=>(0,s.jsx)("div",{className:[...eb,"px-6 py-3"].join(" "),children:(0,s.jsx)(V.p,{})},"provider_".concat(e.title))),n&&(0,s.jsxs)(D.bZ,{variant:"destructive",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(D.X,{children:i.message})]}),a&&eT.map(e=>{let t="Phone"===e.title?{...e,validationSchema:$(r)}:e;return(0,s.jsx)(ey,{config:r,provider:t},"provider_".concat(t.title))})]})]})},eI=i(80435);let eO="NO_REQUIRED_CHARS",ew="abcdefghijklmnopqrstuvwxyz:ABCDEFGHIJKLMNOPQRSTUVWXYZ:0123456789",eC=ew+":!@#$%^&*()_+-=[]{};'\\\\:\"|<>?,./`~",eD=(0,l.object)({DISABLE_SIGNUP:(0,l.boolean)().required(),EXTERNAL_ANONYMOUS_USERS_ENABLED:(0,l.boolean)().required(),SECURITY_MANUAL_LINKING_ENABLED:(0,l.boolean)().required(),SITE_URL:(0,l.string)().required("Must have a Site URL"),SECURITY_CAPTCHA_ENABLED:(0,l.boolean)().required(),SECURITY_CAPTCHA_SECRET:(0,l.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:e=>e.required("Must have a Captcha secret")}),SECURITY_CAPTCHA_PROVIDER:(0,l.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:e=>e.oneOf(["hcaptcha","turnstile"]).required("Captcha provider must be either hcaptcha or turnstile")}),SESSIONS_TIMEBOX:(0,l.number)().min(0,"Must be a positive number"),SESSIONS_INACTIVITY_TIMEOUT:(0,l.number)().min(0,"Must be a positive number"),SESSIONS_SINGLE_PER_USER:(0,l.boolean)(),PASSWORD_MIN_LENGTH:(0,l.number)().min(6,"Must be greater or equal to 6."),PASSWORD_REQUIRED_CHARACTERS:(0,l.string)(),PASSWORD_HIBP_ENABLED:(0,l.boolean)()});function eP(e){let{value:t}=e;return 0===t?"never":1===t?"hour":"hours"}let eM="auth-config-basic-settings";var eU=()=>{var e;let{ref:t}=(0,o.UO)(),{data:i,error:l,isLoading:c,isError:S,isSuccess:A}=(0,m.$E)({projectRef:t}),{mutate:j,isLoading:L}=(0,g._)(),[O,w]=(0,r.useState)(!0),U=(0,x.Xo)(n.KA.READ,"custom_config_gotrue"),k=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue"),X=(0,T.l)(),{data:B,isSuccess:q}=(0,_.Gl)({orgSlug:null==X?void 0:X.slug},{enabled:b.Qy}),F=q&&(null==B?void 0:null===(e=B.plan)||void 0===e?void 0:e.id)!=="free",V=b.Qy&&!F,z={DISABLE_SIGNUP:!(null==i?void 0:i.DISABLE_SIGNUP),EXTERNAL_ANONYMOUS_USERS_ENABLED:null==i?void 0:i.EXTERNAL_ANONYMOUS_USERS_ENABLED,SECURITY_MANUAL_LINKING_ENABLED:(null==i?void 0:i.SECURITY_MANUAL_LINKING_ENABLED)||!1,SITE_URL:null==i?void 0:i.SITE_URL,SECURITY_CAPTCHA_ENABLED:(null==i?void 0:i.SECURITY_CAPTCHA_ENABLED)||!1,SECURITY_CAPTCHA_SECRET:(null==i?void 0:i.SECURITY_CAPTCHA_SECRET)||"",SECURITY_CAPTCHA_PROVIDER:(null==i?void 0:i.SECURITY_CAPTCHA_PROVIDER)||"hcaptcha",SESSIONS_TIMEBOX:(null==i?void 0:i.SESSIONS_TIMEBOX)||0,SESSIONS_INACTIVITY_TIMEOUT:(null==i?void 0:i.SESSIONS_INACTIVITY_TIMEOUT)||0,SESSIONS_SINGLE_PER_USER:(null==i?void 0:i.SESSIONS_SINGLE_PER_USER)||!1,PASSWORD_MIN_LENGTH:(null==i?void 0:i.PASSWORD_MIN_LENGTH)||6,PASSWORD_REQUIRED_CHARACTERS:(null==i?void 0:i.PASSWORD_REQUIRED_CHARACTERS)||eO,PASSWORD_HIBP_ENABLED:(null==i?void 0:i.PASSWORD_HIBP_ENABLED)||!1};return S?(0,s.jsxs)(D.bZ,{variant:"destructive",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(D.X,{children:l.message})]}):U?(0,s.jsx)(M.Z,{id:eM,initialValues:z,onSubmit:(e,i)=>{let{resetForm:s}=i,n={...e};n.DISABLE_SIGNUP=!e.DISABLE_SIGNUP,n.PASSWORD_REQUIRED_CHARACTERS===eO&&(n.PASSWORD_REQUIRED_CHARACTERS=""),j({projectRef:t,config:n},{onError:e=>{a.Am.error("Failed to update settings:  ".concat(null==e?void 0:e.message))},onSuccess:()=>{a.Am.success("Successfully updated settings"),s({values:e,initialValues:e})}})},validationSchema:eD,children:e=>{let{handleReset:i,resetForm:n,values:a,initialValues:l}=e,o=JSON.stringify(a)!==JSON.stringify(l);return(0,r.useEffect)(()=>{A&&n({values:z,initialValues:z})},[A]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(u.by,{disabled:!0,footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(d.i,{form:eM,isSubmitting:L,hasChanges:o,handleReset:i,disabled:!k,helper:k?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"User Signups"}),children:(0,s.jsxs)(h.B4,{loading:c,children:[(0,s.jsx)(I.Z,{id:"DISABLE_SIGNUP",size:"small",label:"Allow new users to sign up",layout:"flex",descriptionText:"If this is disabled, new users will not be able to sign up to your application.",disabled:!k}),(0,s.jsx)(I.Z,{id:"SECURITY_MANUAL_LINKING_ENABLED",size:"small",label:"Allow manual linking",layout:"flex",descriptionText:(0,s.jsx)(eI.U,{extLinks:!0,className:"[&>p>a]:text-foreground-light [&>p>a]:transition-all [&>p>a]:hover:text-foreground [&>p>a]:hover:decoration-brand",content:"Enable [manual linking APIs](https://supabase.com/docs/guides/auth/auth-identity-linking#manual-linking-beta) for your project."}),disabled:!k}),(0,s.jsx)(I.Z,{id:"EXTERNAL_ANONYMOUS_USERS_ENABLED",size:"small",label:"Allow anonymous sign-ins",layout:"flex",descriptionText:(0,s.jsx)(eI.U,{extLinks:!0,className:"[&>p>a]:text-foreground-light [&>p>a]:transition-all [&>p>a]:hover:text-foreground [&>p>a]:hover:decoration-brand",content:"Enable [anonymous sign-ins](https://supabase.com/docs/guides/auth/auth-anonymous) for your project."}),disabled:!k}),a.EXTERNAL_ANONYMOUS_USERS_ENABLED&&(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsxs)(D.bZ,{className:"flex w-full items-center justify-between",variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(D.Cd,{children:["Anonymous users will use the"," ",(0,s.jsx)("code",{className:"text-xs",children:"authenticated"})," role when signing in"]}),(0,s.jsxs)(D.X,{className:"flex flex-col gap-y-3",children:[(0,s.jsxs)("p",{children:["As a result, anonymous users will be subjected to RLS policies that apply to the ",(0,s.jsx)("code",{className:"text-xs",children:"public"})," and"," ",(0,s.jsx)("code",{className:"text-xs",children:"authenticated"})," roles. We strongly advise"," ",(0,s.jsx)(Z(),{href:"/project/".concat(t,"/auth/policies"),className:"text-foreground underline",children:"reviewing your RLS policies"})," ","to ensure that access to your data is restricted where required."]}),(0,s.jsx)(y.z,{asChild:!0,type:"default",className:"w-min",icon:(0,s.jsx)(K.Z,{}),children:(0,s.jsx)(Z(),{href:"/docs/guides/auth/auth-anonymous#access-control",children:"View access control docs"})})]})]})]}),!a.SECURITY_CAPTCHA_ENABLED&&(0,s.jsxs)(D.bZ,{children:[(0,s.jsx)(P.aN,{}),(0,s.jsxs)(D.Cd,{children:["We highly recommend"," ",(0,s.jsx)("span",{tabIndex:1,className:"cursor-pointer underline",onClick:()=>{let e=document.getElementById("enable-captcha");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},children:"enabling captcha"})," ","for anonymous sign-ins"]}),(0,s.jsx)(D.X,{children:"This will prevent potential abuse on sign-ins which may bloat your database and incur costs for monthly active users (MAU)"})]})]})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"Passwords"}),children:(0,s.jsxs)(h.B4,{loading:c,children:[(0,s.jsx)(v.Z,{id:"PASSWORD_MIN_LENGTH",size:"small",label:"Minimum password length",descriptionText:"Passwords shorter than this value will be rejected as weak. Minimum 6, recommended 8 or more.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"characters"}),disabled:!k}),(0,s.jsx)(C,{name:"PASSWORD_REQUIRED_CHARACTERS",properties:{type:"select",title:"Password Requirements",description:"Passwords that do not have at least one of each will be rejected as weak.",enum:[{label:"No required characters (default)",value:eO},{label:"Letters and digits",value:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ:0123456789"},{label:"Lowercase, uppercase letters and digits",value:ew},{label:"Lowercase, uppercase letters, digits and symbols (recommended)",value:eC}]},formValues:a}),V?(0,s.jsx)(E.Z,{primaryText:"Upgrade to Pro",secondaryText:"Leaked password protection available on Pro plans and up."}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(I.Z,{id:"PASSWORD_HIBP_ENABLED",size:"small",label:"Prevent use of leaked passwords",afterLabel:" (recommended)",layout:"flex",descriptionText:"Rejects the use of known or easy to guess passwords on sign up or password change. Powered by the HaveIBeenPwned.org Pwned Passwords API.",disabled:!k||!F})]})}),(0,s.jsx)(h.hj,{header:(0,s.jsx)(h.S0,{children:"User Sessions"}),children:(0,s.jsxs)(h.B4,{loading:c,children:[V?(0,s.jsx)(E.Z,{primaryText:"Upgrade to Pro",secondaryText:"Configuring user sessions requires the Pro Plan."}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(I.Z,{id:"SESSIONS_SINGLE_PER_USER",size:"small",label:"Enforce single session per user",layout:"flex",descriptionText:"If enabled, all but a user's most recently active session will be terminated.",disabled:!k||!F}),(0,s.jsx)(v.Z,{id:"SESSIONS_TIMEBOX",size:"small",label:"Time-box user sessions",descriptionText:"The amount of time before a user is forced to sign in again. Use 0 for never",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:(0,s.jsx)(eP,{value:a.SESSIONS_TIMEBOX})}),disabled:!k||!F}),(0,s.jsx)(v.Z,{id:"SESSIONS_INACTIVITY_TIMEOUT",size:"small",label:"Inactivity timeout",descriptionText:"The amount of time a user needs to be inactive to be forced to sign in again. Use 0 for never.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:(0,s.jsx)(eP,{value:a.SESSIONS_INACTIVITY_TIMEOUT})}),disabled:!k||!F})]})}),(0,s.jsx)(h.hj,{id:"enable-captcha",header:(0,s.jsx)(h.S0,{children:"Bot and Abuse Protection"}),children:(0,s.jsxs)(h.B4,{loading:c,children:[(0,s.jsx)(I.Z,{id:"SECURITY_CAPTCHA_ENABLED",size:"small",label:"Enable Captcha protection",layout:"flex",descriptionText:"Protect authentication endpoints from bots and abuse.",disabled:!k}),a.SECURITY_CAPTCHA_ENABLED&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{name:"SECURITY_CAPTCHA_PROVIDER",properties:{type:"select",title:"Choose Captcha Provider",description:"",enum:[{label:"hCaptcha",value:"hcaptcha",icon:"hcaptcha-icon.png"},{label:"Turnstile by Cloudflare",value:"turnstile",icon:"cloudflare-icon.png"}]},formValues:a}),(0,s.jsx)(R.Z,{id:"SECURITY_CAPTCHA_SECRET",type:O?"password":"text",size:"small",label:"Captcha secret",descriptionText:"Obtain this secret from the provider.",disabled:!k,actions:(0,s.jsx)(y.z,{icon:O?(0,s.jsx)(N.Z,{}):(0,s.jsx)(f.Z,{}),type:"default",onClick:()=>w(!O)})})]})]})})]})})}}):(0,s.jsx)(p.Z,{resourceText:"view auth configuration settings"})},ek=i(41679),eX=i(9015);let eB="http://json-schema.org/draft-07/schema#",eq={$schema:eB,id:"CONFIRMATION",type:"object",title:"Confirm signup",properties:{MAILER_SUBJECTS_CONFIRMATION:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_CONFIRMATION_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the e-mail address for the new account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n- `{{ .RedirectTo }}` : The URL of `emailRedirectTo` passed in options\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_CONFIRMATION:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},eK={$schema:eB,id:"INVITE",type:"object",title:"Invite user",properties:{MAILER_SUBJECTS_INVITE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_INVITE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to accept the invitation to create an account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n- `{{ .RedirectTo }}` : The URL of `redirectTo` passed in options\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_INVITE:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},eF={$schema:eB,id:"MAGIC_LINK",type:"object",title:"Magic Link",properties:{MAILER_SUBJECTS_MAGIC_LINK:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_MAGIC_LINK_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL for a one-time login to the user's account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n- `{{ .RedirectTo }}` : The URL of `emailRedirectTo` passed in options\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_MAGIC_LINK:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},eZ=[eq,eK,eF,{$schema:eB,id:"EMAIL_CHANGE",type:"object",title:"Change Email Address",properties:{MAILER_SUBJECTS_EMAIL_CHANGE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_EMAIL_CHANGE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the email change\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The original user's email address\n- `{{ .NewEmail }}` : The user's new email address\n- `{{ .Data }}` : The user's `user_metadata`\n- `{{ .RedirectTo }}` : The URL of `emailRedirectTo` passed in options\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_EMAIL_CHANGE:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:eB,id:"RECOVERY",type:"object",title:"Reset Password",properties:{MAILER_SUBJECTS_RECOVERY:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_RECOVERY_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the password reset\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n- `{{ .RedirectTo }}` : The URL of `redirectTo` passed in options\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_RECOVERY:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:eB,id:"REAUTHENTICATION",type:"object",title:"Reauthentication",properties:{MAILER_SUBJECTS_REAUTHENTICATION:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_REAUTHENTICATION_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:"\n- `{{ .Token }}` : The 6-digit numeric email OTP\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The user's email address\n- `{{ .Data }}` : The user's `user_metadata`\n"}},validationSchema:(0,l.object)().shape({MAILER_SUBJECTS_REAUTHENTICATION:(0,l.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}}];var eV=function(){let{ref:e}=(0,o.UO)();return(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Email rate-limits and template changes"}),(0,s.jsxs)(D.X,{children:["You're using the built-in email service. The service has rate limits and it's not meant to be used for production apps. Check the"," ",(0,s.jsx)("a",{href:"https://supabase.com/docs/guides/platform/going-into-prod#auth-rate-limits",className:"underline",target:"_blank",children:"documentation"})," ","for an up-to-date information on the current rate limits. Please use a"," ",(0,s.jsx)(Z(),{className:"underline",target:"_blank",href:"/project/".concat(e,"/settings/auth#auth-config-smtp-form"),children:"custom SMTP server"}),".",(0,s.jsx)("br",{})]}),(0,s.jsx)(D.X,{className:"mt-2",children:(0,s.jsx)("strong",{children:"You will not be able to modify the email templates unless you've set up a custom SMTP server or Send Email Hook server, except if you had changed it before this restriction went into effect."})})]})},ez=i(82663),eH=i(61531),eG=i(30339),eW=i(91550),eY=i(82137),e$=e=>{var t;let{template:i,authConfig:l}=e,{ref:c}=(0,o.UO)(),{mutate:u,isLoading:p}=(0,g._)({onError:e=>a.Am.error("Failed to update email templates: ".concat(e.message))}),{id:E,properties:m}=i,_="auth-config-email-templates-".concat(E),T=(0,r.useMemo)(()=>{let e={};return Object.keys(m).forEach(t=>{var i;e[t]=null!==(i=l&&l[t])&&void 0!==i?i:""}),e},[l,m]),b=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue"),S="MAILER_TEMPLATES_".concat(E,"_CONTENT"),A=m[S],[N,f]=(0,r.useState)(null!==(t=l&&l[S])&&void 0!==t?t:""),[L,y]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=e=>{L&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[L]),(0,s.jsx)(M.Z,{id:_,className:"!border-t-0",initialValues:T,onSubmit:(e,t)=>{let{resetForm:i}=t,s={...e};delete s[S],A&&(s[S]=N),u({projectRef:c,config:s},{onSuccess:()=>{a.Am.success("Successfully updated settings"),i({values:e,initialValues:e}),y(!1)}})},children:e=>{var t;let{resetForm:i,values:n,initialValues:r}=e,a=null!==(t=l&&l[S])&&void 0!==t?t:"",o=JSON.stringify(n)!==JSON.stringify(r)||a!==N;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.hj,{className:"!border-t-0 pb-8 pt-4",children:(0,s.jsx)(h.B4,{loading:!1,children:Object.keys(m).map(e=>{let t=m[e];if("string"===t.type)return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"col-span-12 text-sm text-foreground lg:col-span-5",children:t.title}),(0,s.jsx)(R.Z,{size:"small",layout:"vertical",id:e,name:e,descriptionText:t.description?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.description}):null,labelOptional:t.descriptionOptional?(0,s.jsx)(j.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.descriptionOptional}):null,disabled:!b},e)]},e)})})}),(0,s.jsx)(h.hj,{className:"!mt-0 grid-cols-12 !border-t-0 !pt-0",children:(0,s.jsxs)(h.B4,{fullWidth:!0,loading:!1,children:[A&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(h.S0,{children:(0,s.jsx)("span",{children:A.title})}),(0,s.jsx)(eH.Z,{defaultVisibility:!0,title:"Message variables",hideCollapse:!1,description:A.description&&(0,s.jsx)(j.D,{children:A.description})})]}),(0,s.jsxs)(eX.Z,{defaultActiveId:"source",type:"underlined",size:"tiny",children:[(0,s.jsx)(eX.Z.Panel,{id:"source",icon:(0,s.jsx)(eG.Z,{}),label:"Source",children:(0,s.jsx)("div",{className:"relative h-96",children:(0,s.jsx)(ez.Z,{id:"code-id",language:"html",isReadOnly:!b,className:"!mb-0 h-96 overflow-hidden rounded border",onInputChange:e=>{f(null!=e?e:""),N!==e&&y(!0)},options:{wordWrap:"off",contextmenu:!1},value:N})})}),(0,s.jsxs)(eX.Z.Panel,{id:"preview",icon:(0,s.jsx)(eW.Z,{}),label:"Preview",children:[(0,s.jsxs)(D.bZ,{className:"mb-2",variant:"default",children:[(0,s.jsx)(eY.Z,{strokeWidth:1.5}),(0,s.jsx)(D.Cd,{children:"The preview may differ slightly from the actual rendering in the email client."})]}),(0,s.jsx)("iframe",{className:"!mb-0 overflow-hidden h-96 w-full rounded border",title:E,srcDoc:N})]})]})]}),(0,s.jsx)("div",{className:"col-span-12 flex w-full",children:(0,s.jsx)(d.i,{handleReset:()=>{var e;i({values:l,initialValues:l}),f(null!==(e=l&&l[S])&&void 0!==e?e:"")},form:_,isSubmitting:p,hasChanges:o,disabled:!b,helper:b?void 0:"You need additional permissions to update authentication settings"})})]})})]})}})},eJ=()=>{let{ref:e}=(0,o.UO)(),{data:t,error:i,isLoading:n,isError:r,isSuccess:a}=(0,m.$E)({projectRef:e}),l=a&&t&&(!t.SMTP_HOST||!t.SMTP_USER||!t.SMTP_PASS);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c.p,{title:"Email Templates",description:"Customize the emails that will be sent out to your users."}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(y.z,{type:"default",icon:(0,s.jsx)(K.Z,{strokeWidth:1.5}),children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/auth/auth-email-templates",children:"Documentation"})})})]}),r&&(0,s.jsxs)(D.bZ,{variant:"destructive",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(D.X,{children:i.message})]}),n&&(0,s.jsx)(ek.A,{}),a&&(0,s.jsx)(u.by,{children:(0,s.jsx)(eX.Z,{scrollable:!0,size:"small",type:"underlined",listClassNames:"px-8 pt-4",defaultActiveId:eZ[0].title.trim().replace(/\s+/g,"-"),children:eZ.map(e=>{let i=e.title.trim().replace(/\s+/g,"-");return(0,s.jsxs)(eX.Z.Panel,{id:i,label:e.title,children:[l?(0,s.jsx)("div",{className:"mx-8",children:(0,s.jsx)(eV,{})}):null,(0,s.jsx)(e$,{template:e,authConfig:t},e.title)]},i)})})})]})};let eQ={SMTP_ADMIN_EMAIL:null,SMTP_SENDER_NAME:null,SMTP_USER:null,SMTP_HOST:null,SMTP_PASS:null,SMTP_PORT:null,SMTP_MAX_FREQUENCY:60};var e0=i(62697),e1=i(67815),e2=()=>{let{ref:e}=(0,o.UO)(),{data:t,error:i,isLoading:E,isError:_,isSuccess:T}=(0,m.$E)({projectRef:e}),{mutate:b,isLoading:S}=(0,g._)(),[A,j]=(0,r.useState)(!1),[L,O]=(0,r.useState)(!0),w="auth-config-smtp-form",C=(0,e0.F)(t),U=(0,x.Xo)(n.KA.READ,"custom_config_gotrue"),k=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue");(0,r.useEffect)(()=>{T&&(0,e0.n)(t)&&j(!0)},[T,t]);let X=(0,l.object)({SMTP_ADMIN_EMAIL:(0,l.string)().when([],{is:()=>A,then:e=>e.email("Must be a valid email").required("Sender email is required"),otherwise:e=>e}),SMTP_SENDER_NAME:(0,l.string)().when([],{is:()=>A,then:e=>e.required("Sender name is required"),otherwise:e=>e}),SMTP_HOST:(0,l.string)().when([],{is:()=>A,then:e=>e.matches(z.y,"Must be a valid URL or IP address").required("Host URL is required."),otherwise:e=>e}),SMTP_PORT:(0,l.number)().when([],{is:()=>A,then:e=>e.required("Port number is required.").min(1,"Must be a valid port number more than 0").max(65535,"Must be a valid port number no more than 65535"),otherwise:e=>e}),SMTP_MAX_FREQUENCY:(0,l.number)().when([],{is:()=>A,then:e=>e.required("Rate limit is required.").min(1,"Must be more than 0").max(32767,"Must not be more than 32,767 an hour"),otherwise:e=>e}),SMTP_USER:(0,l.string)().when([],{is:()=>A,then:e=>e.required("SMTP Username is required"),otherwise:e=>e}),SMTP_PASS:(0,l.string)().when([],{is:()=>A&&(null==t?void 0:t.SMTP_PASS)===null,then:e=>e.required("SMTP password is required"),otherwise:e=>e})});return _?(0,s.jsxs)(D.bZ,{variant:"destructive",children:[(0,s.jsx)(P.aN,{}),(0,s.jsx)(D.Cd,{children:"Failed to retrieve auth configuration"}),(0,s.jsx)(D.X,{children:i.message})]}):U?(0,s.jsx)(M.Z,{id:w,initialValues:C,onSubmit:(t,i)=>{let{resetForm:s}=i,n=A?t:eQ;delete n.ENABLE_SMTP,n.SMTP_PORT=n.SMTP_PORT?n.SMTP_PORT.toString():n.SMTP_PORT,""===n.SMTP_PASS&&delete n.SMTP_PASS,b({projectRef:e,config:n},{onError:e=>{a.Am.error("Failed to update settings: ".concat(e.message))},onSuccess:()=>{O(!0),a.Am.success("Successfully updated settings");let e=(0,e0.F)(n);s({values:e,initialValues:e})}})},validationSchema:X,children:i=>{let{resetForm:n,values:a}=i,l=(0,e0.n)(a),o=JSON.stringify(a)!==JSON.stringify(C);return(0,r.useEffect)(()=>{if(T){let e=(0,e0.F)(t);n({values:e,initialValues:e})}},[T,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.p,{title:"SMTP Settings",description:"You can use your own SMTP server instead of the built-in email service."}),(0,s.jsxs)(u.by,{footer:(0,s.jsx)("div",{className:"flex py-4 px-8",children:(0,s.jsx)(d.i,{form:w,isSubmitting:S,hasChanges:o,handleReset:()=>{j((0,e0.n)(C)),n({values:C})},disabled:!k,helper:k?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,s.jsx)(h.hj,{children:(0,s.jsxs)(h.B4,{className:"!col-span-12 !gap-y-2",loading:E,children:[(0,s.jsx)(I.Z,{size:"small",layout:"flex",name:"ENABLE_SMTP",label:"Enable Custom SMTP",checked:A,disabled:!k,onChange:e=>j(e),descriptionText:(0,s.jsx)(eI.U,{className:"max-w-full [&>p]:text-foreground-lighter",content:"Emails will be sent using your custom SMTP provider. Email rate limits can be adjusted [here](/dashboard/project/".concat(e,"/auth/rate-limits).")})}),A?!l&&(0,s.jsx)("div",{className:"",children:(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(e1.Z,{strokeWidth:2}),(0,s.jsx)(D.Cd,{children:"All fields below must be filled"}),(0,s.jsx)(D.X,{children:"The following fields must be filled before custom SMTP can be properly enabled"})]})}):(0,s.jsx)("div",{className:"",children:(0,s.jsx)(eV,{})})]})}),(0,s.jsx)(h.hj,{visible:A,header:(0,s.jsx)(h.S0,{children:"Sender details"}),disabled:!A,children:(0,s.jsxs)(h.B4,{loading:E,children:[(0,s.jsx)(R.Z,{name:"SMTP_ADMIN_EMAIL",id:"SMTP_ADMIN_EMAIL",label:"Sender email",descriptionText:"This is the email address the emails are sent from",placeholder:"noreply@yourdomain.com",disabled:!k}),(0,s.jsx)(R.Z,{name:"SMTP_SENDER_NAME",id:"SMTP_SENDER_NAME",label:"Sender name",descriptionText:"Name displayed in the recipient's inbox",placeholder:"The name shown on the email",disabled:!k})]})}),(0,s.jsx)(h.hj,{visible:A,disabled:!A,header:(0,s.jsxs)(h.S0,{children:[(0,s.jsx)("span",{children:"SMTP Provider Settings"}),(0,s.jsx)("p",{className:"my-4 text-foreground-lighter",children:"Your SMTP Credentials will always be encrypted in our database."})]}),children:(0,s.jsxs)(h.B4,{loading:E,children:[a.SMTP_HOST&&a.SMTP_HOST.endsWith(".gmail.com")&&(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(e1.Z,{strokeWidth:2}),(0,s.jsx)(D.Cd,{children:"Check your SMTP provider"}),(0,s.jsx)(D.X,{children:"Not all SMTP providers are designed for the email sending required by Supabase Auth. It looks like the SMTP provider you entered is designed for sending personal email messages and not for sending transactional messages. Although you can ignore this warning, email deliverability may be impacted."})]}),(0,s.jsx)(R.Z,{name:"SMTP_HOST",placeholder:"your.smtp.host.com",id:"SMTP_HOST",label:"Host",descriptionText:"Hostname or IP address of your SMTP server.",disabled:!k}),(0,s.jsx)(v.Z,{name:"SMTP_PORT",id:"SMTP_PORT",placeholder:"587",label:"Port number",descriptionText:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"block",children:["Port used by your SMTP server. Common ports include 25, 465, and 587."," "]}),(0,s.jsx)("span",{className:"mt-2 block",children:"Avoid using port 25 as modern SMTP email clients shouldn't use this port, it is traditionally blocked by residential ISPs and Cloud Hosting Providers, to curb the amount of spam."})]}),disabled:!k}),(0,s.jsx)(v.Z,{id:"SMTP_MAX_FREQUENCY",name:"SMTP_MAX_FREQUENCY",label:"Minimum interval between emails being sent",descriptionText:"How long between each email can a new email be sent via your SMTP server.",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!k}),(0,s.jsx)(R.Z,{name:"SMTP_USER",id:"SMTP_USER",label:"Username",placeholder:"SMTP Username",disabled:!k}),(0,s.jsx)(R.Z,{name:"SMTP_PASS",id:"SMTP_PASS",type:L?"password":"text",label:"Password",placeholder:(null==t?void 0:t.SMTP_PASS)===null?"SMTP Password":"••••••••",actions:(0,s.jsx)(y.z,{icon:L?(0,s.jsx)(N.Z,{}):(0,s.jsx)(f.Z,{}),type:"default",onClick:()=>O(!L)}),disabled:!k,descriptionText:(0,s.jsx)("span",{children:"For security reasons, the password is write-only. Once saved, it cannot be retrieved or displayed."})})]})})]})]})}}):(0,s.jsx)(p.Z,{resourceText:"view SMTP settings"})},e3=i(45010),e4=i(56006),e5=i(85945),e6=i(48228),e8=i(31696);let e9=e=>["auth",e,"third-party-auth"];async function e7(e){let{projectRef:t,tpaId:i}=e,{data:s,error:n}=await (0,e8.IV)("/v1/projects/{ref}/config/auth/third-party-auth/{tpa_id}",{params:{path:{ref:t,tpa_id:i}}});return n&&(0,e8.S3)(n),s}let te=function(){let{onSuccess:e,onError:t,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,e5.NL)();return(0,e6.D)(e=>e7(e),{async onSuccess(t,i,n){let{projectRef:r}=i;await s.invalidateQueries(e9(r)),await (null==e?void 0:e(t,i,n))},async onError(e,i,s){void 0===t?a.Am.error("Failed to delete third party auth integration: ".concat(e.message)):t(e,i,s)},...i})};var tt=i(36492);async function ti(e,t){let{projectRef:i}=e;if(!i)throw Error("projectRef is required");let{data:s,error:n}=await (0,e8.U2)("/v1/projects/{ref}/config/auth/third-party-auth",{params:{path:{ref:i}},signal:t});return n&&(0,e8.S3)(n),s}let ts=function(e){let{projectRef:t}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,tt.a)(e9(t),e=>{let{signal:i}=e;return ti({projectRef:t},i)},{enabled:i&&void 0!==t,...s})};var tn=i(75939),tr=i(54383),ta=i(74138),tl=i(78232),to=i(96577),td=i.n(to),tc=i(34503);let tu=e=>(null==e?void 0:e.oidc_issuer_url)&&(null==e?void 0:e.oidc_issuer_url.startsWith("https://securetoken.google.com/"))?"firebase":(null==e?void 0:e.oidc_issuer_url)&&(null==e?void 0:e.oidc_issuer_url.includes("amazonaws.com"))?"awsCognito":(null==e?void 0:e.oidc_issuer_url)&&(null==e?void 0:e.oidc_issuer_url.includes("auth0.com"))?"auth0":"custom",th=e=>{switch(e){case"firebase":return"Firebase";case"auth0":return"Auth0";case"awsCognito":return"Amazon Cognito";default:return"Custom"}},tp=e=>{switch(e){case"firebase":return"".concat(b.GW,"/img/icons/firebase-icon.svg");case"auth0":return"".concat(b.GW,"/img/icons/auth0-icon.svg");default:return"".concat(b.GW,"/img/icons/cognito-icon.svg")}},tE=e=>{let{disabled:t,type:i,onSelectIntegrationType:n}=e;return(0,s.jsxs)(tc.Xi,{onClick:()=>n(i),className:(0,tr.cn)("flex items-center gap-x-2 p-2",t&&"cursor-not-allowed"),disabled:t,children:[(0,s.jsx)(td(),{src:tp(i),width:16,height:16,alt:"".concat(i," icon")}),(0,s.jsx)("span",{children:th(i)})]},i)},tm=e=>{let{onSelectIntegrationType:t}=e,i=(0,T.l)(),{data:n}=(0,_.Gl)({orgSlug:null==i?void 0:i.slug},{enabled:o.Qy});return(0,s.jsxs)(tc.h_,{modal:!1,children:[(0,s.jsx)(tc.$F,{asChild:!0,children:(0,s.jsx)(y.z,{type:"primary",iconRight:(0,s.jsx)(tl.Z,{size:14,strokeWidth:1}),children:"Add provider"})}),(0,s.jsxs)(tc.AW,{align:"end",className:"w-56",children:[(0,s.jsx)(tE,{type:"firebase",onSelectIntegrationType:t}),(null==n?void 0:n.plan.id)==="free"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tc.VD,{}),(0,s.jsxs)("div",{className:"bg-surface-200 -m-1 p-2",children:[(0,s.jsxs)(tc.Ju,{className:"grid gap-1",children:[(0,s.jsx)("p",{className:"text-foreground-light",children:"Unavailable on the Free plan"}),(0,s.jsxs)("p",{className:"text-foreground-lighter text-xs",children:[(0,s.jsx)(Z(),{target:"_href",rel:"noreferrer",className:"underline hover:text-foreground-light transition",href:"/org/".concat(null==i?void 0:i.slug,"/billing"),children:"Upgrade your plan"})," ","to add the following providers to your project."]})]}),(0,s.jsx)(tE,{disabled:!0,type:"auth0",onSelectIntegrationType:t}),(0,s.jsx)(tE,{disabled:!0,type:"awsCognito",onSelectIntegrationType:t})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tE,{type:"auth0",onSelectIntegrationType:t}),(0,s.jsx)(tE,{type:"awsCognito",onSelectIntegrationType:t})]})]})]})};var tg=i(88883),t_=(i(3536),i(63955)),tx=i(30195);async function tT(e){let{projectRef:t,customJwks:i,jwksUrl:s,oidcIssuerUrl:n}=e,{data:r,error:a}=await (0,e8.v_)("/v1/projects/{ref}/config/auth/third-party-auth",{params:{path:{ref:t}},body:{custom_jwks:i,jwks_url:s,oidc_issuer_url:n}});return a&&(0,e8.S3)(a),r}let tb=function(){let{onSuccess:e,onError:t,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,e5.NL)();return(0,e6.D)(e=>tT(e),{async onSuccess(t,i,n){let{projectRef:r}=i;await s.invalidateQueries(e9(r)),await (null==e?void 0:e(t,i,n))},async onError(e,i,s){void 0===t?a.Am.error("Failed to create third party auth integration: ".concat(e.message)):t(e,i,s)},...i})};var tS=i(41909),tA=i(95392),tN=i(22574),tf=i(42070),tj=i(87668);let tL="create-auth0-auth-integration-form",tR=tx.Ry({enabled:tx.O7(),auth0DomainName:tx.Z_().trim().min(1).regex(/^[A-Za-z0-9-.]+$/,"Project IDs should only have alphanumeric characters and hyphens.")}),ty=e=>{let{visible:t,onClose:i,onDelete:n}=e,{ref:l}=(0,o.UO)(),{mutate:d,isLoading:c}=tb({onSuccess:()=>{a.Am.success("Successfully created a new Auth0 Auth integration."),i()}}),u=(0,t_.cI)({resolver:(0,tg.F)(tR),defaultValues:{enabled:!0,auth0DomainName:""}});(0,r.useEffect)(()=>{t&&(u.reset({enabled:!0,auth0DomainName:""}),setTimeout(()=>{u.setFocus("auth0DomainName")},25))},[t]);let h=async e=>{d({projectRef:l,oidcIssuerUrl:"https://".concat(e.auth0DomainName,".auth0.com")})};return(0,s.jsx)(tS.Vq,{open:t,onOpenChange:()=>i(),children:(0,s.jsxs)(tS.cZ,{children:[(0,s.jsx)(tS.fK,{children:(0,s.jsx)(tS.$N,{className:"truncate",children:"Add new Auth0 connection"})}),(0,s.jsx)(tA.Z,{}),(0,s.jsx)(tS.VO,{children:(0,s.jsx)(tN.l0,{...u,children:(0,s.jsxs)("form",{id:tL,onSubmit:u.handleSubmit(h),className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"This will enable a JWT token from your Auth0 project to access data from this Supabase project."}),(0,s.jsx)(tN.Wi,{control:u.control,name:"auth0DomainName",render:e=>{let{field:t}=e;return(0,s.jsx)(tj.E,{label:"Auth0 domain name",children:(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)(y.z,{type:"default",size:"small",className:"px-2 text-foreground-light rounded-r-none",onClick:()=>u.setFocus("auth0DomainName"),children:"https://"}),(0,s.jsx)(tN.NI,{children:(0,s.jsx)(tf.I,{className:"border-l-0 rounded-none border-r-0 z-50",...t})}),(0,s.jsx)(y.z,{type:"default",size:"small",className:"px-2 text-foreground-light rounded-l-none",onClick:()=>u.setFocus("auth0DomainName"),children:".auth0.com"})]})})}},"auth0DomainName")]})})}),(0,s.jsxs)(tS.cN,{children:[!1,(0,s.jsx)(y.z,{disabled:c,type:"default",onClick:()=>i(),children:"Cancel"}),(0,s.jsx)(y.z,{form:tL,htmlType:"submit",disabled:c,loading:c,children:"Create connection"})]})]})})};var tv=i(90038),tI=i(61786),tO=i(90504),tw=i(19869);let tC=["af-south-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1 ","ap-south-2 ","ap-southeast-1","ap-southeast-2","ap-southeast-3","ap-southeast-4","ca-central-1","eu-central-1","eu-central-2","eu-north-1","eu-south-1","eu-south-2","eu-west-1","eu-west-2","eu-west-3","il-central-1","me-central-1","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-west-1","us-west-1","us-west-2"],tD=e=>{let{value:t,onChange:i}=e,[n,a]=(0,r.useState)(!1);return(0,s.jsxs)(tI.J2,{open:n,onOpenChange:a,children:[(0,s.jsx)(tI.xo,{asChild:!0,children:(0,s.jsx)(tN.NI,{children:(0,s.jsx)(y.z,{type:"default",role:"combobox",className:(0,tr.cn)("w-full justify-between",!t&&"text-muted-foreground"),size:"small",iconRight:(0,s.jsx)(tv.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:1}),children:null!=t?t:"Select a region"})})}),(0,s.jsx)(tI.yk,{className:"p-0",sameWidthAsTrigger:!0,children:(0,s.jsxs)(tO.mY,{children:[(0,s.jsx)(tO.sZ,{placeholder:"Search AWS regions..."}),(0,s.jsxs)(tO.e8,{children:[(0,s.jsx)(tO.rb,{children:"No regions found."}),(0,s.jsx)(tO.fu,{children:(0,s.jsx)(tw.x,{className:"h-72",children:tC.map(e=>(0,s.jsxs)(tO.di,{value:e,onSelect:e=>{i(e===t?"":e),a(!1)},children:[(0,s.jsx)(eA.Z,{className:(0,tr.cn)("mr-2 h-4 w-4",e===t?"opacity-100":"opacity-0")}),e]},e))})})]})]})})]})},tP="create-aws-cognito-auth-integration-form",tM=tx.Ry({enabled:tx.O7(),awsCognitoUserPoolId:tx.Z_().trim().min(1).regex(/^[A-Za-z0-9-_]+$/,"The project ID contains invalid characters."),awsRegion:tx.Z_()}),tU=e=>{let{visible:t,onClose:i,onDelete:n}=e,{ref:l}=(0,o.UO)(),{mutate:d,isLoading:c}=tb({onSuccess:()=>{a.Am.success("Successfully created a new Amazon Cognito Auth integration."),i()}}),u=(0,t_.cI)({resolver:(0,tg.F)(tM),defaultValues:{enabled:!0,awsCognitoUserPoolId:"",awsRegion:"us-east-1"}});(0,r.useEffect)(()=>{t&&(u.reset({enabled:!0,awsCognitoUserPoolId:"",awsRegion:"us-east-1"}),setTimeout(()=>{u.setFocus("awsCognitoUserPoolId")},25))},[t]);let h=async e=>{d({projectRef:l,oidcIssuerUrl:"https://cognito-idp.".concat(e.awsRegion,".amazonaws.com/").concat(e.awsCognitoUserPoolId)})},p=u.watch("awsRegion");return(0,s.jsx)(tS.Vq,{open:t,onOpenChange:()=>i(),children:(0,s.jsxs)(tS.cZ,{size:"large",children:[(0,s.jsxs)(tS.fK,{children:[(0,s.jsx)(tS.$N,{className:"truncate",children:"Add new Amazon Cognito Auth connection"}),(0,s.jsx)(tS.Be,{children:"By adding an Amazon Cognito Auth connection, you can authenticate users using Amazon Cognito User Pools."})]}),(0,s.jsx)(tA.Z,{}),(0,s.jsx)(tS.VO,{children:(0,s.jsx)(tN.l0,{...u,children:(0,s.jsxs)("form",{id:tP,onSubmit:u.handleSubmit(h),className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"This will enable a JWT token from Amazon Cognito project to access data from this Supabase project."}),(0,s.jsx)(tN.Wi,{control:u.control,name:"awsCognitoUserPoolId",render:e=>{let{field:t}=e;return(0,s.jsx)(tj.E,{label:"Amazon Cognito User Pool ID",children:(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)(y.z,{type:"default",size:"small",className:"px-2 text-foreground-light rounded-r-none",onClick:()=>u.setFocus("awsCognitoUserPoolId"),children:["https://cognito-idp.",p,".amazonaws.com/"]}),(0,s.jsx)(tN.NI,{children:(0,s.jsx)(tf.I,{className:"rounded-l-none border-l-0 z-50",...t})})]})})}},"awsCognitoUserPoolId"),(0,s.jsx)(tN.Wi,{control:u.control,name:"awsRegion",render:e=>{let{field:t}=e;return(0,s.jsx)(tj.E,{label:"AWS Region",children:(0,s.jsx)(tD,{value:t.value,onChange:t.onChange})})}})]})})}),(0,s.jsxs)(tS.cN,{children:[!1,(0,s.jsx)(y.z,{disabled:c,type:"default",onClick:()=>i(),children:"Cancel"}),(0,s.jsx)(y.z,{form:tP,htmlType:"submit",disabled:c,loading:c,children:"Create connection"})]})]})})},tk="create-firebase-auth-integration-form",tX=tx.Ry({enabled:tx.O7(),firebaseProjectId:tx.Z_().trim().min(1).regex(/^[A-Za-z0-9-]+$/,"The project ID contains invalid characters.")}),tB=e=>{let{visible:t,onClose:i,onDelete:n}=e,{ref:l}=(0,o.UO)(),{mutate:d,isLoading:c}=tb({onSuccess:()=>{a.Am.success("Successfully created a new Firebase Auth integration."),i()}}),u=(0,t_.cI)({resolver:(0,tg.F)(tX),defaultValues:{enabled:!0,firebaseProjectId:""}}),h=(0,tn.P)("firebaseTPAAllowedProjectIDs"),p="string"==typeof h?h.split(",").includes(l):!!h;(0,r.useEffect)(()=>{t&&(u.reset({enabled:!0,firebaseProjectId:""}),setTimeout(()=>{u.setFocus("firebaseProjectId")},25))},[t]);let E=async e=>{d({projectRef:l,oidcIssuerUrl:"https://securetoken.google.com/".concat(e.firebaseProjectId)})};return(0,s.jsx)(tS.Vq,{open:t,onOpenChange:()=>i(),children:(0,s.jsxs)(tS.cZ,{children:[(0,s.jsx)(tS.fK,{children:(0,s.jsx)(tS.$N,{className:"truncate",children:"Add new Firebase Auth connection"})}),(0,s.jsx)(tA.Z,{}),(0,s.jsx)(tS.VO,{children:p?(0,s.jsx)(tN.l0,{...u,children:(0,s.jsxs)("form",{id:tk,onSubmit:u.handleSubmit(E),className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"This will enable a JWT token from a specific Firebase project to access data from this Supabase project."}),(0,s.jsx)(tN.Wi,{control:u.control,name:"firebaseProjectId",render:e=>{let{field:t}=e;return(0,s.jsx)(tj.E,{label:"Firebase Auth Project ID",children:(0,s.jsx)(tN.NI,{children:(0,s.jsx)(tf.I,{...t})})})}},"firebaseProjectId"),(0,s.jsxs)(D.bZ,{variant:"warning",children:[(0,s.jsx)(e1.Z,{strokeWidth:2}),(0,s.jsx)(D.Cd,{children:"This connection requires a Row Level Security (RLS) policy"}),(0,s.jsx)(D.X,{children:"You will need to manually add a RLS policy after creating this Firebase connection. Otherwise, the Supabase project will be accessible to anyone with a valid Firebase JWT token."})]})]})}):(0,s.jsxs)("p",{className:"text-sm text-foreground-light pb-2",children:["Third-party Auth with Firebase is currently in a private alpha release."," ",(0,s.jsx)("a",{className:"underline",href:"https://forms.supabase.com/third-party-auth-with-firebase",target:"_blank",children:"Please submit your interest for it"})," ","and someone from the Supabase team will reach out. You can also try it out via the CLI."]})}),(0,s.jsx)(tS.cN,{children:p?(0,s.jsxs)(s.Fragment,{children:[!1,(0,s.jsx)(y.z,{disabled:c,type:"default",onClick:()=>i(),children:"Cancel"}),(0,s.jsx)(y.z,{form:tk,htmlType:"submit",disabled:c,loading:c,children:"Create connection"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.z,{disabled:c,type:"default",onClick:()=>i(),children:"Cancel"}),(0,s.jsx)(y.z,{onClick:()=>i(),asChild:!0,children:(0,s.jsx)("a",{href:"https://forms.supabase.com/third-party-auth-with-firebase",target:"_blank",children:"Register interest"})})]})})]})})};var tq=i(49435),tK=i(81076),tF=i(82955),tZ=i(82784),tV=i(58898);let tz=e=>{let{children:t}=e,i=(t||[""])[0];try{i=(0,tZ.WU)(i,{language:"postgresql",keywordCase:"upper"})}catch(e){}return 0===i.length?null:(0,s.jsx)("pre",{className:"rounded-md relative group",children:(0,s.jsx)(tV.d,{value:i,language:"sql",className:(0,tr.cn)("!py-3 !px-3.5 prose dark:prose-dark transition max-w-full","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap"),hideCopy:!0,hideLineNumbers:!0})})},tH=e=>{let{projectRef:t,firebaseProjectId:i}=e,n='create policy \n  "Restrict access to Firebase Auth for project ID '.concat(i,"\" \n  on table_name \n  as restrictive \n  to authenticated using (\n  (\n    auth.jwt()->>'iss' = 'https://").concat(t,".supabase.co/auth/v1'\n  )\n  or (\n    auth.jwt()->>'iss' = 'https://securetoken.google.com/").concat(i,"'\n    and auth.jwt()->>'aud' = '").concat(i,"'\n  )\n);"),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!a)return;let e=setTimeout(()=>l(!1),2e3);return()=>clearTimeout(e)},[a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tS.fK,{padding:"small",children:[(0,s.jsx)(tS.$N,{children:"Add RLS policy"}),(0,s.jsx)(tS.Be,{children:"We recommend adding a Row Level Security (RLS) policy for your Firebase JWT keys to explicitly specify which tables can be accessed via the Data APIs in order to prevent accidental exposure of data."})]}),(0,s.jsx)(tS.P3,{}),(0,s.jsx)(tS.VO,{padding:"small",children:(0,s.jsx)(tz,{projectRef:t,children:[n]})}),(0,s.jsxs)(tS.cN,{padding:"small",children:[(0,s.jsx)(y.z,{type:"default",onClick:()=>{(0,tF.vQ)(n,()=>l(!0))},icon:a?(0,s.jsx)(eA.Z,{className:"text-brand-600"}):null,children:a?(0,s.jsx)("p",{children:"Copied"}):(0,s.jsx)("p",{children:"Copy code"})}),(0,s.jsx)(y.z,{type:"primary",children:(0,s.jsx)(Z(),{href:"/project/".concat(t,"/sql/new?content=").concat(encodeURIComponent(n)),passHref:!0,children:"Open in SQL Editor"})})]})]})},tG=e=>{switch(e){case"firebase":return(0,s.jsxs)(s.Fragment,{children:["Allow users to use Supabase with Firebase project. You'll need to setup RLS policies for all tables that you want to access with a Firebase JWT token. Additionally, you'll need to add custom code to set the ",(0,s.jsx)("code",{children:"authenticated"})," role to all your present and future users. You can read more in the"," ",(0,s.jsx)("a",{className:"hover:decoration-brand underline hover:text-foreground transition",href:"https://supabase.com/docs/guides/auth",children:"documentation"}),"."]});case"auth0":return(0,s.jsxs)(s.Fragment,{children:["Allow users to use Supabase with Auth0 project. Additional setup may be required. You can read more in the"," ",(0,s.jsx)("a",{className:"hover:decoration-brand underline hover:text-foreground transition",href:"https://supabase.com/docs/guides/auth",children:"documentation"}),"."]});case"awsCognito":return(0,s.jsxs)(s.Fragment,{children:["Allow users to use Supabase with an Amazon Cognito. Additional setup may be required. You can read more in the"," ",(0,s.jsx)("a",{className:"hover:decoration-brand underline hover:text-foreground transition",href:"https://supabase.com/docs/guides/auth/third-party/aws-cognito",children:"documentation"}),"."]});default:return"Custom"}},tW=e=>{var t,i,n,r;let{type:a,integration:l}=e;switch(a){case"firebase":{let e=(null===(t=l.oidc_issuer_url)||void 0===t?void 0:t.replace("https://securetoken.google.com/",""))||"";return(0,s.jsxs)("div",{className:"text-sm flex flex-row gap-x-4",children:[(0,s.jsx)("span",{className:"text-foreground-light w-36",children:"Firebase Project ID"}),(0,s.jsx)("span",{className:"text-foreground",children:e})]})}case"auth0":let o=(null===(i=l.oidc_issuer_url)||void 0===i?void 0:i.replace("https://","").replace(".auth0.com",""))||"";return(0,s.jsxs)("div",{className:"text-sm flex flex-row gap-x-4",children:[(0,s.jsx)("span",{className:"text-foreground-light w-36",children:"Auth0 Domain Name"}),(0,s.jsx)("span",{className:"text-foreground",children:o})]});case"awsCognito":{let e=(null===(n=l.oidc_issuer_url)||void 0===n?void 0:n.split(".").filter(e=>tC.includes(e))[0])||"",t=(null===(r=l.oidc_issuer_url)||void 0===r?void 0:r.split("/").filter(t=>t.startsWith(e||""))[0])||"";return(0,s.jsxs)("div",{className:"text-sm flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("span",{className:"text-foreground-light w-36",children:"Region"}),(0,s.jsx)("span",{className:"text-foreground",children:e})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("span",{className:"text-foreground-light w-36",children:"User Pool ID"}),(0,s.jsx)("span",{className:"text-foreground",children:t})]})]})}default:return(0,s.jsx)(s.Fragment,{children:"Custom"})}},tY=e=>{var t;let{integration:i,canUpdateConfig:n,onDelete:r}=e,{ref:a}=(0,o.UO)(),l=tu(i);return"custom"===l?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-surface-100 border overflow-hidden shadow px-5 py-4 flex flex-row first:rounded-t-md last:rounded-b-md space-x-4",children:[(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(td(),{src:tp(l),width:21,height:21,alt:"".concat(l," icon")})}),(0,s.jsxs)("div",{className:"flex flex-col flex-0 overflow-y-auto w-full gap-y-4",children:[(0,s.jsxs)("div",{className:"text-sm flex flex-col",children:[(0,s.jsx)("span",{className:"text-foreground",children:th(l)}),(0,s.jsx)("div",{className:"text-foreground-lighter",children:tG(l)})]}),(0,s.jsx)(tW,{type:l,integration:i}),(0,s.jsx)("div",{children:(0,s.jsx)(y.z,{type:"danger",disabled:!n,onClick:()=>r(),children:"Delete integration"})})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(tK.C,{className:"space-x-1",size:"large",variant:"brand",children:[(0,s.jsx)("div",{className:"h-3.5 w-3.5 bg-brand rounded-full flex justify-center items-center",children:(0,s.jsx)(eA.Z,{className:"h-2 w-2 text-background-overlay",strokeWidth:6})}),(0,s.jsx)("span",{children:"Enabled"})]})})]}),"firebase"===l?(0,s.jsxs)("div",{className:"bg-alternative border overflow-hidden shadow pl-11 pr-4 py-5 flex flex-row space-x-4",children:[(0,s.jsx)("div",{className:"bg-warning h-5 w-5 text-black flex items-center justify-center rounded-md",children:(0,s.jsx)(tq.Z,{className:"h-4 w-4 text-black"})}),(0,s.jsxs)("div",{className:"text-sm space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-foreground",children:"Firebase provider uses a custom RLS policy"}),(0,s.jsx)("p",{className:"text-foreground-light",children:"Be aware that this provider requires an RLS policy to correctly work."})]}),(0,s.jsxs)(tS.Vq,{children:[(0,s.jsx)(tS.hg,{asChild:!0,children:(0,s.jsx)(y.z,{type:"warning",size:"tiny",children:"Insert policy"})}),(0,s.jsx)(tS.cZ,{size:"xlarge",children:(0,s.jsx)(tH,{projectRef:a,firebaseProjectId:(null===(t=i.oidc_issuer_url)||void 0===t?void 0:t.replace("https://securetoken.google.com/",""))||""})})]})]})]}):null]})},t$=()=>{let e=(0,tn.P)("thirdPartyAuth"),{ref:t}=(0,o.UO)(),{data:i,isLoading:l,isError:d,isSuccess:u,error:h}=ts({projectRef:t}),p=i||[],[E,m]=(0,r.useState)(),[g,_]=(0,r.useState)(),{mutateAsync:T}=te(),b=(0,x.Xo)(n.KA.UPDATE,"custom_config_gotrue");return e?d?(0,s.jsx)(e4.Z,{error:h,subject:"Failed to retrieve auth configuration for Third Party Auth Integrations"}):(0,s.jsxs)("div",{className:"pb-4",children:[(0,s.jsx)(c.p,{title:"Third Party Auth",className:"mb-1",description:"Use third-party authentication (TPA) systems based on JWTs to access your project.",actions:0!==p.length?(0,s.jsx)(tm,{onSelectIntegrationType:m}):null,docsUrl:"https://supabase.com/docs/guides/auth/third-party/overview"}),(0,s.jsxs)("div",{className:"prose text-sm mb-6 max-w-full",children:[(0,s.jsxs)("span",{children:["Billing is based on the number of monthly active users (MAUs) requesting your API throughout the billing period (50 included then you'll be charged"," "]}),(0,s.jsx)("span",{className:"text-brand",children:"$0.00325"}),(0,s.jsx)("span",{children:" per MAU)."})]}),l&&(0,s.jsx)("div",{className:(0,tr.cn)("border rounded border-default px-20 py-16 flex flex-col items-center justify-center space-y-4"),children:(0,s.jsx)(e3.Z,{size:24,className:"animate-spin"})}),u?0===p.length?(0,s.jsxs)("div",{className:(0,tr.cn)("border rounded border-default px-20 py-16 flex flex-col items-center justify-center space-y-4"),children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"No providers configured yet"}),(0,s.jsx)(tm,{buttonText:"Add a new integration",onSelectIntegrationType:m})]}):(0,s.jsx)("div",{className:"-space-y-px",children:p.map(e=>(0,s.jsx)(tY,{integration:e,canUpdateConfig:b,onDelete:()=>{_(e)}},e.id))}):null,(0,s.jsx)(tB,{visible:"firebase"===E,onDelete:()=>{},onClose:()=>m(void 0)}),(0,s.jsx)(tU,{visible:"awsCognito"===E,onDelete:()=>{},onClose:()=>m(void 0)}),(0,s.jsx)(ty,{visible:"auth0"===E,onDelete:()=>{},onClose:()=>m(void 0)}),(0,s.jsx)(ta.Z,{visible:!!g,variant:"destructive",title:"Confirm to delete",confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>_(void 0),onConfirm:async()=>{if(!g)return;let e=tu(g);try{await T({projectRef:t,tpaId:g.id}),a.Am.success("Successfully deleted ".concat(th(e),".")),_(void 0),m(void 0)}catch(t){a.Am.error("Failed to delete ".concat(th(e),".")),console.error(t)}},children:(0,s.jsx)("p",{className:"py-4 text-sm text-foreground-light",children:"Are you sure you want to delete the ".concat(th(tu(g))," integration?")})})]}):null}},82663:function(e,t,i){var s=i(52322),n=i(79534),r=i(98537),a=i.n(r),l=i(34291),o=i.n(l),d=i(2784),c=i(80435),u=i(82955),h=i(54383),p=i(25733),E=i(98280);t.Z=e=>{let{id:t,language:i,defaultValue:r,autofocus:l=!0,isReadOnly:m=!1,hideLineNumbers:g=!1,onInputChange:_=o(),onInputRun:x=o(),className:T,loading:b,options:S,value:A,placeholder:N,disableTabToUsePlaceholder:f=!1}=e,j=(0,d.useRef)(),L=(0,d.useRef)(),R=(0,d.useRef)(),y=void 0!==N&&0===(null!=A?A:"").trim().length,[v,I]=(0,d.useState)(y),O=async(e,t)=>{L.current=e,R.current=t,(0,E.$)(e),j.current=e.createContextKey("hasValue",!1),j.current.set(void 0!==A&&A.trim().length>0),I(y),f||e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=N?N:"").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue"),e.addAction({id:"supabase",label:"Run Query",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:async()=>{var e,t;x((null==L?void 0:L.current).getModel().getValueInRange(null==L?void 0:null===(e=L.current)||void 0===e?void 0:e.getSelection())||(null==L?void 0:null===(t=L.current)||void 0===t?void 0:t.getValue()))}});let i=e.getModel();if(i){let t=i.getPositionAt((null!=A?A:"").length);e.setPosition(t)}await (0,u.Vs)(500),l&&(null==e||e.focus())},w=a()({tabSize:2,fontSize:13,readOnly:m,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:!0,lineNumbers:g?"off":void 0,glyphMargin:!g&&void 0,lineNumbersMinChars:g?0:4,folding:!g&&void 0,scrollBeyondLastLine:!1},S);return(0,d.useEffect)(()=>{I(y)},[y]),(0,d.useEffect)(()=>{if(!f&&void 0!==L.current&&void 0!==R.current){let e=L.current,t=R.current;e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=N?N:"  ").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue")}},[N,f]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{path:t,theme:"supabase",className:(0,h.cn)(T,"monaco-editor"),value:null!=A?A:void 0,language:i,defaultValue:null!=r?r:void 0,loading:b||(0,s.jsx)(p.Z,{}),options:w,onMount:O,onChange:e=>{j.current.set((null!=e?e:"").length>0),I(!e),_(e)}}),void 0!==N&&(0,s.jsx)("div",{className:(0,h.cn)("monaco-placeholder absolute top-[3px] left-[57px] text-sm pointer-events-none font-mono","[&>div>p]:text-foreground-lighter [&>div>p]:!m-0 tracking-tighter",v?"block":"hidden"),children:(0,s.jsx)(c.U,{content:N})})]})}},61531:function(e,t,i){var s=i(52322),n=i(99064),r=i(25097),a=i(17172),l=i(39097),o=i.n(l),d=i(2784),c=i(32079);t.Z=e=>{let{icon:t,title:i,description:l,url:u,urlLabel:h="Read more",defaultVisibility:p=!1,hideCollapse:E=!1,button:m,className:g="",block:_=!1}=e,[x,T]=(0,d.useState)(p);return(0,s.jsx)("div",{className:"".concat(_?"block w-full":"","\n      block w-full rounded border bg-surface-200 py-3 ").concat(g),children:(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[t&&(0,s.jsx)("span",{className:"text-foreground-lighter",children:t}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("h5",{className:"text-sm text-foreground",children:i})})]}),l&&!E?(0,s.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>T(!x),children:x?(0,s.jsx)(n.Z,{size:14,strokeWidth:1.5}):(0,s.jsx)(r.Z,{size:14,strokeWidth:1.5})}):null]}),(l||u||m)&&(0,s.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(x?"mt-3":""),style:{maxHeight:x?500:0},children:[(0,s.jsx)("div",{className:"text-foreground-light text-sm",children:l}),u&&(0,s.jsx)("div",{children:(0,s.jsx)(c.z,{asChild:!0,type:"default",icon:(0,s.jsx)(a.Z,{}),children:(0,s.jsx)(o(),{href:u,target:"_blank",rel:"noreferrer",children:h})})}),m&&(0,s.jsx)("div",{children:m})]})]})})}},75716:function(e,t,i){var s=i(52322),n=i(59491),r=i(39097),a=i.n(r),l=i(93463),o=i(87175),d=i(89823),c=i(26211),u=i(75939),h=i(54383),p=i(32079),E=i(44778);t.Z=e=>{var t,i,r;let{icon:m,primaryText:g,secondaryText:_,addon:x,buttonText:T,disabled:b=!1}=e,S=(0,c.V)(),A=(0,d.l)(),{data:N}=(0,l.Gl)({orgSlug:null==A?void 0:A.slug}),f=null==N?void 0:null===(t=N.plan)||void 0===t?void 0:t.id,j=(0,o.Xo)(n.KA.BILLING_WRITE,"stripe.subscriptions"),L=(0,u.P)("disableProjectCreationAndUpdate");return(0,s.jsx)("div",{className:(0,h.cn)("block w-full rounded border border-opacity-20 py-4 px-6","border-overlay bg-surface-200"),children:(0,s.jsxs)("div",{className:"flex gap-x-3",children:[m&&(0,s.jsx)("div",{className:"mt-1",children:m}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-x-32",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm",children:g}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:_})})]}),!j||L?(0,s.jsx)(E.u,{disabled:!0,type:"primary",tooltip:{content:{side:"bottom",text:L?"Subscription changes are currently disabled, our engineers are working on a fix":j?void 0:"You need additional permissions to amend subscriptions"}},children:"Reset database password"}):(0,s.jsx)(p.z,{asChild:!0,type:"primary",disabled:!j||L||b,children:(0,s.jsx)(a(),{href:"free"===f?"/org/".concat(null!==(i=null==A?void 0:A.slug)&&void 0!==i?i:"_","/billing?panel=subscriptionPlan"):"/project/".concat(null!==(r=null==S?void 0:S.ref)&&void 0!==r?r:"_","/settings/addons?panel=").concat(x),children:T||("free"===f?"Upgrade to Pro":"Enable add on")})})]})]})})}},74138:function(e,t,i){var s=i(52322),n=i(2784),r=i(41909),a=i(54383),l=i(32079),o=i(71550);let d=(0,n.forwardRef)((e,t)=>{let{title:i,size:d="small",visible:c,onCancel:u,onConfirm:h,loading:p=!1,cancelLabel:E="Cancel",confirmLabel:m="Submit",confirmLabelLoading:g,alert:_,children:x,variant:T="default",disabled:b,...S}=e;(0,n.useEffect)(()=>{c&&N(!1)},[c]),(0,n.useEffect)(()=>{N(p)},[p]);let[A,N]=(0,n.useState)(!1);return(0,s.jsx)(r.Vq,{open:c,...S,onOpenChange:()=>{c&&u()},children:(0,s.jsxs)(r.cZ,{ref:t,className:"p-0 gap-0 pb-5 !block",size:d,children:[(0,s.jsx)(r.fK,{className:(0,a.cn)("border-b"),padding:"small",children:(0,s.jsx)(r.$N,{className:"",children:i})}),_&&(0,s.jsx)(o.J,{type:T,label:_.title,description:_.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==_?void 0:_.base}),x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.VO,{padding:"small",children:x}),(0,s.jsx)(r.P3,{})]}),(0,s.jsxs)("div",{className:"flex gap-2 px-5 pt-5",children:[(0,s.jsx)(l.z,{size:"medium",block:!0,type:"default",disabled:A,onClick:()=>u(),children:E}),(0,s.jsx)(l.z,{block:!0,size:"medium",type:"destructive"===T?"danger":"warning"===T?"warning":"primary",htmlType:"submit",loading:A,disabled:A||b,onClick:e=>{e.preventDefault(),e.stopPropagation(),N(!0),h()},className:"truncate",children:m})]})]})})});d.displayName="ConfirmationModal",t.Z=d},87668:function(e,t,i){i.d(t,{E:function(){return S}});var s=i(52322),n=i(2784),r=i(22574),a=i(10929),l=i(54383),o=i(6112),d=i(75109),c=i(67914);let u=(0,a.j)("relative grid gap-2",{variants:{size:{tiny:"text-xs",small:"text-sm leading-4",medium:"text-sm",large:"text-base",xlarge:"text-base"},align:{left:"",right:""},responsive:{true:"",false:""},layout:{horizontal:"grid grid-cols-12",vertical:"flex flex-col gap-3",flex:"flex flex-row gap-3","flex-row-reverse":"flex flex-row gap-3 flex-row-reverse justify-between"},flex:{true:"",false:""}},compoundVariants:[{layout:"flex",align:"right",className:"justify-between"},{layout:"flex-row-reverse",align:"right",className:"justify-between"}],defaultVariants:{}}),h=(0,a.j)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"flex flex-col gap-2 col-span-4",vertical:"flex flex-row gap-2 justify-between",flex:"flex flex-col gap-0","flex-row-reverse":"flex flex-col gap-2"},labelLayout:{horizontal:"",vertical:"","":""}},compoundVariants:[{flex:!0,align:"left",className:"order-2"},{flex:!0,align:"right",className:"order-1"},{layout:"vertical",labelLayout:void 0,flex:!1,className:"flex flex-row gap-2 justify-between"},{layout:"horizontal",className:"flex flex-col gap-2"}],defaultVariants:{}}),p=(0,a.j)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"order-1",right:"order-2"},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:"order-1"},{flex:!0,align:"right",className:"order-2"},{layout:"vertical",className:"col-span-12"},{layout:"horizontal",align:"left",className:"col-span-8"},{layout:"horizontal",align:"right",className:"text-right"}],defaultVariants:{}}),E=(0,a.j)("text-foreground-lighter leading-normal",{variants:{size:{...d.NO.text},layout:{vertical:"mt-2",horizontal:"mt-2",flex:"","flex-row-reverse":""}},defaultVariants:{}}),m=(0,a.j)("text-foreground-muted",{variants:{size:{...d.NO.text}},defaultVariants:{}}),g=(0,a.j)("text-foreground-muted",{variants:{size:{...d.NO.text}},defaultVariants:{}}),_=(0,a.j)("text-foreground-muted",{variants:{size:{...d.NO.text}},defaultVariants:{}}),x=(0,a.j)("",{variants:{flex:{true:"",false:""},align:{left:"",right:""}},compoundVariants:[{flex:!0,align:"left",className:""},{flex:!0,align:"right",className:"order-last"}]}),T=(0,a.j)("",{variants:{nonBoxInput:{true:"",false:""},label:{true:"",false:""},layout:{vertical:"",horizontal:"","flex-row-reverse":""}},compoundVariants:[{nonBoxInput:!0,label:!0,layout:"vertical",className:"my-3"},{nonBoxInput:!0,label:!0,layout:"horizontal",className:"my-3 md:mt-0 mb-3"}],defaultVariants:{}}),b=n.forwardRef((e,t)=>{let{align:i="left",className:n,description:a,id:d,label:b,labelOptional:S,layout:A="vertical",style:N,labelLayout:f,size:j="medium",beforeLabel:L,afterLabel:R,nonBoxInput:y=!b,hideMessage:v=!1,isReactForm:I,...O}=e,w="flex"===A||"flex-row-reverse"===A,C=!!(b||L||R),D=I&&!v&&(0,s.jsx)(c.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeInOut"},className:"mt-2",children:(0,s.jsx)(r.zG,{className:"mt-2 transition-opacity duration-300 ease-in-out","data-formlayout-id":"message"})}),P=a&&I?(0,s.jsx)(r.pf,{className:(0,l.cn)(E({size:j,layout:A})),"data-formlayout-id":"description",id:d+"-description",children:a}):a?(0,s.jsx)("p",{className:(0,l.cn)(E({size:j,layout:A}),"text-sm text-foreground-light"),"data-formlayout-id":"description",children:a}):null,M=()=>(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)("span",{className:(0,l.cn)(m({size:j})),id:d+"-before","data-formlayout-id":"beforeLabel",children:(0,s.jsx)("span",{children:L})}),(0,s.jsx)("span",{children:b}),R&&(0,s.jsx)("span",{className:(0,l.cn)(g({size:j})),id:d+"-after","data-formlayout-id":"afterLabel",children:R})]});return(0,s.jsxs)("div",{ref:t,...O,className:(0,l.cn)(u({size:j,flex:w,align:i,layout:A}),n),children:[w&&(0,s.jsx)("div",{className:(0,l.cn)(x({flex:w,align:i})),children:O.children}),C||S||"horizontal"===A?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,l.cn)(h({align:i,labelLayout:f,flex:w,layout:A})),"data-formlayout-id":"labelContainer",children:[C&&I?(0,s.jsx)(r.lX,{className:"flex gap-2 items-center break-all","data-formlayout-id":"formLabel",children:(0,s.jsx)(M,{})}):(0,s.jsx)(o._,{htmlFor:O.name,"data-formlayout-id":"label",className:"flex gap-2 items-center break-all",children:(0,s.jsx)(M,{})}),S&&(0,s.jsx)("span",{className:(0,l.cn)(_({size:j})),id:d+"-optional","data-formlayout-id":"labelOptional",children:S}),w&&(0,s.jsxs)(s.Fragment,{children:[P,D]})]})}):null,!w&&(0,s.jsx)("div",{className:(0,l.cn)(p({align:i,layout:A})),style:N,"data-formlayout-id":"dataContainer",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:(0,l.cn)(T({nonBoxInput:y,label:b,layout:A})),"data-formlayout-id":"nonBoxInputContainer",children:O.children}),D,P]})})]})}),S=(0,n.forwardRef)((e,t)=>{let{...i}=e;return(0,s.jsx)(r.xJ,{children:(0,s.jsx)(b,{ref:t,isReactForm:!0,...i,children:i.children})})});S.displayName="FormItemLayout"},58898:function(e,t,i){i.d(t,{d:function(){return j}});var s=i(52322),n=i(76141),r=i(94299),a=i(6659),l=i(2784),o=i(72282),d=i(90028),c=i(54383),u=i(32079);let h=e=>({hljs:{display:"block",overflowX:"auto",color:e?"#ddd":"#888"},"hljs-tag":{color:"#569cd6"},"hljs-keyword":{color:"#569cd6",fontWeight:"normal"},"hljs-selector-tag":{color:"#569cd6",fontWeight:"normal"},"hljs-literal":{color:"#569cd6",fontWeight:"normal"},"hljs-strong":{color:"#569cd6"},"hljs-name":{color:"#569cd6"},"hljs-code":{color:"#66d9ef"},"hljs-class .hljs-title":{color:"gray"},"hljs-attribute":{color:"#bf79db"},"hljs-symbol":{color:"#bf79db"},"hljs-regexp":{color:"#bf79db"},"hljs-link":{color:"#bf79db"},"hljs-string":{color:"#3ECF8E"},"hljs-bullet":{color:"#3ECF8E"},"hljs-subst":{color:"#3ECF8E"},"hljs-title":{color:"#3ECF8E",fontWeight:"normal"},"hljs-section":{color:"#3ECF8E",fontWeight:"normal"},"hljs-emphasis":{color:"#3ECF8E"},"hljs-type":{color:"#3ECF8E",fontWeight:"normal"},"hljs-built_in":{color:"#3ECF8E"},"hljs-builtin-name":{color:"#3ECF8E"},"hljs-selector-attr":{color:"#3ECF8E"},"hljs-selector-pseudo":{color:"#3ECF8E"},"hljs-addition":{color:"#3ECF8E"},"hljs-variable":{color:"#3ECF8E"},"hljs-template-tag":{color:"#3ECF8E"},"hljs-template-variable":{color:"#3ECF8E"},"hljs-comment":{color:e?"#999":"#888"},"hljs-quote":{color:"#75715e"},"hljs-deletion":{color:"#75715e"},"hljs-meta":{color:"#75715e"},"hljs-doctag":{fontWeight:"normal"},"hljs-selector-id":{fontWeight:"normal"}});var p=i(65820),E=i.n(p),m=i(27666),g=i(31806),_=i(88109),x=i(80039),T=i(86497),b=i(81303),S=i(83667),A=i(54299),N=i(14969),f=i(12463);let j=e=>{var t,i,p,j;let{title:L,language:R,linesToHighlight:y=[],highlightBorder:v,styleConfig:I,className:O,wrapperClassName:w,value:C,theme:D,children:P,hideCopy:M=!1,hideLineNumbers:U=!1,renderer:k,focusable:X=!0}=e,{resolvedTheme:B}=(0,a.F)(),q=null==B?void 0:B.includes("dark"),K=null!=D?D:h(q),[F,Z]=(0,l.useState)(!1),V=()=>{Z(!0),setTimeout(()=>{Z(!1)},1e3)},z=l.Children.toArray(P),[H]=1===z.length?z:[],G=null!==(i=null!=C?C:"string"==typeof H?H:void 0)&&void 0!==i?i:P,W="string"==typeof(G=null!==(p=null==G?void 0:null===(t=G.trimEnd)||void 0===t?void 0:t.call(G))&&void 0!==p?p:G)&&G.length<70?"short-inline-codeblock":"",Y=R||(O?O.replace("language-",""):"js");"jsx"===Y&&(Y="js"),d.Z.registerLanguage("js",T.Z),d.Z.registerLanguage("ts",f.Z),d.Z.registerLanguage("py",A.Z),d.Z.registerLanguage("sql",N.Z),d.Z.registerLanguage("bash",m.Z),d.Z.registerLanguage("dart",_.Z),d.Z.registerLanguage("csharp",g.Z),d.Z.registerLanguage("json",b.Z),d.Z.registerLanguage("kotlin",S.Z),d.Z.registerLanguage("curl",E()),d.Z.registerLanguage("http",x.Z),("bash"===Y||"sh"===Y)&&(U=!0);let $=!U;return(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)("div",{className:"text-sm rounded-t-md bg-surface-100 py-2 px-4 border border-b-0 border-default font-sans",children:L}),O?(0,s.jsxs)("div",{className:(0,c.cn)("group relative max-w-[90vw] md:max-w-none overflow-auto",w),children:[(0,s.jsx)(d.Z,{language:Y,wrapLines:!0,style:K,className:(0,c.cn)("code-block border border-surface p-4 w-full !my-0 !bg-surface-100 outline-none focus:border-foreground-lighter/50","".concat(L?"!rounded-t-none !rounded-b-md":"!rounded-md"),"".concat($?"":"pl-6"),O),customStyle:{fontSize:13,lineHeight:1.4},showLineNumbers:$,lineProps:e=>y.includes(e)?{style:{display:"block",backgroundColor:(null==I?void 0:I.highlightBackgroundColor)?null==I?void 0:I.highlightBackgroundColor:"hsl(var(--background-selection))",borderLeft:v?"1px solid ".concat((null==I?void 0:I.highlightBorderColor)?null==I?void 0:I.highlightBorderColor:"hsl(var(--foreground-default)",")"):null},class:"hljs-line-highlight"}:{},lineNumberContainerStyle:{paddingTop:"128px"},lineNumberStyle:{minWidth:"44px",paddingLeft:"4px",paddingRight:"4px",marginRight:"12px",color:null!==(j=null==I?void 0:I.lineNumber)&&void 0!==j?j:"#828282",textAlign:"center",fontSize:12,paddingTop:"4px",paddingBottom:"4px"},renderer:k,contentEditable:X,onBeforeInput:e=>(e.preventDefault(),!1),suppressContentEditableWarning:!0,children:G}),!M&&(C||P)&&O?(0,s.jsx)("div",{className:["absolute right-2 top-2","opacity-0 group-hover:opacity-100 transition","".concat(q?"dark":"")].join(" "),children:(0,s.jsx)(o.CopyToClipboard,{text:C||P,children:(0,s.jsx)(u.z,{type:"default",className:"px-1.5",icon:F?(0,s.jsx)(n.Z,{}):(0,s.jsx)(r.Z,{}),onClick:()=>V(),children:F?"Copied":""})})}):null]}):(0,s.jsx)("code",{className:W,children:C||P})]})}},11992:function(e,t,i){var s=i(52322),n=i(69557);i(2784);var r=i(46318);let a=e=>{let{open:t,children:i,className:r,...a}=e;return(0,s.jsx)(n.fC,{asChild:a.asChild,defaultOpen:a.defaultOpen,open:t,onOpenChange:a.onOpenChange,disabled:a.disabled,className:r,children:i})};a.Trigger=function(e){let{children:t,asChild:i}=e;return(0,s.jsx)(n.xz,{asChild:i,children:t})},a.Content=function(e){let{asChild:t,children:i,className:a}=e,l=(0,r.Z)("collapsible");return(0,s.jsx)(n.VY,{asChild:t,className:[l.content,a].join(" "),children:i})},t.ZP=a},4419:function(e,t,i){var s=i(52322),n=i(2784),r=i(25001),a=i(71653),l=i(67440),o=i(46318),d=i(70780);t.Z=function(e){let{defaultValue:t,descriptionText:i,error:c,icon:u,inputRef:h,label:p,afterLabel:E,beforeLabel:m,labelOptional:g,layout:_,value:x,actions:T,size:b="medium",validation:S,id:A="",name:N="",...f}=e,j=(0,o.Z)("inputNumber"),{formContextOnChange:L,values:R,errors:y,handleBlur:v,touched:I,fieldLevelValidation:O}=(0,d.G)();R&&!x&&(x=R[A||N]),c||(y&&!c&&(c=y[A||N]),c=I&&I[A||N]?c:void 0),(0,n.useEffect)(()=>{S&&O(A,S(x))},[]);let w=[j.base];return c&&w.push(j.variants.error),c||w.push(j.variants.standard),u&&w.push(j.with_icon),b&&w.push(j.size[b]),f.disabled&&w.push(j.disabled),(0,s.jsx)("div",{className:f.className,children:(0,s.jsx)(r.l,{label:p,afterLabel:E,beforeLabel:m,labelOptional:g,layout:_,id:A,error:c,descriptionText:i,style:f.style,size:b,children:(0,s.jsxs)("div",{className:j.container,children:[(0,s.jsx)("input",{"data-size":b,id:A,name:N,onChange:function(e){f.onChange&&f.onChange(e),L&&L(e),S&&O(A,S(e.target.value))},onBlur:function(e){v&&v(e),f.onBlur&&f.onBlur(e)},type:"number",ref:h,value:x,className:w.join(" "),...f}),u&&(0,s.jsx)(l.Z,{size:b,icon:u}),c||T?(0,s.jsxs)("div",{className:j.actions_container,children:[c&&(0,s.jsx)(a.Z,{size:b}),T&&T]}):null]})})})}},62284:function(e,t,i){i.d(t,{Z:function(){return _}});var s=i(52322),n=i(40538),r=i(35676),a=i.n(r),l=i(2784),o=i(25001),d=i(71653),c=i(67440),u=i(46318),h=i(54383),p=i(70780);let E=(0,l.createContext)({onChange:e=>{},selected:void 0});var m=i(76141);function g(e){let{children:t,className:i,buttonClassName:r,descriptionText:m,error:g,icon:_,id:x="",name:T="",label:b,labelOptional:S,layout:A,value:N,onChange:f,onFocus:j,onBlur:L,style:R,size:y="medium",defaultValue:v,validation:I,disabled:O,optionsWidth:w}=e,[C,D]=(0,l.useState)(void 0),[P,M]=(0,l.useState)({}),U=(0,u.Z)("listbox"),k=(0,l.useRef)(null),{formContextOnChange:X,values:B,errors:q,handleBlur:K,touched:F,fieldLevelValidation:Z}=(0,p.G)();B&&!N&&(N=B[x||T],v=B[x||T]),g||(q&&!g&&(g=q[x||T]),g=F&&F[x||T]?g:void 0),(0,l.useEffect)(()=>{void 0!==N&&D(N)},[N]),(0,l.useEffect)(()=>{function e(){var e;document.documentElement.style.setProperty("--width-listbox","".concat(w||(null===(e=k.current)||void 0===e?void 0:e.offsetWidth),"px"))}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{var e;let i=a()(t);function s(e){return i.find(t=>t.props.value===e)}if(N){D(N);let e=s(N);M((null==e?void 0:e.props)?e.props:void 0);return}if(C){let e=s(C);M((null==e?void 0:e.props)?e.props:void 0);return}if(v){D(v);let e=s(C);M((null==e?void 0:e.props)?e.props:void 0);return}M(null===(e=i[0])||void 0===e?void 0:e.props)},[C]);let V=[U.container,U.base,r],z=[U.addOnBefore];return g&&V.push(U.variants.error),g||V.push(U.variants.standard),_&&z.push(U.with_icon),y&&V.push(U.size[y]),O&&V.push(U.disabled),(0,s.jsx)(o.l,{label:b,labelOptional:S,layout:A,id:x,error:g,descriptionText:m,className:i,style:R,size:y,children:(0,s.jsxs)(n.fC,{children:[(0,s.jsx)(n.xz,{asChild:!0,disabled:O,children:(0,s.jsxs)("button",{"data-size":y,ref:k,className:(0,h.cn)(V),onBlur:function(e){K&&K(e),L&&L(e)},onFocus:j,name:T,id:x,children:[(0,s.jsxs)("span",{className:(0,h.cn)(z),children:[_&&(0,s.jsx)(c.Z,{size:y,icon:_}),(null==P?void 0:P.addOnBefore)&&(0,s.jsx)(P.addOnBefore,{}),(0,s.jsx)("span",{className:U.label,children:null==P?void 0:P.label})]}),(0,s.jsx)("span",{className:U.chevron_container,children:(0,s.jsx)("svg",{className:U.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),g&&(0,s.jsx)("div",{className:U.actions_container,children:g&&(0,s.jsx)(d.Z,{size:y})})]})}),(0,s.jsx)(n.VY,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:U.options_container,children:(0,s.jsx)("div",{children:(0,s.jsx)(E.Provider,{value:{onChange:function(e){f&&f(e),D(e);let t={};t.target={type:"select",name:T,id:x,value:e,checked:void 0},X&&X(t),I&&Z(x,I(e))},selected:C},children:t})})})]})})}g.Option=function(e){let{id:t,value:i,label:r,disabled:a=!1,children:l,className:o="",addOnBefore:d}=e,c=(0,u.Z)("listbox");return(0,s.jsx)(E.Consumer,{children:e=>{let{onChange:r,selected:u}=e,p=u===i;return(0,s.jsxs)(n.ck,{className:(0,h.cn)(c.option,p?c.option_active:" ",a?c.option_disabled:" ",o),onSelect:()=>a?{}:r(i),children:[(0,s.jsxs)("div",{className:c.option_inner,children:[d&&d({active:p,selected:u}),(0,s.jsx)("span",{children:"function"==typeof l?l({active:p,selected:u}):l})]}),p?(0,s.jsx)("span",{className:(0,h.cn)(c.option_check,p?c.option_check_active:""),children:(0,s.jsx)(m.Z,{className:c.option_check_icon,"aria-hidden":"true"})}):null]},t)}})};var _=g},9015:function(e,t,i){var s=i(52322),n=i(64266),r=i(2784),a=i(46318);let l=e=>{var t,i,l;let{defaultActiveId:o,activeId:d,type:c="pills",size:u="tiny",block:h,onChange:p,onClick:E,scrollable:m,wrappable:g,addOnBefore:_,addOnAfter:x,listClassNames:T,baseClassNames:b,refs:S,children:A}=e,N=r.Children.toArray(A),[f,j]=(0,r.useState)(null!==(l=null!=d?d:o)&&void 0!==l?l:null==N?void 0:null===(i=N[0])||void 0===i?void 0:null===(t=i.props)||void 0===t?void 0:t.id);(0,r.useMemo)(()=>{d&&d!==f&&j(d)},[d]);let L=(0,a.Z)("tabs");function R(e){null==E||E(e),e!==f&&(null==p||p(e),j(e))}let y=[L[c].list];return m&&y.push(L.scrollable),g&&y.push(L.wrappable),T&&y.push(T),(0,s.jsxs)(n.fC,{value:f,className:[L.base,b].join(" "),ref:null==S?void 0:S.base,children:[(0,s.jsxs)(n.aV,{className:y.join(" "),ref:null==S?void 0:S.list,children:[_,N.map(e=>{let t=f===e.props.id,i=[L[c].base,L.size[u]];return t?i.push(L[c].active):i.push(L[c].inactive),h&&i.push(L.block),(0,s.jsxs)(n.xz,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),R(e.props.id))},onClick:()=>R(e.props.id),value:e.props.id,className:i.join(" "),children:[e.props.icon,(0,s.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),x]}),N]})};l.Panel=e=>{let{children:t,id:i,className:r}=e,l=(0,a.Z)("tabs");return(0,s.jsx)(n.VY,{value:i,className:[l.content,r].join(" "),children:t})},t.Z=l},22854:function(e,t,i){var s=i(52322),n=i(6277),r=i(2784),a=i(25001),l=i(46318),o=i(70780);t.Z=function(e){var t;let{disabled:i,id:d="",name:c="",layout:u="flex",error:h,descriptionText:p,label:E,afterLabel:m,beforeLabel:g,labelOptional:_,onChange:x,onBlur:T,defaultChecked:b,checked:S,className:A,align:N="left",size:f="medium",validation:j,labelLayout:L,...R}=e,y=(0,l.Z)("toggle"),{formContextOnChange:v,values:I,errors:O,handleBlur:w,touched:C,fieldLevelValidation:D}=(0,o.G)();I&&!S&&(S=I[d||c]);let[P,M]=(0,r.useState)(null!==(t=b||S)&&void 0!==t&&t),U=null!=S?S:P;(0,r.useEffect)(()=>{M(U)},[]),h||(O&&!h&&(h=O[d||c]),h=C&&C[d||c]?h:void 0);let k=[y.base,y.handle_container[f]];U&&k.push(y.active);let X=[y.handle.base,y.handle[f]];return U&&X.push(y.handle_active[f]),(0,s.jsx)(a.l,{className:A,label:E,afterLabel:m,beforeLabel:g,labelOptional:_,layout:u,id:d,error:h,align:N,descriptionText:p,size:f,labelLayout:L,nonBoxInput:!0,children:(0,s.jsx)("button",{type:"button",id:d,name:c,className:(0,n.default)(...k,i&&"opacity-50 cursor-default"),onClick:function(){x&&x(!U),M(!P);let e={};e.target={type:"checkbox",name:c,id:d,value:!U,checked:!U},v&&v(e),j&&D(d,j(!P))},disabled:i,onBlur:function(e){setTimeout(()=>{w&&w(e)},100),T&&T(e)},...R,children:(0,s.jsx)("span",{"aria-hidden":"true",className:X.join(" ")})})})}}}]);